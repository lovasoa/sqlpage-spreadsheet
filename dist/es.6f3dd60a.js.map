{"mappings":"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","sources":["<anon>","node_modules/@univerjs/sheets-numfmt/lib/es/index.js","node_modules/rxjs/dist/esm5/internal/operators/tap.js","node_modules/rxjs/src/internal/operators/tap.ts"],"sourcesContent":["(function () {\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  var parcelRequire = $parcel$global[\"parcelRequire26fc\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"61xGp\", function(module, exports) {\n\n$parcel$export(module.exports, \"SetNumfmtCommand\", function () { return $462cf6d68dfaa0d6$export$9bb98f359d6381eb; });\n$parcel$export(module.exports, \"getPatternType\", function () { return $462cf6d68dfaa0d6$export$a7bdce4fa13fe691; });\n$parcel$export(module.exports, \"UniverSheetsNumfmtPlugin\", function () { return $462cf6d68dfaa0d6$export$95359223c4ac5277; });\n\nvar $83KcA = parcelRequire(\"83KcA\");\n\nvar $ls2nu = parcelRequire(\"ls2nu\");\n\nvar $jv4BO = parcelRequire(\"jv4BO\");\nvar $5WWyv = parcelRequire(\"5WWyv\");\nvar $d0sRG = parcelRequire(\"d0sRG\");\nvar $3KKCW = parcelRequire(\"3KKCW\");\nvar $bA4Xh = parcelRequire(\"bA4Xh\");\nvar $9kWt8 = parcelRequire(\"9kWt8\");\nvar $bTGUS = parcelRequire(\"bTGUS\");\n\nvar $11kpD = parcelRequire(\"11kpD\");\n\nvar $D79YY = parcelRequire(\"D79YY\");\n\nvar $cahIb = parcelRequire(\"cahIb\");\n\nvar $bVip2 = parcelRequire(\"bVip2\");\nvar $fElJC = parcelRequire(\"fElJC\");\nvar $bTGUS = parcelRequire(\"bTGUS\");\nvar $6cCiq = parcelRequire(\"6cCiq\");\n\nvar $gQuIR = parcelRequire(\"gQuIR\");\n\nvar $bLx5G = parcelRequire(\"bLx5G\");\n\nvar $5KEro = parcelRequire(\"5KEro\");\nvar $462cf6d68dfaa0d6$var$__defProp = Object.defineProperty;\nvar $462cf6d68dfaa0d6$var$__defNormalProp = (obj, key2, value)=>key2 in obj ? $462cf6d68dfaa0d6$var$__defProp(obj, key2, {\n        enumerable: !0,\n        configurable: !0,\n        writable: !0,\n        value: value\n    }) : obj[key2] = value;\nvar $462cf6d68dfaa0d6$var$__name = (target, value)=>$462cf6d68dfaa0d6$var$__defProp(target, \"name\", {\n        value: value,\n        configurable: !0\n    });\nvar $462cf6d68dfaa0d6$var$__publicField = (obj, key2, value)=>$462cf6d68dfaa0d6$var$__defNormalProp(obj, typeof key2 != \"symbol\" ? key2 + \"\" : key2, value);\nconst $462cf6d68dfaa0d6$var$currencySymbols = [\n    \"$\",\n    \"\\xa3\",\n    \"\\xa5\",\n    \"\\xa4\",\n    \"\\u058F\",\n    \"\\u060B\",\n    \"\\u09F3\",\n    \"\\u0E3F\",\n    // '៛',\n    \"\\u20A1\",\n    \"\\u20A6\",\n    \"\\u20A9\",\n    \"\\u20AA\",\n    \"\\u20AB\",\n    \"\\u20AC\",\n    \"\\u20AD\",\n    \"\\u20AE\",\n    \"\\u20B1\",\n    \"\\u20B2\",\n    \"\\u20B4\",\n    \"\\u20B8\",\n    \"\\u20B9\",\n    \"\\u20BA\",\n    \"\\u20BC\",\n    \"\\u20BD\",\n    \"\\u20BE\",\n    \"\\u20BF\"\n], $462cf6d68dfaa0d6$export$4b021f12543b53a8 = {\n    US: \"$\",\n    // United States Dollar\n    CA: \"C$\",\n    // Canadian Dollar\n    GB: \"\\xa3\",\n    // British Pound Sterling\n    JP: \"\\xa5\",\n    // Japanese Yen\n    IN: \"\\u20B9\",\n    // Indian Rupee\n    AU: \"A$\",\n    // Australian Dollar\n    CN: \"\\xa5\",\n    // Chinese Yuan\n    KR: \"\\u20A9\",\n    // South Korean Won\n    RU: \"\\u20BD\",\n    // Russian Ruble\n    // Euro countries\n    AT: \"\\u20AC\",\n    BE: \"\\u20AC\",\n    CY: \"\\u20AC\",\n    EE: \"\\u20AC\",\n    FI: \"\\u20AC\",\n    FR: \"\\u20AC\",\n    DE: \"\\u20AC\",\n    GR: \"\\u20AC\",\n    IE: \"\\u20AC\",\n    IT: \"\\u20AC\",\n    LV: \"\\u20AC\",\n    LT: \"\\u20AC\",\n    LU: \"\\u20AC\",\n    MT: \"\\u20AC\",\n    NL: \"\\u20AC\",\n    PT: \"\\u20AC\",\n    SK: \"\\u20AC\",\n    SI: \"\\u20AC\",\n    ES: \"\\u20AC\"\n}, $462cf6d68dfaa0d6$var$getDecimalFromPattern = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern, defaultValue = 0)=>{\n    var _a9;\n    return pattern && (_a9 = (0, $83KcA.numfmt).getInfo(pattern).maxDecimals) != null ? _a9 : defaultValue;\n}, \"getDecimalFromPattern\"), $462cf6d68dfaa0d6$var$isPatternEqualWithoutDecimal = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((patternA, patternB)=>{\n    if (patternA && !patternB || !patternA && patternB) return !1;\n    const getString = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((tokens)=>tokens.reduce((pre, cur)=>{\n            if (pre.isEnd) return pre;\n            const str = cur.value || cur.num;\n            return cur.type === \"point\" ? (pre.isEnd = !0, pre) : {\n                ...pre,\n                result: pre.result + str\n            };\n        }, {\n            isEnd: !1,\n            result: \"\"\n        }).result, \"getString\"), partitionsA = (0, $83KcA.numfmt).getInfo(patternA)._partitions, partitionsB = (0, $83KcA.numfmt).getInfo(patternB)._partitions, A1 = getString(partitionsA[0].tokens), B1 = getString(partitionsB[0].tokens), A2 = getString(partitionsA[1].tokens), B2 = getString(partitionsB[1].tokens);\n    return A1 === B1 && A2 === B2 && partitionsA[1].color === partitionsB[1].color;\n}, \"isPatternEqualWithoutDecimal\"), $462cf6d68dfaa0d6$var$getDecimalString = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((length)=>new Array(Math.min(Math.max(0, Number(length)), 30)).fill(0).join(\"\"), \"getDecimalString\"), $462cf6d68dfaa0d6$var$setPatternDecimal = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((patterns, decimalLength)=>patterns.split(\";\").map((pattern)=>/\\.0?/.test(pattern) ? pattern.replace(/\\.0*/g, `${decimalLength > 0 ? \".\" : \"\"}${$462cf6d68dfaa0d6$var$getDecimalString(Number(decimalLength || 0))}`) : /0([^0]?)|0$/.test(pattern) ? pattern.replace(/0([^0]+)|0$/, `0${decimalLength > 0 ? \".\" : \"\"}${$462cf6d68dfaa0d6$var$getDecimalString(Number(decimalLength || 0))}$1`) : pattern).join(\";\"), \"setPatternDecimal\"), $462cf6d68dfaa0d6$var$isPatternHasDecimal = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern)=>/\\.0?/.test(pattern) || /0([^0]?)|0$/.test(pattern), \"isPatternHasDecimal\"), $462cf6d68dfaa0d6$export$9bb98f359d6381eb = {\n    id: \"sheet.command.numfmt.set.numfmt\",\n    type: (0, $83KcA.CommandType).COMMAND,\n    handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((accessor, params)=>{\n        if (!params) return !1;\n        const commandService = accessor.get((0, $83KcA.ICommandService)), univerInstanceService = accessor.get((0, $83KcA.IUniverInstanceService)), undoRedoService = accessor.get((0, $83KcA.IUndoRedoService)), target = (0, $ls2nu.getSheetCommandTarget)(univerInstanceService, params);\n        if (!target) return !1;\n        const { unitId: unitId, subUnitId: subUnitId } = target, setCells = params.values.filter((value)=>!!value.pattern), removeCells = params.values.filter((value)=>!value.pattern), setRedos = (0, $ls2nu.transformCellsToRange)(unitId, subUnitId, setCells), removeRedos = {\n            unitId: unitId,\n            subUnitId: subUnitId,\n            ranges: removeCells.map((cell)=>({\n                    startColumn: cell.col,\n                    startRow: cell.row,\n                    endColumn: cell.col,\n                    endRow: cell.row\n                }))\n        }, redos = [], undos = [];\n        if (setCells.length) {\n            Object.keys(setRedos.values).forEach((key2)=>{\n                const v = setRedos.values[key2];\n                v.ranges = (0, $ls2nu.rangeMerge)(v.ranges);\n            }), redos.push({\n                id: (0, $ls2nu.SetNumfmtMutation).id,\n                params: setRedos\n            });\n            const undo = (0, $ls2nu.factorySetNumfmtUndoMutation)(accessor, setRedos);\n            undos.push(...undo);\n        }\n        if (removeCells.length) {\n            removeRedos.ranges = (0, $ls2nu.rangeMerge)(removeRedos.ranges), redos.push({\n                id: (0, $ls2nu.RemoveNumfmtMutation).id,\n                params: removeRedos\n            });\n            const undo = (0, $ls2nu.factoryRemoveNumfmtUndoMutation)(accessor, removeRedos);\n            undos.push(...undo);\n        }\n        const result = (0, $83KcA.sequenceExecute)(redos, commandService).result;\n        return result && undoRedoService.pushUndoRedo({\n            unitID: unitId,\n            undoMutations: undos,\n            redoMutations: redos\n        }), result;\n    }, \"handler\")\n}, $462cf6d68dfaa0d6$export$1d5d20f76e156639 = {\n    id: \"sheet.command.numfmt.add.decimal.command\",\n    type: (0, $83KcA.CommandType).COMMAND,\n    handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(async (accessor)=>{\n        const commandService = accessor.get((0, $83KcA.ICommandService)), selectionManagerService = accessor.get((0, $ls2nu.SheetsSelectionsService)), numfmtService = accessor.get((0, $ls2nu.INumfmtService)), univerInstanceService = accessor.get((0, $83KcA.IUniverInstanceService)), selections = selectionManagerService.getCurrentSelections();\n        if (!selections || !selections.length) return !1;\n        const target = (0, $ls2nu.getSheetCommandTarget)(univerInstanceService);\n        if (!target) return !1;\n        const { unitId: unitId, subUnitId: subUnitId } = target;\n        let maxDecimals = 0;\n        selections.forEach((selection)=>{\n            (0, $83KcA.Range).foreach(selection.range, (row, col)=>{\n                const numfmtValue = numfmtService.getValue(unitId, subUnitId, row, col);\n                if (!numfmtValue) {\n                    const cell = target.worksheet.getCellRaw(row, col);\n                    if (!maxDecimals && cell && cell.t === (0, $83KcA.CellValueType).NUMBER && cell.v) {\n                        const regResult = /\\.(\\d*)$/.exec(String(cell.v));\n                        if (regResult) {\n                            const length = regResult[1].length;\n                            if (!length) return;\n                            maxDecimals = Math.max(maxDecimals, length);\n                        }\n                    }\n                    return;\n                }\n                const decimals2 = $462cf6d68dfaa0d6$var$getDecimalFromPattern(numfmtValue.pattern);\n                maxDecimals = decimals2 > maxDecimals ? decimals2 : maxDecimals;\n            });\n        });\n        const decimals = maxDecimals + 1, defaultPattern = $462cf6d68dfaa0d6$var$setPatternDecimal(`0${decimals > 0 ? \".0\" : \"\"}`, decimals), values = [];\n        return selections.forEach((selection)=>{\n            (0, $83KcA.Range).foreach(selection.range, (row, col)=>{\n                const numfmtValue = numfmtService.getValue(unitId, subUnitId, row, col);\n                if (!numfmtValue) values.push({\n                    row: row,\n                    col: col,\n                    pattern: defaultPattern\n                });\n                else {\n                    const decimals2 = $462cf6d68dfaa0d6$var$getDecimalFromPattern(numfmtValue.pattern), pattern = $462cf6d68dfaa0d6$var$setPatternDecimal(numfmtValue.pattern, decimals2 + 1);\n                    pattern !== numfmtValue.pattern && values.push({\n                        row: row,\n                        col: col,\n                        pattern: pattern\n                    });\n                }\n            });\n        }), values.length ? await commandService.executeCommand($462cf6d68dfaa0d6$export$9bb98f359d6381eb.id, {\n            values: values\n        }) : !1;\n    }, \"handler\")\n}, $462cf6d68dfaa0d6$var$DATEFMTLISG = [\n    {\n        label: \"1930-08-05\",\n        suffix: \"yyyy-MM-dd\"\n    },\n    {\n        label: \"1930/08/05\",\n        suffix: \"yyyy/MM/dd\"\n    },\n    {\n        label: \"1930\\u5E7408\\u670805\\u65E5\",\n        suffix: 'yyyy\"\\u5E74\"MM\"\\u6708\"dd\"\\u65E5\"'\n    },\n    {\n        label: \"08-05\",\n        suffix: \"MM-dd\"\n    },\n    {\n        label: \"8\\u67085\\u65E5\",\n        suffix: 'M\"\\u6708\"d\"\\u65E5\"'\n    },\n    {\n        label: \"13:30:30\",\n        suffix: \"h:mm:ss\"\n    },\n    {\n        label: \"13:30\",\n        suffix: \"h:mm\"\n    },\n    {\n        label: \"\\u4E0B\\u534801:30\",\n        suffix: \"A/P hh:mm\"\n    },\n    {\n        label: \"\\u4E0B\\u53481:30\",\n        suffix: \"A/P h:mm\"\n    },\n    {\n        label: \"\\u4E0B\\u53481:30:30\",\n        suffix: \"A/P h:mm:ss\"\n    },\n    {\n        label: \"08-05 \\u4E0B\\u5348 01:30\",\n        suffix: \"MM-dd A/P hh:mm\"\n    }\n], $462cf6d68dfaa0d6$var$NUMBERFORMAT = [\n    {\n        label: \"(1,235)\",\n        suffix: \"#,##0_);(#,##0)\"\n    },\n    {\n        label: \"(1,235) \",\n        suffix: \"#,##0_);[Red](#,##0)\",\n        color: \"red\"\n    },\n    {\n        label: \"1,234.56\",\n        suffix: \"#,##0.00_);#,##0.00\"\n    },\n    {\n        label: \"1,234.56\",\n        suffix: \"#,##0.00_);[Red]#,##0.00\",\n        color: \"red\"\n    },\n    {\n        label: \"-1,234.56\",\n        suffix: \"#,##0.00_);-#,##0.00\"\n    },\n    {\n        label: \"-1,234.56\",\n        suffix: \"#,##0.00_);[Red]-#,##0.00\",\n        color: \"red\"\n    }\n], $462cf6d68dfaa0d6$var$CURRENCYFORMAT = [\n    {\n        label: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`${suffix}1,235`, \"label\"),\n        suffix: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`\"${suffix}\"#,##0.00_);\"${suffix}\"#,##0.00`, \"suffix\")\n    },\n    {\n        label: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`${suffix}1,235`, \"label\"),\n        suffix: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`\"${suffix}\"#,##0.00_);[Red]\"${suffix}\"#,##0.00`, \"suffix\"),\n        color: \"red\"\n    },\n    {\n        label: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`(${suffix}1,235)`, \"label\"),\n        suffix: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`\"${suffix}\"#,##0.00_);(\"${suffix}\"#,##0.00)`, \"suffix\")\n    },\n    {\n        label: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`(${suffix}1,235)`, \"label\"),\n        suffix: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`\"${suffix}\"#,##0.00_);[Red](\"${suffix}\"#,##0.00)`, \"suffix\"),\n        color: \"red\"\n    },\n    {\n        label: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`-${suffix}1,235`, \"label\"),\n        suffix: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`\"${suffix}\"#,##0.00_);-\"${suffix}\"#,##0.00`, \"suffix\")\n    },\n    {\n        label: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`-${suffix}1,235`, \"label\"),\n        suffix: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>`\"${suffix}\"#,##0.00_);[Red]-\"${suffix}\"#,##0.00`, \"suffix\"),\n        color: \"red\"\n    }\n], $462cf6d68dfaa0d6$var$_MenuCurrencyService = class _MenuCurrencyService {\n    constructor(){\n        $462cf6d68dfaa0d6$var$__publicField(this, \"_currencySymbol$\", new (0, $jv4BO.BehaviorSubject)(\"US\"));\n        $462cf6d68dfaa0d6$var$__publicField(this, \"currencySymbol$\", this._currencySymbol$.asObservable());\n    }\n    /**\n   * Set the currency symbol by setting the country code.\n   */ setCurrencySymbolByCountryCode(symbol) {\n        this._currencySymbol$.next(symbol);\n    }\n    getCurrencySymbol() {\n        return this._currencySymbol$.getValue();\n    }\n};\n$462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$_MenuCurrencyService, \"MenuCurrencyService\");\nlet $462cf6d68dfaa0d6$export$d9c5d227e372c7ef = $462cf6d68dfaa0d6$var$_MenuCurrencyService;\nconst $462cf6d68dfaa0d6$export$37876a5013216cfd = {\n    id: \"sheet.command.numfmt.set.currency\",\n    type: (0, $83KcA.CommandType).COMMAND,\n    handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(async (accessor)=>{\n        const commandService = accessor.get((0, $83KcA.ICommandService)), selectionManagerService = accessor.get((0, $ls2nu.SheetsSelectionsService)), menuCurrencyService = accessor.get($462cf6d68dfaa0d6$export$d9c5d227e372c7ef), symbol = $462cf6d68dfaa0d6$export$4b021f12543b53a8[menuCurrencyService.getCurrencySymbol()] || \"$\", selections = selectionManagerService.getCurrentSelections();\n        if (!selections || !selections.length) return !1;\n        const values = [], suffix = $462cf6d68dfaa0d6$var$CURRENCYFORMAT[4].suffix(symbol);\n        return selections.forEach((selection)=>{\n            (0, $83KcA.Range).foreach(selection.range, (row, col)=>{\n                values.push({\n                    row: row,\n                    col: col,\n                    pattern: suffix,\n                    type: \"currency\"\n                });\n            });\n        }), await commandService.executeCommand($462cf6d68dfaa0d6$export$9bb98f359d6381eb.id, {\n            values: values\n        });\n    }, \"handler\")\n}, $462cf6d68dfaa0d6$export$a8a59e4fa0a85a1f = {\n    id: \"sheet.command.numfmt.set.percent\",\n    type: (0, $83KcA.CommandType).COMMAND,\n    handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(async (accessor)=>{\n        const commandService = accessor.get((0, $83KcA.ICommandService)), selections = accessor.get((0, $ls2nu.SheetsSelectionsService)).getCurrentSelections();\n        if (!selections || !selections.length) return !1;\n        const values = [], suffix = \"0%\";\n        return selections.forEach((selection)=>{\n            (0, $83KcA.Range).foreach(selection.range, (row, col)=>{\n                values.push({\n                    row: row,\n                    col: col,\n                    pattern: suffix,\n                    type: \"percent\"\n                });\n            });\n        }), await commandService.executeCommand($462cf6d68dfaa0d6$export$9bb98f359d6381eb.id, {\n            values: values\n        });\n    }, \"handler\")\n}, $462cf6d68dfaa0d6$export$6b6b961cad4a506a = {\n    id: \"sheet.command.numfmt.subtract.decimal.command\",\n    type: (0, $83KcA.CommandType).COMMAND,\n    handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(async (accessor)=>{\n        const commandService = accessor.get((0, $83KcA.ICommandService)), selectionManagerService = accessor.get((0, $ls2nu.SheetsSelectionsService)), numfmtService = accessor.get((0, $ls2nu.INumfmtService)), univerInstanceService = accessor.get((0, $83KcA.IUniverInstanceService)), selections = selectionManagerService.getCurrentSelections();\n        if (!selections || !selections.length) return !1;\n        const target = (0, $ls2nu.getSheetCommandTarget)(univerInstanceService);\n        if (!target) return !1;\n        const { unitId: unitId, subUnitId: subUnitId } = target;\n        let maxDecimals = 0;\n        selections.forEach((selection)=>{\n            (0, $83KcA.Range).foreach(selection.range, (row, col)=>{\n                const numfmtValue = numfmtService.getValue(unitId, subUnitId, row, col);\n                if (!numfmtValue) {\n                    const cell = target.worksheet.getCellRaw(row, col);\n                    if (!maxDecimals && cell && cell.t === (0, $83KcA.CellValueType).NUMBER && cell.v) {\n                        const regResult = /\\.(\\d*)$/.exec(String(cell.v));\n                        if (regResult) {\n                            const length = regResult[1].length;\n                            if (!length) return;\n                            maxDecimals = Math.max(maxDecimals, length);\n                        }\n                    }\n                    return;\n                }\n                const decimals2 = $462cf6d68dfaa0d6$var$getDecimalFromPattern(numfmtValue.pattern);\n                maxDecimals = decimals2 > maxDecimals ? decimals2 : maxDecimals;\n            });\n        });\n        const decimals = maxDecimals - 1, defaultPattern = $462cf6d68dfaa0d6$var$setPatternDecimal(`0${decimals > 0 ? \".0\" : \".\"}`, decimals), values = [];\n        return selections.forEach((selection)=>{\n            (0, $83KcA.Range).foreach(selection.range, (row, col)=>{\n                const numfmtValue = numfmtService.getValue(unitId, subUnitId, row, col);\n                if (!numfmtValue) values.push({\n                    row: row,\n                    col: col,\n                    pattern: defaultPattern\n                });\n                else {\n                    const decimals2 = $462cf6d68dfaa0d6$var$getDecimalFromPattern(numfmtValue.pattern);\n                    values.push({\n                        row: row,\n                        col: col,\n                        pattern: $462cf6d68dfaa0d6$var$setPatternDecimal(numfmtValue.pattern, decimals2 - 1)\n                    });\n                }\n            });\n        }), await commandService.executeCommand($462cf6d68dfaa0d6$export$9bb98f359d6381eb.id, {\n            values: values\n        });\n    }, \"handler\")\n}, $462cf6d68dfaa0d6$export$380e6cf263e379cf = {\n    id: \"sheet.operation.close.numfmt.panel\",\n    type: (0, $83KcA.CommandType).OPERATION,\n    handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>// do nothing,just notify panel is closed\n        !0, \"handler\")\n}, $462cf6d68dfaa0d6$var$INumfmtController = (0, $83KcA.createIdentifier)(\"INumfmtController\");\n(0, $83KcA.runOnLifecycle)((0, $83KcA.LifecycleStages).Rendered, $462cf6d68dfaa0d6$var$INumfmtController);\nconst $462cf6d68dfaa0d6$export$4fe239f10749cd24 = {\n    id: \"sheet.operation.open.numfmt.panel\",\n    type: (0, $83KcA.CommandType).OPERATION,\n    handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((accessor)=>(accessor.get($462cf6d68dfaa0d6$var$INumfmtController).openPanel(), !0), \"handler\")\n}, $462cf6d68dfaa0d6$var$SHEET_NUMFMT_PLUGIN = \"SHEET_NUMFMT_PLUGIN\", $462cf6d68dfaa0d6$export$a7bdce4fa13fe691 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern)=>(0, $83KcA.numfmt).getInfo(pattern).type || \"unknown\", \"getPatternType\"), $462cf6d68dfaa0d6$export$ef6794aa6fb876dd = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern, value, _locale)=>{\n    const info = (0, $83KcA.numfmt).getInfo(pattern), locale = _locale === (0, $83KcA.LocaleType).ZH_CN ? \"zh-CN\" : \"en\", negInfo = info._partitions[1], result = (0, $83KcA.numfmt).format(pattern, value, {\n        locale: locale,\n        throws: !1\n    });\n    return value < 0 ? {\n        result: result,\n        color: negInfo.color\n    } : {\n        result: result\n    };\n}, \"getPatternPreview\");\nvar $462cf6d68dfaa0d6$var$__defProp$7 = Object.defineProperty, $462cf6d68dfaa0d6$var$__getOwnPropDesc$7 = Object.getOwnPropertyDescriptor, $462cf6d68dfaa0d6$var$__decorateClass$7 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((decorators, target, key2, kind)=>{\n    for(var result = kind > 1 ? void 0 : kind ? $462cf6d68dfaa0d6$var$__getOwnPropDesc$7(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)(decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n    return kind && result && $462cf6d68dfaa0d6$var$__defProp$7(target, key2, result), result;\n}, \"__decorateClass$7\"), $462cf6d68dfaa0d6$var$__decorateParam$7 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((index, decorator)=>(target, key2)=>decorator(target, key2, index), \"__decorateParam$7\"), $462cf6d68dfaa0d6$var$_a;\nlet $462cf6d68dfaa0d6$var$SheetsNumfmtCellContentController = ($462cf6d68dfaa0d6$var$_a = class extends (0, $83KcA.Disposable) {\n    constructor(_instanceService, _sheetInterceptorService, _themeService, _commandService, _numfmtService, _localeService){\n        super(), this._instanceService = _instanceService, this._sheetInterceptorService = _sheetInterceptorService, this._themeService = _themeService, this._commandService = _commandService, this._numfmtService = _numfmtService, this._localeService = _localeService, this._initInterceptorCellContent();\n    }\n    // eslint-disable-next-line max-lines-per-function\n    _initInterceptorCellContent() {\n        const renderCache = new (0, $83KcA.ObjectMatrix)();\n        this.disposeWithMe(this._sheetInterceptorService.intercept((0, $ls2nu.INTERCEPTOR_POINT).CELL_CONTENT, {\n            handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((cell, location, next)=>{\n                const unitId = location.unitId, sheetId = location.subUnitId;\n                let numfmtValue;\n                if (cell != null && cell.s) {\n                    const style = location.workbook.getStyles().get(cell.s);\n                    style != null && style.n && (numfmtValue = style.n);\n                }\n                if (numfmtValue || (numfmtValue = this._numfmtService.getValue(unitId, sheetId, location.row, location.col)), !numfmtValue) return next(cell);\n                const originCellValue = cell;\n                if (!originCellValue || originCellValue.t !== (0, $83KcA.CellValueType).NUMBER || originCellValue.v == null || Number.isNaN(originCellValue.v)) return next(cell);\n                let numfmtRes = \"\";\n                const cache = renderCache.getValue(location.row, location.col);\n                if (cache && cache.parameters === `${originCellValue.v}_${numfmtValue.pattern}`) return next({\n                    ...cell,\n                    ...cache.result\n                });\n                const info = $462cf6d68dfaa0d6$export$ef6794aa6fb876dd(numfmtValue.pattern, Number(originCellValue.v), this._localeService.getCurrentLocale());\n                if (numfmtRes = info.result, !numfmtRes) return next(cell);\n                const res = {\n                    v: numfmtRes\n                };\n                if (info.color) {\n                    const color = this._themeService.getCurrentTheme()[`${info.color}500`];\n                    color && (res.interceptorStyle = {\n                        cl: {\n                            rgb: color\n                        }\n                    });\n                }\n                return renderCache.setValue(location.row, location.col, {\n                    result: res,\n                    parameters: `${originCellValue.v}_${numfmtValue.pattern}`\n                }), next({\n                    ...cell,\n                    ...res\n                });\n            }, \"handler\"),\n            priority: (0, $ls2nu.InterceptCellContentPriority).NUMFMT\n        })), this.disposeWithMe(this._commandService.onCommandExecuted((commandInfo)=>{\n            if (commandInfo.id === (0, $ls2nu.SetNumfmtMutation).id) {\n                const params = commandInfo.params;\n                Object.keys(params.values).forEach((key2)=>{\n                    params.values[key2].ranges.forEach((range)=>{\n                        (0, $83KcA.Range).foreach(range, (row, col)=>{\n                            renderCache.realDeleteValue(row, col);\n                        });\n                    });\n                });\n            } else if (commandInfo.id === (0, $ls2nu.SetRangeValuesMutation).id) {\n                const params = commandInfo.params;\n                new (0, $83KcA.ObjectMatrix)(params.cellValue).forValue((row, col)=>{\n                    renderCache.realDeleteValue(row, col);\n                });\n            }\n        })), this.disposeWithMe(this._instanceService.getCurrentTypeOfUnit$((0, $83KcA.UniverInstanceType).UNIVER_SHEET).pipe((0, $bTGUS.switchMap)((workbook)=>{\n            var _a9;\n            return (_a9 = workbook == null ? void 0 : workbook.activeSheet$) != null ? _a9 : (0, $bA4Xh.of)(null);\n        }), (0, $9kWt8.skip)(1)).subscribe(()=>renderCache.reset()));\n    }\n}, $462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$_a, \"SheetsNumfmtCellContentController\"), $462cf6d68dfaa0d6$var$_a);\n$462cf6d68dfaa0d6$var$SheetsNumfmtCellContentController = $462cf6d68dfaa0d6$var$__decorateClass$7([\n    (0, $83KcA.OnLifecycle)((0, $83KcA.LifecycleStages).Rendered, $462cf6d68dfaa0d6$var$SheetsNumfmtCellContentController),\n    $462cf6d68dfaa0d6$var$__decorateParam$7(0, (0, $83KcA.IUniverInstanceService)),\n    $462cf6d68dfaa0d6$var$__decorateParam$7(1, (0, $83KcA.Inject)((0, $ls2nu.SheetInterceptorService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$7(2, (0, $83KcA.Inject)((0, $83KcA.ThemeService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$7(3, (0, $83KcA.Inject)((0, $83KcA.ICommandService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$7(4, (0, $83KcA.Inject)((0, $ls2nu.INumfmtService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$7(5, (0, $83KcA.Inject)((0, $83KcA.LocaleService)))\n], $462cf6d68dfaa0d6$var$SheetsNumfmtCellContentController);\nvar $462cf6d68dfaa0d6$var$jsxRuntime = {\n    exports: {}\n}, $462cf6d68dfaa0d6$var$reactJsxRuntime_production_min = {};\n/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */ var $462cf6d68dfaa0d6$var$f = (0, (/*@__PURE__*/$parcel$interopDefault($gQuIR))), $462cf6d68dfaa0d6$var$k = Symbol.for(\"react.element\"), $462cf6d68dfaa0d6$var$l = Symbol.for(\"react.fragment\"), $462cf6d68dfaa0d6$var$m = Object.prototype.hasOwnProperty, $462cf6d68dfaa0d6$var$n = $462cf6d68dfaa0d6$var$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, $462cf6d68dfaa0d6$var$p = {\n    key: !0,\n    ref: !0,\n    __self: !0,\n    __source: !0\n};\nfunction $462cf6d68dfaa0d6$var$q(c, a, g) {\n    var b, d = {}, e = null, h = null;\n    g !== void 0 && (e = \"\" + g), a.key !== void 0 && (e = \"\" + a.key), a.ref !== void 0 && (h = a.ref);\n    for(b in a)$462cf6d68dfaa0d6$var$m.call(a, b) && !$462cf6d68dfaa0d6$var$p.hasOwnProperty(b) && (d[b] = a[b]);\n    if (c && c.defaultProps) for(b in a = c.defaultProps, a)d[b] === void 0 && (d[b] = a[b]);\n    return {\n        $$typeof: $462cf6d68dfaa0d6$var$k,\n        type: c,\n        key: e,\n        ref: h,\n        props: d,\n        _owner: $462cf6d68dfaa0d6$var$n.current\n    };\n}\n$462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$q, \"q\");\n$462cf6d68dfaa0d6$var$reactJsxRuntime_production_min.Fragment = $462cf6d68dfaa0d6$var$l;\n$462cf6d68dfaa0d6$var$reactJsxRuntime_production_min.jsx = $462cf6d68dfaa0d6$var$q;\n$462cf6d68dfaa0d6$var$reactJsxRuntime_production_min.jsxs = $462cf6d68dfaa0d6$var$q;\n$462cf6d68dfaa0d6$var$jsxRuntime.exports = $462cf6d68dfaa0d6$var$reactJsxRuntime_production_min;\nvar $462cf6d68dfaa0d6$var$jsxRuntimeExports = $462cf6d68dfaa0d6$var$jsxRuntime.exports;\nconst $462cf6d68dfaa0d6$var$UserHabitCurrencyContext = (0, $gQuIR.createContext)([]);\nvar $462cf6d68dfaa0d6$var$__defProp$6 = Object.defineProperty, $462cf6d68dfaa0d6$var$__getOwnPropDesc$6 = Object.getOwnPropertyDescriptor, $462cf6d68dfaa0d6$var$__decorateClass$6 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((decorators, target, key2, kind)=>{\n    for(var result = kind > 1 ? void 0 : kind ? $462cf6d68dfaa0d6$var$__getOwnPropDesc$6(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)(decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n    return kind && result && $462cf6d68dfaa0d6$var$__defProp$6(target, key2, result), result;\n}, \"__decorateClass$6\"), $462cf6d68dfaa0d6$var$__decorateParam$6 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((index, decorator)=>(target, key2)=>decorator(target, key2, index), \"__decorateParam$6\"), $462cf6d68dfaa0d6$var$_a2;\nlet $462cf6d68dfaa0d6$var$UserHabitController = ($462cf6d68dfaa0d6$var$_a2 = class {\n    constructor(_localStorageService){\n        this._localStorageService = _localStorageService;\n    }\n    _getKey(habit) {\n        return `userHabitController_${habit}`;\n    }\n    async addHabit(habit, initValue) {\n        const key2 = this._getKey(habit);\n        return this._localStorageService.getItem(key2).then((item)=>{\n            item || this._localStorageService.setItem(key2, initValue);\n        });\n    }\n    markHabit(habit, value) {\n        const key2 = this._getKey(habit);\n        this._localStorageService.getItem(key2).then((list)=>{\n            if (list) {\n                const index = list.findIndex((item)=>item === value);\n                index > -1 && list.splice(index, 1), list.unshift(value), this._localStorageService.setItem(key2, list);\n            }\n        });\n    }\n    async getHabit(habit, sortList) {\n        const key2 = this._getKey(habit), result = await this._localStorageService.getItem(key2);\n        if (sortList && result) {\n            const priority = result.map((item, index, arr)=>{\n                const length = arr.length;\n                return {\n                    value: item,\n                    priority: length - index\n                };\n            });\n            return sortList.sort((a, b)=>{\n                var _a9, _b;\n                const ap = ((_a9 = priority.find((item)=>item.value === a)) == null ? void 0 : _a9.priority) || -1;\n                return (((_b = priority.find((item)=>item.value === b)) == null ? void 0 : _b.priority) || -1) - ap;\n            });\n        }\n        return result || [];\n    }\n    deleteHabit(habit) {\n        this._localStorageService.removeItem(habit);\n    }\n}, $462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$_a2, \"UserHabitController\"), $462cf6d68dfaa0d6$var$_a2);\n$462cf6d68dfaa0d6$var$UserHabitController = $462cf6d68dfaa0d6$var$__decorateClass$6([\n    $462cf6d68dfaa0d6$var$__decorateParam$6(0, (0, $83KcA.Inject)((0, $83KcA.ILocalStorageService)))\n], $462cf6d68dfaa0d6$var$UserHabitController);\nconst $462cf6d68dfaa0d6$var$key$1 = \"numfmtCurrency\", $462cf6d68dfaa0d6$var$useCurrencyOptions = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((onOptionChange)=>{\n    const userHabitController = (0, $83KcA.useDependency)($462cf6d68dfaa0d6$var$UserHabitController), [options, optionsSet] = (0, $gQuIR.useState)($462cf6d68dfaa0d6$var$currencySymbols);\n    return (0, $gQuIR.useEffect)(()=>{\n        userHabitController.addHabit(\"numfmtCurrency\", []).then(()=>{\n            userHabitController.getHabit($462cf6d68dfaa0d6$var$key$1, [\n                ...$462cf6d68dfaa0d6$var$currencySymbols\n            ]).then((list)=>{\n                optionsSet(list), onOptionChange && onOptionChange(list);\n            });\n        });\n    }, []), {\n        userHabitCurrency: options,\n        mark: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((v)=>{\n            userHabitController.markHabit($462cf6d68dfaa0d6$var$key$1, v);\n        }, \"mark\")\n    };\n}, \"useCurrencyOptions\"), $462cf6d68dfaa0d6$var$useNextTick = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n    const effectList = (0, $gQuIR.useRef)([]), [value, dispatch] = (0, $gQuIR.useState)({});\n    return (0, $gQuIR.useEffect)(()=>{\n        effectList.current.forEach((fn)=>{\n            fn();\n        }), effectList.current = [];\n    }, [\n        value\n    ]), /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((fn)=>{\n        effectList.current.push(fn), dispatch({});\n    }, \"nextTick\");\n}, \"useNextTick\"), $462cf6d68dfaa0d6$var$getCurrencyType = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern)=>$462cf6d68dfaa0d6$var$currencySymbols.find((code)=>pattern.includes(code)), \"getCurrencyType\"), $462cf6d68dfaa0d6$var$isAccountingPanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern)=>!!$462cf6d68dfaa0d6$var$getCurrencyType(pattern) && pattern.startsWith(\"_(\"), \"isAccountingPanel\"), $462cf6d68dfaa0d6$var$AccountingPanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((props)=>{\n    const [decimal, decimalSet] = (0, $gQuIR.useState)(()=>$462cf6d68dfaa0d6$var$getDecimalFromPattern(props.defaultPattern || \"\", 2)), userHabitCurrency = (0, $gQuIR.useContext)($462cf6d68dfaa0d6$var$UserHabitCurrencyContext), [suffix, suffixSet] = (0, $gQuIR.useState)(()=>$462cf6d68dfaa0d6$var$getCurrencyType(props.defaultPattern) || userHabitCurrency[0]), options = (0, $gQuIR.useMemo)(()=>userHabitCurrency.map((key2)=>({\n                label: key2,\n                value: key2\n            })), []), t = (0, $83KcA.useDependency)((0, $83KcA.LocaleService)).t;\n    props.action.current = ()=>$462cf6d68dfaa0d6$var$setPatternDecimal(`_(\"${suffix}\"* #,##0${decimal > 0 ? \".0\" : \"\"}_)`, decimal);\n    const onSelect = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((v)=>{\n        suffixSet(v), props.onChange($462cf6d68dfaa0d6$var$setPatternDecimal(`_(\"${v}\"* #,##0${decimal > 0 ? \".0\" : \"\"}_)`, decimal));\n    }, \"onSelect\"), onDecimalChange = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((v)=>{\n        const decimal2 = v || 0;\n        decimalSet(decimal2), props.onChange($462cf6d68dfaa0d6$var$setPatternDecimal(`_(\"${suffix}\"* #,##0${decimal2 > 0 ? \".0\" : \"\"}_)`, decimal2));\n    }, \"onDecimalChange\");\n    return /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n        children: [\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                className: \"m-t-16 options \",\n                children: [\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                        className: \"option\",\n                        children: [\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                className: \"label\",\n                                children: t(\"sheet.numfmt.decimalLength\")\n                            }),\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                className: \"m-t-8 w-120\",\n                                children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.InputNumber), {\n                                    value: decimal,\n                                    max: 20,\n                                    min: 0,\n                                    onChange: onDecimalChange\n                                })\n                            })\n                        ]\n                    }),\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                        className: \"option\",\n                        children: [\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                className: \"label\",\n                                children: t(\"sheet.numfmt.currencyType\")\n                            }),\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                className: \"m-t-8 w-140\",\n                                children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.Select), {\n                                    onChange: onSelect,\n                                    options: options,\n                                    value: suffix\n                                })\n                            })\n                        ]\n                    })\n                ]\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"describe m-t-14\",\n                children: t(\"sheet.numfmt.accountingDes\")\n            })\n        ]\n    });\n}, \"AccountingPanel\"), $462cf6d68dfaa0d6$var$getCurrencyFormatOptions = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((suffix)=>$462cf6d68dfaa0d6$var$CURRENCYFORMAT.map((item)=>({\n            label: item.label(suffix),\n            value: item.suffix(suffix),\n            color: item.color\n        })), \"getCurrencyFormatOptions\"), $462cf6d68dfaa0d6$var$getDateFormatOptions = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>$462cf6d68dfaa0d6$var$DATEFMTLISG.map((item)=>({\n            label: item.label,\n            value: item.suffix\n        })), \"getDateFormatOptions\"), $462cf6d68dfaa0d6$var$getNumberFormatOptions = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>$462cf6d68dfaa0d6$var$NUMBERFORMAT.map((item)=>({\n            label: item.label,\n            value: item.suffix,\n            color: item.color\n        })), \"getNumberFormatOptions\"), $462cf6d68dfaa0d6$var$isCurrencyPanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern)=>!!$462cf6d68dfaa0d6$var$getCurrencyType(pattern) && !pattern.startsWith(\"_(\"), \"isCurrencyPanel\"), $462cf6d68dfaa0d6$var$CurrencyPanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((props)=>{\n    const t = (0, $83KcA.useDependency)((0, $83KcA.LocaleService)).t, userHabitCurrency = (0, $gQuIR.useContext)($462cf6d68dfaa0d6$var$UserHabitCurrencyContext), [suffix, suffixSet] = (0, $gQuIR.useState)(()=>$462cf6d68dfaa0d6$var$getCurrencyType(props.defaultPattern) || userHabitCurrency[0]), [decimal, decimalSet] = (0, $gQuIR.useState)(()=>$462cf6d68dfaa0d6$var$getDecimalFromPattern(props.defaultPattern || \"\", 2)), [pattern, patternSet] = (0, $gQuIR.useState)(()=>{\n        var _a9;\n        const negativeOptions2 = $462cf6d68dfaa0d6$var$getCurrencyFormatOptions(suffix);\n        return ((_a9 = negativeOptions2.find((item)=>$462cf6d68dfaa0d6$var$isPatternEqualWithoutDecimal(item.value, props.defaultPattern))) == null ? void 0 : _a9.value) || negativeOptions2[0].value;\n    }), negativeOptions = (0, $gQuIR.useMemo)(()=>$462cf6d68dfaa0d6$var$getCurrencyFormatOptions(suffix), [\n        suffix\n    ]), options = (0, $gQuIR.useMemo)(()=>userHabitCurrency.map((key2)=>({\n                label: key2,\n                value: key2\n            })), [\n        userHabitCurrency\n    ]);\n    props.action.current = ()=>$462cf6d68dfaa0d6$var$setPatternDecimal(pattern, decimal);\n    const onSelect = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((value)=>{\n        if (value === void 0) return;\n        suffixSet(value);\n        const pattern2 = $462cf6d68dfaa0d6$var$getCurrencyFormatOptions(value)[0].value;\n        patternSet(pattern2), props.onChange($462cf6d68dfaa0d6$var$setPatternDecimal(pattern2, decimal));\n    }, \"onSelect\"), onChange = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((value)=>{\n        value !== void 0 && (patternSet(value), props.onChange($462cf6d68dfaa0d6$var$setPatternDecimal(value, decimal)));\n    }, \"onChange\"), onDecimalChange = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((v)=>{\n        decimalSet(v || 0), props.onChange($462cf6d68dfaa0d6$var$setPatternDecimal(pattern, v || 0));\n    }, \"onDecimalChange\");\n    return /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n        children: [\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                className: \"m-t-16 options \",\n                children: [\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                        className: \"option\",\n                        children: [\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                className: \"label\",\n                                children: t(\"sheet.numfmt.decimalLength\")\n                            }),\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                className: \"m-t-8 w-120\",\n                                children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.InputNumber), {\n                                    value: decimal,\n                                    max: 20,\n                                    min: 0,\n                                    onChange: onDecimalChange\n                                })\n                            })\n                        ]\n                    }),\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                        className: \"option\",\n                        children: [\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                className: \"label\",\n                                children: t(\"sheet.numfmt.currencyType\")\n                            }),\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                className: \"m-t-8 w-140\",\n                                children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.Select), {\n                                    onChange: onSelect,\n                                    options: options,\n                                    value: suffix\n                                })\n                            })\n                        ]\n                    })\n                ]\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"m-t-16 label\",\n                children: t(\"sheet.numfmt.negType\")\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"m-t-8\",\n                children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.SelectList), {\n                    onChange: onChange,\n                    options: negativeOptions,\n                    value: pattern\n                })\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"describe m-t-14\",\n                children: t(\"sheet.numfmt.currencyDes\")\n            })\n        ]\n    });\n}, \"CurrencyPanel\"), $462cf6d68dfaa0d6$var$isDatePanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern)=>{\n    const info = (0, $83KcA.numfmt).getInfo(pattern);\n    return $462cf6d68dfaa0d6$var$getDateFormatOptions().map((item)=>item.value).includes(pattern) || [\n        \"date\",\n        \"datetime\",\n        \"time\"\n    ].includes(info.type);\n}, \"isDatePanel\"), $462cf6d68dfaa0d6$var$DatePanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((props)=>{\n    const options = (0, $gQuIR.useMemo)($462cf6d68dfaa0d6$var$getDateFormatOptions, []), t = (0, $83KcA.useDependency)((0, $83KcA.LocaleService)).t, [suffix, suffixSet] = (0, $gQuIR.useState)(()=>{\n        if (props.defaultPattern) {\n            const item = options.find((item2)=>item2.value === props.defaultPattern);\n            if (item) return item.value;\n        }\n        return options[0].value;\n    });\n    props.action.current = ()=>suffix;\n    const onChange = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((v)=>{\n        v !== void 0 && (suffixSet(v), props.onChange(v));\n    }, \"onChange\");\n    return /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n        children: [\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"m-t-16 label\",\n                children: t(\"sheet.numfmt.dateType\")\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"m-t-8\",\n                children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.SelectList), {\n                    value: suffix,\n                    options: options,\n                    onChange: onChange\n                })\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"describe m-t-14\",\n                children: t(\"sheet.numfmt.dateDes\")\n            })\n        ]\n    });\n}, \"DatePanel\"), $462cf6d68dfaa0d6$var$isGeneralPanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern)=>!pattern, \"isGeneralPanel\"), $462cf6d68dfaa0d6$var$GeneralPanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((props)=>{\n    const t = (0, $83KcA.useDependency)((0, $83KcA.LocaleService)).t;\n    return props.action.current = ()=>\"\", /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n        children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n            className: \"describe m-t-14\",\n            children: t(\"sheet.numfmt.generalDes\")\n        })\n    });\n}, \"GeneralPanel\"), $462cf6d68dfaa0d6$var$isThousandthPercentilePanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern)=>$462cf6d68dfaa0d6$var$getNumberFormatOptions().some((item)=>$462cf6d68dfaa0d6$var$isPatternEqualWithoutDecimal(item.value, pattern)), \"isThousandthPercentilePanel\"), $462cf6d68dfaa0d6$var$ThousandthPercentilePanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((props)=>{\n    const localeService = (0, $83KcA.useDependency)((0, $83KcA.LocaleService)), options = (0, $gQuIR.useMemo)($462cf6d68dfaa0d6$var$getNumberFormatOptions, []), [decimal, decimalSet] = (0, $gQuIR.useState)(()=>$462cf6d68dfaa0d6$var$getDecimalFromPattern(props.defaultPattern || \"\", 0)), [suffix, suffixSet] = (0, $gQuIR.useState)(()=>{\n        const item = options.find((item2)=>$462cf6d68dfaa0d6$var$isPatternEqualWithoutDecimal(item2.value, props.defaultPattern || \"\"));\n        return (item == null ? void 0 : item.value) || options[0].value;\n    }), pattern = (0, $gQuIR.useMemo)(()=>$462cf6d68dfaa0d6$var$setPatternDecimal(suffix, Number(decimal || 0)), [\n        suffix,\n        decimal\n    ]), isInputDisable = (0, $gQuIR.useMemo)(()=>!$462cf6d68dfaa0d6$var$isPatternHasDecimal(suffix), [\n        suffix\n    ]), handleDecimalChange = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((decimal2)=>{\n        decimalSet(decimal2 || 0), props.onChange($462cf6d68dfaa0d6$var$setPatternDecimal(suffix, Number(decimal2 || 0)));\n    }, \"handleDecimalChange\"), handleClick = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((v)=>{\n        v !== void 0 && (decimalSet($462cf6d68dfaa0d6$var$getDecimalFromPattern(v, 0)), suffixSet(v), props.onChange(v));\n    }, \"handleClick\");\n    return props.action.current = ()=>pattern, /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n        children: [\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"m-t-16 label\",\n                children: localeService.t(\"sheet.numfmt.decimalLength\")\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"m-t-8\",\n                children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.InputNumber), {\n                    disabled: isInputDisable,\n                    value: decimal,\n                    max: 20,\n                    min: 0,\n                    onChange: handleDecimalChange\n                })\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                className: \"m-t-16 label\",\n                children: [\n                    \" \",\n                    localeService.t(\"sheet.numfmt.negType\")\n                ]\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"m-t-8\",\n                children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.SelectList), {\n                    onChange: handleClick,\n                    options: options,\n                    value: suffix\n                })\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"describe m-t-14\",\n                children: localeService.t(\"sheet.numfmt.thousandthPercentileDes\")\n            })\n        ]\n    });\n}, \"ThousandthPercentilePanel\");\nvar $462cf6d68dfaa0d6$var$__assign = function() {\n    return $462cf6d68dfaa0d6$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n2 = arguments.length; i < n2; i++){\n            s = arguments[i];\n            for(var p2 in s)Object.prototype.hasOwnProperty.call(s, p2) && (t[p2] = s[p2]);\n        }\n        return t;\n    }, $462cf6d68dfaa0d6$var$__assign.apply(this, arguments);\n}, $462cf6d68dfaa0d6$var$__rest = function(s, e) {\n    var t = {};\n    for(var p2 in s)Object.prototype.hasOwnProperty.call(s, p2) && e.indexOf(p2) < 0 && (t[p2] = s[p2]);\n    if (s != null && typeof Object.getOwnPropertySymbols == \"function\") for(var i = 0, p2 = Object.getOwnPropertySymbols(s); i < p2.length; i++)e.indexOf(p2[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p2[i]) && (t[p2[i]] = s[p2[i]]);\n    return t;\n}, $462cf6d68dfaa0d6$var$IconBase = (0, $gQuIR.forwardRef)(function(props, ref) {\n    var icon = props.icon, id = props.id, className = props.className, extend = props.extend, restProps = $462cf6d68dfaa0d6$var$__rest(props, [\n        \"icon\",\n        \"id\",\n        \"className\",\n        \"extend\"\n    ]), cls = \"univerjs-icon univerjs-icon-\".concat(id, \" \").concat(className || \"\").trim(), idSuffix = (0, $gQuIR.useRef)(\"_\".concat($462cf6d68dfaa0d6$var$generateShortUuid()));\n    return $462cf6d68dfaa0d6$var$render(icon, \"\".concat(id), {\n        defIds: icon.defIds,\n        idSuffix: idSuffix.current\n    }, $462cf6d68dfaa0d6$var$__assign({\n        ref: ref,\n        className: cls\n    }, restProps), extend);\n});\nfunction $462cf6d68dfaa0d6$var$render(node, id, runtimeProps, rootProps, extend) {\n    return (0, $gQuIR.createElement)(node.tag, $462cf6d68dfaa0d6$var$__assign($462cf6d68dfaa0d6$var$__assign({\n        key: id\n    }, $462cf6d68dfaa0d6$var$replaceRuntimeIdsAndExtInAttrs(node, runtimeProps, extend)), rootProps), ($462cf6d68dfaa0d6$var$replaceRuntimeIdsInDefs(node, runtimeProps).children || []).map(function(child, index) {\n        return $462cf6d68dfaa0d6$var$render(child, \"\".concat(id, \"-\").concat(node.tag, \"-\").concat(index), runtimeProps, void 0, extend);\n    }));\n}\n$462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$render, \"render\");\nfunction $462cf6d68dfaa0d6$var$replaceRuntimeIdsAndExtInAttrs(node, runtimeProps, extend) {\n    var attrs = $462cf6d68dfaa0d6$var$__assign({}, node.attrs);\n    extend != null && extend.colorChannel1 && attrs.fill === \"colorChannel1\" && (attrs.fill = extend.colorChannel1);\n    var defIds = runtimeProps.defIds;\n    return !defIds || defIds.length === 0 || (node.tag === \"use\" && attrs[\"xlink:href\"] && (attrs[\"xlink:href\"] = attrs[\"xlink:href\"] + runtimeProps.idSuffix), Object.entries(attrs).forEach(function(_a9) {\n        var key2 = _a9[0], value = _a9[1];\n        typeof value == \"string\" && (attrs[key2] = value.replace(/url\\(#(.*)\\)/, \"url(#$1\".concat(runtimeProps.idSuffix, \")\")));\n    })), attrs;\n}\n$462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$replaceRuntimeIdsAndExtInAttrs, \"replaceRuntimeIdsAndExtInAttrs\");\nfunction $462cf6d68dfaa0d6$var$replaceRuntimeIdsInDefs(node, runtimeProps) {\n    var _a9, defIds = runtimeProps.defIds;\n    return !defIds || defIds.length === 0 ? node : node.tag === \"defs\" && !((_a9 = node.children) === null || _a9 === void 0) && _a9.length ? $462cf6d68dfaa0d6$var$__assign($462cf6d68dfaa0d6$var$__assign({}, node), {\n        children: node.children.map(function(child) {\n            return typeof child.attrs.id == \"string\" && defIds && defIds.indexOf(child.attrs.id) > -1 ? $462cf6d68dfaa0d6$var$__assign($462cf6d68dfaa0d6$var$__assign({}, child), {\n                attrs: $462cf6d68dfaa0d6$var$__assign($462cf6d68dfaa0d6$var$__assign({}, child.attrs), {\n                    id: child.attrs.id + runtimeProps.idSuffix\n                })\n            }) : child;\n        })\n    }) : node;\n}\n$462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$replaceRuntimeIdsInDefs, \"replaceRuntimeIdsInDefs\");\nfunction $462cf6d68dfaa0d6$var$generateShortUuid() {\n    return Math.random().toString(36).substring(2, 8);\n}\n$462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$generateShortUuid, \"generateShortUuid\");\n$462cf6d68dfaa0d6$var$IconBase.displayName = \"UniverIcon\";\nvar $462cf6d68dfaa0d6$var$element = {\n    tag: \"svg\",\n    attrs: {\n        fill: \"none\",\n        viewBox: \"0 0 16 16\",\n        width: \"1em\",\n        height: \"1em\"\n    },\n    children: [\n        {\n            tag: \"path\",\n            attrs: {\n                fill: \"currentColor\",\n                d: \"M14.1544 3.75557C14.3887 3.98988 14.3887 4.36978 14.1544 4.6041L6.51409 12.2444C6.40157 12.3569 6.24896 12.4201 6.08983 12.4201C5.9307 12.4201 5.77808 12.3569 5.66556 12.2444L1.84541 8.42425C1.6111 8.18993 1.6111 7.81003 1.84541 7.57572C2.07973 7.34141 2.45963 7.34141 2.69394 7.57572L6.08983 10.9716L13.3059 3.75557C13.5402 3.52126 13.9201 3.52126 14.1544 3.75557Z\",\n                fillRule: \"evenodd\",\n                clipRule: \"evenodd\"\n            }\n        }\n    ]\n}, $462cf6d68dfaa0d6$var$CheckMarkSingle = (0, $gQuIR.forwardRef)(function(props, ref) {\n    return (0, $gQuIR.createElement)($462cf6d68dfaa0d6$var$IconBase, Object.assign({}, props, {\n        id: \"check-mark-single\",\n        ref: ref,\n        icon: $462cf6d68dfaa0d6$var$element\n    }));\n});\n$462cf6d68dfaa0d6$var$CheckMarkSingle.displayName = \"CheckMarkSingle\";\nconst $462cf6d68dfaa0d6$var$customFormatTitle = \"univer-custom-format-title\", $462cf6d68dfaa0d6$var$customFormatInput = \"univer-custom-format-input\", $462cf6d68dfaa0d6$var$customFormatHistoryList = \"univer-custom-format-history-list\", $462cf6d68dfaa0d6$var$customFormatHistoryListItem = \"univer-custom-format-history-list-item\", $462cf6d68dfaa0d6$var$customFormatHistoryListItemIconWrap = \"univer-custom-format-history-list-item-icon-wrap\", $462cf6d68dfaa0d6$var$customFormatDes = \"univer-custom-format-des\", $462cf6d68dfaa0d6$var$styles = {\n    customFormatTitle: $462cf6d68dfaa0d6$var$customFormatTitle,\n    customFormatInput: $462cf6d68dfaa0d6$var$customFormatInput,\n    customFormatHistoryList: $462cf6d68dfaa0d6$var$customFormatHistoryList,\n    customFormatHistoryListItem: $462cf6d68dfaa0d6$var$customFormatHistoryListItem,\n    customFormatHistoryListItemIconWrap: $462cf6d68dfaa0d6$var$customFormatHistoryListItemIconWrap,\n    customFormatDes: $462cf6d68dfaa0d6$var$customFormatDes\n}, $462cf6d68dfaa0d6$var$key = \"customFormat\", $462cf6d68dfaa0d6$var$historyPatternKey = \"numfmt_custom_pattern\";\nfunction $462cf6d68dfaa0d6$var$CustomFormat(props) {\n    const { defaultPattern: defaultPattern, action: action, onChange: onChange } = props, userHabitController = (0, $83KcA.useDependency)($462cf6d68dfaa0d6$var$UserHabitController), localStorageService = (0, $83KcA.useDependency)((0, $83KcA.ILocalStorageService)), localeService = (0, $83KcA.useDependency)((0, $83KcA.LocaleService)), [pattern, patternSet] = (0, $gQuIR.useState)(defaultPattern);\n    action.current = ()=>(userHabitController.markHabit($462cf6d68dfaa0d6$var$key, pattern), localStorageService.getItem($462cf6d68dfaa0d6$var$historyPatternKey).then((list = [])=>{\n            const _list = [\n                .../* @__PURE__ */ new Set([\n                    pattern,\n                    ...list || []\n                ])\n            ].splice(0, 10).filter((e)=>!!e);\n            localStorageService.setItem($462cf6d68dfaa0d6$var$historyPatternKey, _list);\n        }), pattern);\n    const [options, optionsSet] = (0, $gQuIR.useState)([]);\n    (0, $gQuIR.useEffect)(()=>{\n        localStorageService.getItem($462cf6d68dfaa0d6$var$historyPatternKey).then((historyList)=>{\n            const list = [\n                ...$462cf6d68dfaa0d6$var$CURRENCYFORMAT.map((item)=>item.suffix(\"$\")),\n                ...$462cf6d68dfaa0d6$var$DATEFMTLISG.map((item)=>item.suffix),\n                ...$462cf6d68dfaa0d6$var$NUMBERFORMAT.map((item)=>item.suffix)\n            ];\n            list.push(...historyList || []), userHabitController.addHabit($462cf6d68dfaa0d6$var$key, []).finally(()=>{\n                userHabitController.getHabit($462cf6d68dfaa0d6$var$key, list).then((list2)=>{\n                    optionsSet([\n                        ...new Set(list2)\n                    ]);\n                });\n            });\n        });\n    }, []);\n    const handleClick = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((p2)=>{\n        patternSet(p2), onChange(p2);\n    }, \"handleClick\"), handleBlur = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n        onChange(pattern);\n    }, \"handleBlur\");\n    return /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n        className: $462cf6d68dfaa0d6$var$styles.customFormat,\n        children: [\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: $462cf6d68dfaa0d6$var$styles.customFormatTitle,\n                children: localeService.t(\"sheet.numfmt.customFormat\")\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.Input), {\n                placeholder: localeService.t(\"sheet.numfmt.customFormat\"),\n                onBlur: handleBlur,\n                value: pattern,\n                onChange: patternSet,\n                className: $462cf6d68dfaa0d6$var$styles.customFormatInput\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: $462cf6d68dfaa0d6$var$styles.customFormatHistoryList,\n                children: options.map((p2)=>/* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                        onClick: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>handleClick(p2), \"onClick\"),\n                        className: $462cf6d68dfaa0d6$var$styles.customFormatHistoryListItem,\n                        children: [\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                className: $462cf6d68dfaa0d6$var$styles.customFormatHistoryListItemIconWrap,\n                                children: pattern === p2 && /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx($462cf6d68dfaa0d6$var$CheckMarkSingle, {})\n                            }),\n                            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                                children: p2\n                            })\n                        ]\n                    }, p2))\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: $462cf6d68dfaa0d6$var$styles.customFormatDes,\n                children: localeService.t(\"sheet.numfmt.customFormatDes\")\n            })\n        ]\n    });\n}\n$462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$CustomFormat, \"CustomFormat\");\nconst $462cf6d68dfaa0d6$var$SheetNumfmtPanel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((props)=>{\n    const { defaultValue: defaultValue, defaultPattern: defaultPattern, row: row, col: col } = props.value, localeService = (0, $83KcA.useDependency)((0, $83KcA.LocaleService)), getCurrentPattern = (0, $gQuIR.useRef)(()=>\"\"), t = localeService.t, nextTick = $462cf6d68dfaa0d6$var$useNextTick(), typeOptions = (0, $gQuIR.useMemo)(()=>[\n            {\n                label: \"sheet.numfmt.general\",\n                component: $462cf6d68dfaa0d6$var$GeneralPanel\n            },\n            {\n                label: \"sheet.numfmt.accounting\",\n                component: $462cf6d68dfaa0d6$var$AccountingPanel\n            },\n            {\n                label: \"sheet.numfmt.currency\",\n                component: $462cf6d68dfaa0d6$var$CurrencyPanel\n            },\n            {\n                label: \"sheet.numfmt.date\",\n                component: $462cf6d68dfaa0d6$var$DatePanel\n            },\n            {\n                label: \"sheet.numfmt.thousandthPercentile\",\n                component: $462cf6d68dfaa0d6$var$ThousandthPercentilePanel\n            },\n            {\n                label: \"sheet.numfmt.customFormat\",\n                component: $462cf6d68dfaa0d6$var$CustomFormat\n            }\n        ].map((item)=>({\n                ...item,\n                label: t(item.label)\n            })), []), [type, typeSet] = (0, $gQuIR.useState)(findDefaultType), [key2, keySet] = (0, $gQuIR.useState)(()=>`${row}_${col}`), { mark: mark, userHabitCurrency: userHabitCurrency } = $462cf6d68dfaa0d6$var$useCurrencyOptions(()=>keySet(`${row}_${col}_userCurrency'`)), BusinessComponent = (0, $gQuIR.useMemo)(()=>{\n        var _a9;\n        return (_a9 = typeOptions.find((item)=>item.label === type)) == null ? void 0 : _a9.component;\n    }, [\n        type\n    ]);\n    function findDefaultType() {\n        return [\n            $462cf6d68dfaa0d6$var$isGeneralPanel,\n            $462cf6d68dfaa0d6$var$isAccountingPanel,\n            $462cf6d68dfaa0d6$var$isCurrencyPanel,\n            $462cf6d68dfaa0d6$var$isDatePanel,\n            $462cf6d68dfaa0d6$var$isThousandthPercentilePanel\n        ].reduce((pre, curFn, index)=>pre || (curFn(defaultPattern) ? typeOptions[index].label : \"\"), \"\") || typeOptions[0].label;\n    }\n    $462cf6d68dfaa0d6$var$__name(findDefaultType, \"findDefaultType\");\n    const selectOptions = typeOptions.map((option)=>({\n            label: option.label,\n            value: option.label\n        })), handleSelect = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((value)=>{\n        typeSet(value), nextTick(()=>props.onChange({\n                type: \"change\",\n                value: getCurrentPattern.current() || \"\"\n            }));\n    }, \"handleSelect\"), handleChange = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((v)=>{\n        props.onChange({\n            type: \"change\",\n            value: v\n        });\n    }, \"handleChange\"), handleConfirm = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n        const pattern = getCurrentPattern.current() || \"\", currency = $462cf6d68dfaa0d6$var$getCurrencyType(pattern);\n        currency && mark(currency), props.onChange({\n            type: \"confirm\",\n            value: pattern\n        });\n    }, \"handleConfirm\"), handleCancel = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n        props.onChange({\n            type: \"cancel\",\n            value: \"\"\n        });\n    }, \"handleCancel\"), subProps = {\n        onChange: handleChange,\n        defaultValue: defaultValue,\n        defaultPattern: defaultPattern,\n        action: getCurrentPattern\n    };\n    return (0, $gQuIR.useEffect)(()=>{\n        typeSet(findDefaultType()), keySet(`${row}_${col}`);\n    }, [\n        row,\n        col\n    ]), /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n        className: \"numfmt-panel p-b-20\",\n        children: [\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                children: [\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                        className: \"label m-t-14\",\n                        children: t(\"sheet.numfmt.numfmtType\")\n                    }),\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                        className: \"m-t-8\",\n                        children: /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.Select), {\n                            onChange: handleSelect,\n                            options: selectOptions,\n                            value: type,\n                            style: {\n                                width: \"100%\"\n                            }\n                        })\n                    }),\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                        children: BusinessComponent && /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx($462cf6d68dfaa0d6$var$UserHabitCurrencyContext.Provider, {\n                            value: userHabitCurrency,\n                            children: /* @__PURE__ */ (0, $gQuIR.createElement)(BusinessComponent, {\n                                ...subProps,\n                                key: key2\n                            })\n                        })\n                    })\n                ]\n            }),\n            /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                className: \"btn-list m-t-14 m-b-20\",\n                children: [\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.Button), {\n                        size: \"small\",\n                        onClick: handleCancel,\n                        className: \"m-r-12\",\n                        children: t(\"sheet.numfmt.cancel\")\n                    }),\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx((0, $bLx5G.Button), {\n                        type: \"primary\",\n                        size: \"small\",\n                        onClick: handleConfirm,\n                        children: t(\"sheet.numfmt.confirm\")\n                    })\n                ]\n            })\n        ]\n    });\n}, \"SheetNumfmtPanel\");\nvar $462cf6d68dfaa0d6$var$__defProp$5 = Object.defineProperty, $462cf6d68dfaa0d6$var$__getOwnPropDesc$5 = Object.getOwnPropertyDescriptor, $462cf6d68dfaa0d6$var$__decorateClass$5 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((decorators, target, key2, kind)=>{\n    for(var result = kind > 1 ? void 0 : kind ? $462cf6d68dfaa0d6$var$__getOwnPropDesc$5(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)(decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n    return kind && result && $462cf6d68dfaa0d6$var$__defProp$5(target, key2, result), result;\n}, \"__decorateClass$5\"), $462cf6d68dfaa0d6$var$__decorateParam$5 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((index, decorator)=>(target, key2)=>decorator(target, key2, index), \"__decorateParam$5\"), $462cf6d68dfaa0d6$var$_a3;\nlet $462cf6d68dfaa0d6$var$NumfmtController = ($462cf6d68dfaa0d6$var$_a3 = class extends (0, $83KcA.Disposable) {\n    constructor(_sheetInterceptorService, _themeService, _univerInstanceService, _commandService, _selectionManagerService, _renderManagerService, _numfmtService, _componentManager, _sidebarService, _localeService){\n        super();\n        /**\n     * If _previewPattern is null ,the realTimeRenderingInterceptor will skip and if it is '',realTimeRenderingInterceptor will clear numfmt.\n     * @private\n     * @type {(string | null)}\n     * @memberof NumfmtController\n     */ $462cf6d68dfaa0d6$var$__publicField(this, \"_previewPattern\", \"\");\n        $462cf6d68dfaa0d6$var$__publicField(this, \"_sidebarDisposable\", null);\n        this._sheetInterceptorService = _sheetInterceptorService, this._themeService = _themeService, this._univerInstanceService = _univerInstanceService, this._commandService = _commandService, this._selectionManagerService = _selectionManagerService, this._renderManagerService = _renderManagerService, this._numfmtService = _numfmtService, this._componentManager = _componentManager, this._sidebarService = _sidebarService, this._localeService = _localeService, this._initRealTimeRenderingInterceptor(), this._initPanel(), this._initCommands(), this._initCloseListener(), this._commandExecutedListener();\n    }\n    openPanel() {\n        var _a9;\n        const sidebarService = this._sidebarService, selectionManagerService = this._selectionManagerService, commandService = this._commandService, univerInstanceService = this._univerInstanceService, numfmtService = this._numfmtService, localeService = this._localeService, range = (((_a9 = selectionManagerService.getCurrentSelections()) == null ? void 0 : _a9.map((s)=>s.range)) || [])[0];\n        if (!range) return !1;\n        const workbook = univerInstanceService.getCurrentUnitForType((0, $83KcA.UniverInstanceType).UNIVER_SHEET), sheet = workbook.getActiveSheet();\n        if (!sheet) return !1;\n        const cellValue = sheet.getCellRaw(range.startRow, range.startColumn), numfmtValue = numfmtService.getValue(workbook.getUnitId(), sheet.getSheetId(), range.startRow, range.startColumn);\n        let pattern = \"\";\n        numfmtValue && (pattern = numfmtValue.pattern);\n        const defaultValue = (cellValue == null ? void 0 : cellValue.t) === (0, $83KcA.CellValueType).NUMBER ? cellValue.v : 12345678, props = {\n            onChange: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((config)=>{\n                var _a10;\n                if (config.type === \"change\") this._previewPattern = config.value, this._forceUpdate();\n                else if (config.type === \"confirm\") {\n                    const selections2 = ((_a10 = selectionManagerService.getCurrentSelections()) == null ? void 0 : _a10.map((s)=>s.range)) || [], params = {\n                        values: []\n                    }, patternType = $462cf6d68dfaa0d6$export$a7bdce4fa13fe691(config.value);\n                    selections2.forEach((rangeInfo)=>{\n                        (0, $83KcA.Range).foreach(rangeInfo, (row, col)=>{\n                            params.values.push({\n                                row: row,\n                                col: col,\n                                pattern: config.value,\n                                type: patternType\n                            });\n                        });\n                    }), commandService.executeCommand($462cf6d68dfaa0d6$export$9bb98f359d6381eb.id, params), sidebarService.close();\n                } else config.type === \"cancel\" && sidebarService.close();\n            }, \"onChange\"),\n            value: {\n                defaultPattern: pattern,\n                defaultValue: defaultValue,\n                row: range.startRow,\n                col: range.startColumn\n            }\n        };\n        return this._sidebarDisposable = sidebarService.open({\n            header: {\n                title: localeService.t(\"sheet.numfmt.title\")\n            },\n            children: {\n                label: $462cf6d68dfaa0d6$var$SHEET_NUMFMT_PLUGIN,\n                ...props\n            },\n            onClose: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n                this._forceUpdate(), commandService.executeCommand($462cf6d68dfaa0d6$export$380e6cf263e379cf.id);\n            }, \"onClose\")\n        }), !0;\n    }\n    _forceUpdate(unitId) {\n        var _a9;\n        const renderUnit = this._renderManagerService.getRenderById(unitId != null ? unitId : this._univerInstanceService.getCurrentUnitForType((0, $83KcA.UniverInstanceType).UNIVER_SHEET).getUnitId());\n        renderUnit == null || renderUnit.with((0, $11kpD.SheetSkeletonManagerService)).reCalculate(), (_a9 = renderUnit == null ? void 0 : renderUnit.mainComponent) == null || _a9.makeDirty();\n    }\n    _initCommands() {\n        [\n            $462cf6d68dfaa0d6$export$1d5d20f76e156639,\n            $462cf6d68dfaa0d6$export$6b6b961cad4a506a,\n            $462cf6d68dfaa0d6$export$37876a5013216cfd,\n            $462cf6d68dfaa0d6$export$a8a59e4fa0a85a1f,\n            $462cf6d68dfaa0d6$export$4fe239f10749cd24,\n            $462cf6d68dfaa0d6$export$380e6cf263e379cf,\n            $462cf6d68dfaa0d6$export$9bb98f359d6381eb\n        ].forEach((config)=>{\n            this.disposeWithMe(this._commandService.registerCommand(config));\n        });\n    }\n    _initPanel() {\n        this._componentManager.register($462cf6d68dfaa0d6$var$SHEET_NUMFMT_PLUGIN, $462cf6d68dfaa0d6$var$SheetNumfmtPanel);\n    }\n    _initRealTimeRenderingInterceptor() {\n        const isPanelOpenObserver = new (0, $3KKCW.Observable)((subscriber)=>{\n            this._commandService.onCommandExecuted((commandInfo)=>{\n                commandInfo.id === $462cf6d68dfaa0d6$export$4fe239f10749cd24.id && subscriber.next(!0), commandInfo.id === $462cf6d68dfaa0d6$export$380e6cf263e379cf.id && subscriber.next(!1);\n            });\n        }), combineOpenAndSelection$ = (0, $5WWyv.combineLatest)([\n            isPanelOpenObserver,\n            this._selectionManagerService.selectionMoveEnd$.pipe((0, $fElJC.map)((selectionInfos)=>selectionInfos ? selectionInfos.map((selectionInfo)=>selectionInfo.range) : []))\n        ]);\n        this.disposeWithMe((0, $83KcA.toDisposable)(combineOpenAndSelection$.pipe((0, $bTGUS.switchMap)(([isOpen, selectionRanges])=>new (0, $3KKCW.Observable)((subscribe)=>{\n                const disposableCollection = new (0, $83KcA.DisposableCollection)();\n                return isOpen && selectionRanges.length && subscribe.next({\n                    selectionRanges: selectionRanges,\n                    disposableCollection: disposableCollection\n                }), ()=>{\n                    disposableCollection.dispose();\n                };\n            })), (0, $6cCiq.tap)(()=>{\n            this._previewPattern = null;\n        })).subscribe(({ disposableCollection: disposableCollection, selectionRanges: selectionRanges })=>{\n            var _a9, _b;\n            const workbook = this._univerInstanceService.getCurrentUnitForType((0, $83KcA.UniverInstanceType).UNIVER_SHEET);\n            this.openPanel(), disposableCollection.add(this._sheetInterceptorService.intercept((0, $ls2nu.INTERCEPTOR_POINT).CELL_CONTENT, {\n                priority: 99,\n                handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((cell, location, next)=>{\n                    const { row: row, col: col } = location, defaultValue = next(cell) || {};\n                    if (selectionRanges.find((range)=>range.startColumn <= col && range.endColumn >= col && range.startRow <= row && range.endRow >= row)) {\n                        const rawValue = location.worksheet.getCellRaw(row, col), value = rawValue == null ? void 0 : rawValue.v, type = rawValue == null ? void 0 : rawValue.t;\n                        if (value == null || type !== (0, $83KcA.CellValueType).NUMBER || this._previewPattern === null) return defaultValue;\n                        const info = $462cf6d68dfaa0d6$export$ef6794aa6fb876dd(this._previewPattern, value, this._localeService.getCurrentLocale());\n                        if (info.color) {\n                            const color = this._themeService.getCurrentTheme()[`${info.color}500`];\n                            return {\n                                ...defaultValue,\n                                v: info.result,\n                                t: (0, $83KcA.CellValueType).STRING,\n                                s: {\n                                    cl: {\n                                        rgb: color\n                                    }\n                                }\n                            };\n                        }\n                        return {\n                            ...defaultValue,\n                            v: info.result,\n                            t: (0, $83KcA.CellValueType).STRING\n                        };\n                    }\n                    return defaultValue;\n                }, \"handler\")\n            })), (_b = (_a9 = this._renderManagerService.getRenderById(workbook.getUnitId())) == null ? void 0 : _a9.mainComponent) == null || _b.makeDirty();\n        })));\n    }\n    _commandExecutedListener() {\n        const commandList = [\n            (0, $ls2nu.RemoveNumfmtMutation).id,\n            (0, $ls2nu.SetNumfmtMutation).id\n        ];\n        this.disposeWithMe(new (0, $3KKCW.Observable)((subscribe)=>{\n            const disposable = this._commandService.onCommandExecuted((command)=>{\n                if (commandList.includes(command.id)) {\n                    const params = command.params;\n                    subscribe.next(params.unitId);\n                }\n            });\n            return ()=>disposable.dispose();\n        }).pipe((0, $bVip2.debounceTime)(16)).subscribe((unitId)=>this._forceUpdate(unitId)));\n    }\n    _initCloseListener() {\n        this._univerInstanceService.getCurrentTypeOfUnit$((0, $83KcA.UniverInstanceType).UNIVER_SHEET).subscribe((unit)=>{\n            var _a9;\n            unit || ((_a9 = this._sidebarDisposable) == null || _a9.dispose(), this._sidebarDisposable = null);\n        });\n    }\n}, $462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$_a3, \"NumfmtController\"), $462cf6d68dfaa0d6$var$_a3);\n$462cf6d68dfaa0d6$var$NumfmtController = $462cf6d68dfaa0d6$var$__decorateClass$5([\n    (0, $83KcA.OnLifecycle)((0, $83KcA.LifecycleStages).Rendered, $462cf6d68dfaa0d6$var$NumfmtController),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(0, (0, $83KcA.Inject)((0, $ls2nu.SheetInterceptorService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(1, (0, $83KcA.Inject)((0, $83KcA.ThemeService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(2, (0, $83KcA.IUniverInstanceService)),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(3, (0, $83KcA.ICommandService)),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(4, (0, $83KcA.Inject)((0, $ls2nu.SheetsSelectionsService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(5, (0, $D79YY.IRenderManagerService)),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(6, (0, $ls2nu.INumfmtService)),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(7, (0, $83KcA.Inject)((0, $cahIb.ComponentManager))),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(8, (0, $cahIb.ISidebarService)),\n    $462cf6d68dfaa0d6$var$__decorateParam$5(9, (0, $83KcA.Inject)((0, $83KcA.LocaleService)))\n], $462cf6d68dfaa0d6$var$NumfmtController);\nvar $462cf6d68dfaa0d6$var$__defProp$4 = Object.defineProperty, $462cf6d68dfaa0d6$var$__getOwnPropDesc$4 = Object.getOwnPropertyDescriptor, $462cf6d68dfaa0d6$var$__decorateClass$4 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((decorators, target, key2, kind)=>{\n    for(var result = kind > 1 ? void 0 : kind ? $462cf6d68dfaa0d6$var$__getOwnPropDesc$4(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)(decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n    return kind && result && $462cf6d68dfaa0d6$var$__defProp$4(target, key2, result), result;\n}, \"__decorateClass$4\"), $462cf6d68dfaa0d6$var$__decorateParam$4 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((index, decorator)=>(target, key2)=>decorator(target, key2, index), \"__decorateParam$4\");\nconst $462cf6d68dfaa0d6$var$createCollectEffectMutation = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n    let list = [];\n    return {\n        add: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((unitId, subUnitId, row, col, value)=>list.push({\n                unitId: unitId,\n                subUnitId: subUnitId,\n                row: row,\n                col: col,\n                value: value\n            }), \"add\"),\n        getEffects: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>list, \"getEffects\"),\n        clean: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n            list = [];\n        }, \"clean\")\n    };\n}, \"createCollectEffectMutation\");\nvar $462cf6d68dfaa0d6$var$_a4;\nlet $462cf6d68dfaa0d6$var$NumfmtEditorController = ($462cf6d68dfaa0d6$var$_a4 = class extends (0, $83KcA.Disposable) {\n    constructor(_sheetInterceptorService, _numfmtService, _univerInstanceService, _injector, _editorBridgeService){\n        super();\n        // collect effect mutations when edit end and push this to  commands stack in next commands progress\n        $462cf6d68dfaa0d6$var$__publicField(this, \"_collectEffectMutation\", $462cf6d68dfaa0d6$var$createCollectEffectMutation());\n        this._sheetInterceptorService = _sheetInterceptorService, this._numfmtService = _numfmtService, this._univerInstanceService = _univerInstanceService, this._injector = _injector, this._editorBridgeService = _editorBridgeService, this._initInterceptorEditorStart(), this._initInterceptorEditorEnd(), this._initInterceptorCommands();\n    }\n    _initInterceptorEditorStart() {\n        this._editorBridgeService && this.disposeWithMe((0, $83KcA.toDisposable)(this._editorBridgeService.interceptor.intercept(this._editorBridgeService.interceptor.getInterceptPoints().BEFORE_CELL_EDIT, {\n            handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((value, context, next)=>{\n                const row = context.row, col = context.col, numfmtCell = this._numfmtService.getValue(context.unitId, context.subUnitId, row, col);\n                if (numfmtCell) switch($462cf6d68dfaa0d6$export$a7bdce4fa13fe691(numfmtCell.pattern)){\n                    case \"scientific\":\n                    case \"currency\":\n                    case \"grouped\":\n                    case \"number\":\n                        return context.worksheet.getCellRaw(row, col);\n                    case \"percent\":\n                    case \"date\":\n                    case \"time\":\n                    case \"datetime\":\n                    default:\n                        return next && next(value);\n                }\n                return next(value);\n            }, \"handler\")\n        })));\n    }\n    /**\n   * Process the  values after  edit\n   * @private\n   * @memberof NumfmtService\n   */ _initInterceptorEditorEnd() {\n        this._editorBridgeService && this.disposeWithMe((0, $83KcA.toDisposable)(this._editorBridgeService.interceptor.intercept(this._editorBridgeService.interceptor.getInterceptPoints().AFTER_CELL_EDIT, {\n            handler: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((value, context, next)=>{\n                var _a9;\n                this._collectEffectMutation.clean();\n                const currentNumfmtValue = this._numfmtService.getValue(context.unitId, context.subUnitId, context.row, context.col), currentNumfmtType = (_a9 = currentNumfmtValue && $462cf6d68dfaa0d6$export$a7bdce4fa13fe691(currentNumfmtValue.pattern)) != null ? _a9 : \"\", clean = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n                    currentNumfmtValue && this._collectEffectMutation.add(context.unitId, context.subUnitId, context.row, context.col, null);\n                }, \"clean\");\n                if (!(value != null && value.v)) return next(value);\n                const content = String(value.v), numfmtInfo = (0, $83KcA.numfmt).parseDate(content) || (0, $83KcA.numfmt).parseTime(content) || (0, $83KcA.numfmt).parseNumber(content);\n                if (numfmtInfo) {\n                    if (numfmtInfo.z) {\n                        const v = Number(numfmtInfo.v);\n                        return this._collectEffectMutation.add(context.unitId, context.subUnitId, context.row, context.col, {\n                            pattern: numfmtInfo.z\n                        }), {\n                            ...value,\n                            v: v,\n                            t: (0, $83KcA.CellValueType).NUMBER\n                        };\n                    }\n                } else ([\n                    \"date\",\n                    \"time\",\n                    \"datetime\",\n                    \"percent\"\n                ].includes(currentNumfmtType) || !$462cf6d68dfaa0d6$var$isNumeric(content)) && clean();\n                return next(value);\n            }, \"handler\")\n        })));\n    }\n    _initInterceptorCommands() {\n        const self = this;\n        this.disposeWithMe(this._sheetInterceptorService.interceptCommand({\n            getMutations (command) {\n                var _a9;\n                switch(command.id){\n                    case (0, $ls2nu.SetRangeValuesCommand).id:\n                        {\n                            const workbook = self._univerInstanceService.getCurrentUnitForType((0, $83KcA.UniverInstanceType).UNIVER_SHEET), unitId = workbook.getUnitId(), subUnitId = (_a9 = workbook.getActiveSheet()) == null ? void 0 : _a9.getSheetId();\n                            if (!subUnitId) return {\n                                redos: [],\n                                undos: []\n                            };\n                            const list = self._collectEffectMutation.getEffects();\n                            if (self._collectEffectMutation.clean(), !list.length) return {\n                                redos: [],\n                                undos: []\n                            };\n                            const cells = list.filter((item)=>{\n                                var _a10;\n                                return !!((_a10 = item.value) != null && _a10.pattern);\n                            }).map((item)=>({\n                                    row: item.row,\n                                    col: item.col,\n                                    pattern: item.value.pattern\n                                })), removeCells = list.filter((item)=>{\n                                var _a10;\n                                return !((_a10 = item.value) != null && _a10.pattern);\n                            }).map((item)=>({\n                                    startRow: item.row,\n                                    endColumn: item.col,\n                                    startColumn: item.col,\n                                    endRow: item.row\n                                })), redos = [], undos = [];\n                            if (cells.length) {\n                                const redo = {\n                                    id: (0, $ls2nu.SetNumfmtMutation).id,\n                                    params: (0, $ls2nu.transformCellsToRange)(unitId, subUnitId, cells)\n                                };\n                                redos.push(redo), undos.push(...(0, $ls2nu.factorySetNumfmtUndoMutation)(self._injector, redo.params));\n                            }\n                            if (removeCells.length) {\n                                const redo = {\n                                    id: (0, $ls2nu.RemoveNumfmtMutation).id,\n                                    params: {\n                                        unitId: unitId,\n                                        subUnitId: subUnitId,\n                                        ranges: removeCells\n                                    }\n                                };\n                                redos.push(redo), undos.push(...(0, $ls2nu.factoryRemoveNumfmtUndoMutation)(self._injector, redo.params));\n                            }\n                            return {\n                                redos: redos,\n                                undos: undos.reverse()\n                            };\n                        }\n                }\n                return {\n                    redos: [],\n                    undos: []\n                };\n            }\n        }));\n    }\n}, $462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$_a4, \"NumfmtEditorController\"), $462cf6d68dfaa0d6$var$_a4);\n$462cf6d68dfaa0d6$var$NumfmtEditorController = $462cf6d68dfaa0d6$var$__decorateClass$4([\n    (0, $83KcA.OnLifecycle)((0, $83KcA.LifecycleStages).Rendered, $462cf6d68dfaa0d6$var$NumfmtEditorController),\n    $462cf6d68dfaa0d6$var$__decorateParam$4(0, (0, $83KcA.Inject)((0, $ls2nu.SheetInterceptorService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$4(1, (0, $83KcA.Inject)((0, $ls2nu.INumfmtService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$4(2, (0, $83KcA.Inject)((0, $83KcA.IUniverInstanceService))),\n    $462cf6d68dfaa0d6$var$__decorateParam$4(3, (0, $83KcA.Inject)((0, $83KcA.Injector))),\n    $462cf6d68dfaa0d6$var$__decorateParam$4(4, (0, $83KcA.Optional)((0, $11kpD.IEditorBridgeService)))\n], $462cf6d68dfaa0d6$var$NumfmtEditorController);\nfunction $462cf6d68dfaa0d6$var$isNumeric(str) {\n    return /^-?\\d+(\\.\\d+)?$/.test(str);\n}\n$462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$isNumeric, \"isNumeric\");\nvar $462cf6d68dfaa0d6$var$__defProp$3 = Object.defineProperty, $462cf6d68dfaa0d6$var$__getOwnPropDesc$3 = Object.getOwnPropertyDescriptor, $462cf6d68dfaa0d6$var$__decorateClass$3 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((decorators, target, key2, kind)=>{\n    for(var result = kind > 1 ? void 0 : kind ? $462cf6d68dfaa0d6$var$__getOwnPropDesc$3(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)(decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n    return kind && result && $462cf6d68dfaa0d6$var$__defProp$3(target, key2, result), result;\n}, \"__decorateClass$3\"), $462cf6d68dfaa0d6$var$__decorateParam$3 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((index, decorator)=>(target, key2)=>decorator(target, key2, index), \"__decorateParam$3\"), $462cf6d68dfaa0d6$var$_a5;\nlet $462cf6d68dfaa0d6$var$NumfmtI18nController = ($462cf6d68dfaa0d6$var$_a5 = class extends (0, $83KcA.Disposable) {\n    constructor(_localeService){\n        super(), this._localeService = _localeService;\n    }\n}, $462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$_a5, \"NumfmtI18nController\"), $462cf6d68dfaa0d6$var$_a5);\n$462cf6d68dfaa0d6$var$NumfmtI18nController = $462cf6d68dfaa0d6$var$__decorateClass$3([\n    (0, $83KcA.OnLifecycle)((0, $83KcA.LifecycleStages).Rendered, $462cf6d68dfaa0d6$var$NumfmtI18nController),\n    $462cf6d68dfaa0d6$var$__decorateParam$3(0, (0, $83KcA.Inject)((0, $83KcA.LocaleService)))\n], $462cf6d68dfaa0d6$var$NumfmtI18nController);\nconst $462cf6d68dfaa0d6$var$MENU_OPTIONS = [\n    {\n        label: \"sheet.numfmt.general\",\n        pattern: null\n    },\n    {\n        label: \"sheet.numfmt.text\",\n        pattern: (0, $5KEro.DEFAULT_TEXT_FORMAT)\n    },\n    \"|\",\n    {\n        label: \"sheet.numfmt.number\",\n        pattern: \"0\"\n    },\n    \"|\",\n    {\n        label: \"sheet.numfmt.accounting\",\n        pattern: '\"\\xa5\" #,##0.00_);[Red](\"\\xa5\"#,##0.00)'\n    },\n    {\n        label: \"sheet.numfmt.financialValue\",\n        pattern: \"#,##0.00;[Red]#,##0.00\"\n    },\n    {\n        label: \"sheet.numfmt.currency\",\n        pattern: '\"\\xa5\"#,##0.00_);[Red](\"\\xa5\"#,##0.00)'\n    },\n    {\n        label: \"sheet.numfmt.roundingCurrency\",\n        pattern: '\"\\xa5\"#,##0;[Red]\"\\xa5\"#,##0'\n    },\n    \"|\",\n    {\n        label: \"sheet.numfmt.date\",\n        pattern: \"yyyy-mm-dd;@\"\n    },\n    {\n        label: \"sheet.numfmt.time\",\n        pattern: 'am/pm h\":\"mm\":\"ss'\n    },\n    {\n        label: \"sheet.numfmt.dateTime\",\n        pattern: \"yyyy-m-d am/pm h:mm\"\n    },\n    {\n        label: \"sheet.numfmt.timeDuration\",\n        pattern: \"h:mm:ss\"\n    },\n    \"|\",\n    {\n        label: \"sheet.numfmt.moreFmt\",\n        pattern: \"\"\n    }\n], $462cf6d68dfaa0d6$var$MORE_NUMFMT_TYPE_KEY = \"sheet.numfmt.moreNumfmtType\", $462cf6d68dfaa0d6$var$OPTIONS_KEY = \"sheet.numfmt.moreNumfmtType.options\", $462cf6d68dfaa0d6$var$MoreNumfmtType = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((props)=>{\n    var _a9;\n    const localeService = (0, $83KcA.useDependency)((0, $83KcA.LocaleService)), value = (_a9 = props.value) != null ? _a9 : localeService.t(\"sheet.numfmt.general\");\n    return /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"span\", {\n        className: \"more-numfmt-type\",\n        children: value\n    });\n}, \"MoreNumfmtType\"), $462cf6d68dfaa0d6$var$Options = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n    const commandService = (0, $83KcA.useDependency)((0, $83KcA.ICommandService)), localeService = (0, $83KcA.useDependency)((0, $83KcA.LocaleService)), layoutService = (0, $83KcA.useDependency)((0, $cahIb.ILayoutService));\n    (0, $83KcA.useInjector)();\n    const selectionManagerService = (0, $83KcA.useDependency)((0, $ls2nu.SheetsSelectionsService)), setNumfmt = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((pattern)=>{\n        const selection = selectionManagerService.getCurrentLastSelection();\n        if (!selection) return;\n        const range = selection.range, values = [];\n        (0, $83KcA.Range).foreach(range, (row, col)=>{\n            pattern ? values.push({\n                row: row,\n                col: col,\n                pattern: pattern,\n                type: $462cf6d68dfaa0d6$export$a7bdce4fa13fe691(pattern)\n            }) : values.push({\n                row: row,\n                col: col\n            });\n        }), commandService.executeCommand($462cf6d68dfaa0d6$export$9bb98f359d6381eb.id, {\n            values: values\n        }), layoutService.focus();\n    }, \"setNumfmt\"), handleOnclick = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((index)=>{\n        if (index === 0) setNumfmt(null);\n        else if (index === $462cf6d68dfaa0d6$var$MENU_OPTIONS.length - 1) commandService.executeCommand($462cf6d68dfaa0d6$export$4fe239f10749cd24.id);\n        else {\n            const item = $462cf6d68dfaa0d6$var$MENU_OPTIONS[index];\n            item.pattern && setNumfmt(item.pattern);\n        }\n    }, \"handleOnclick\"), defaultValue = 1220;\n    return /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n        className: \"more-numfmt-type-options\",\n        children: $462cf6d68dfaa0d6$var$MENU_OPTIONS.map((item, index)=>item === \"|\" ? /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                className: \"line m-t-4\",\n                onClick: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((e)=>e.stopPropagation(), \"onClick\")\n            }, index) : /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsxs(\"div\", {\n                className: \"option-item m-t-4\",\n                onClick: /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name(()=>{\n                    handleOnclick(index);\n                }, \"onClick\"),\n                children: [\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                        children: localeService.t(item.label)\n                    }),\n                    /* @__PURE__ */ $462cf6d68dfaa0d6$var$jsxRuntimeExports.jsx(\"div\", {\n                        className: \"m-l-26\",\n                        children: item.pattern ? $462cf6d68dfaa0d6$export$ef6794aa6fb876dd(item.pattern || \"\", defaultValue, localeService.getCurrentLocale()).result : \"\"\n                    })\n                ]\n            }, index))\n    });\n}, \"Options\"), $462cf6d68dfaa0d6$var$CurrencyMenuItem = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((accessor)=>({\n        icon: new (0, $3KKCW.Observable)((subscribe)=>{\n            const menuCurrencyService = accessor.get($462cf6d68dfaa0d6$export$d9c5d227e372c7ef);\n            function getIconKey(symbol2) {\n                return ({\n                    [$462cf6d68dfaa0d6$export$4b021f12543b53a8.US]: \"DollarSingle\",\n                    [$462cf6d68dfaa0d6$export$4b021f12543b53a8.RU]: \"RoubleSingle\",\n                    [$462cf6d68dfaa0d6$export$4b021f12543b53a8.CN]: \"RmbSingle\",\n                    [$462cf6d68dfaa0d6$export$4b021f12543b53a8.AT]: \"EuroSingle\"\n                })[symbol2] || \"DollarSingle\";\n            }\n            $462cf6d68dfaa0d6$var$__name(getIconKey, \"getIconKey\");\n            const symbol = $462cf6d68dfaa0d6$export$4b021f12543b53a8[menuCurrencyService.getCurrencySymbol()] || \"$\";\n            return subscribe.next(getIconKey(symbol)), menuCurrencyService.currencySymbol$.subscribe((code)=>{\n                const symbol2 = $462cf6d68dfaa0d6$export$4b021f12543b53a8[code] || \"$\";\n                subscribe.next(getIconKey(symbol2));\n            });\n        }),\n        id: $462cf6d68dfaa0d6$export$37876a5013216cfd.id,\n        title: \"sheet.numfmt.currency\",\n        tooltip: \"sheet.numfmt.currency\",\n        type: (0, $cahIb.MenuItemType).BUTTON,\n        hidden$: (0, $cahIb.getMenuHiddenObservable)(accessor, (0, $83KcA.UniverInstanceType).UNIVER_SHEET),\n        disabled$: (0, $11kpD.getCurrentRangeDisable$)(accessor, {\n            workbookTypes: [\n                (0, $ls2nu.WorkbookEditablePermission)\n            ],\n            worksheetTypes: [\n                (0, $ls2nu.WorksheetEditPermission),\n                (0, $ls2nu.WorksheetSetCellStylePermission)\n            ],\n            rangeTypes: [\n                (0, $ls2nu.RangeProtectionPermissionEditPoint)\n            ]\n        })\n    }), \"CurrencyMenuItem\"), $462cf6d68dfaa0d6$var$AddDecimalMenuItem = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((accessor)=>({\n        icon: \"AddDigitsSingle\",\n        id: $462cf6d68dfaa0d6$export$1d5d20f76e156639.id,\n        title: \"sheet.numfmt.addDecimal\",\n        tooltip: \"sheet.numfmt.addDecimal\",\n        type: (0, $cahIb.MenuItemType).BUTTON,\n        hidden$: (0, $cahIb.getMenuHiddenObservable)(accessor, (0, $83KcA.UniverInstanceType).UNIVER_SHEET),\n        disabled$: (0, $11kpD.getCurrentRangeDisable$)(accessor, {\n            workbookTypes: [\n                (0, $ls2nu.WorkbookEditablePermission)\n            ],\n            worksheetTypes: [\n                (0, $ls2nu.WorksheetEditPermission),\n                (0, $ls2nu.WorksheetSetCellStylePermission)\n            ],\n            rangeTypes: [\n                (0, $ls2nu.RangeProtectionPermissionEditPoint)\n            ]\n        })\n    }), \"AddDecimalMenuItem\"), $462cf6d68dfaa0d6$var$SubtractDecimalMenuItem = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((accessor)=>({\n        icon: \"ReduceDigitsSingle\",\n        id: $462cf6d68dfaa0d6$export$6b6b961cad4a506a.id,\n        title: \"sheet.numfmt.subtractDecimal\",\n        tooltip: \"sheet.numfmt.subtractDecimal\",\n        type: (0, $cahIb.MenuItemType).BUTTON,\n        hidden$: (0, $cahIb.getMenuHiddenObservable)(accessor, (0, $83KcA.UniverInstanceType).UNIVER_SHEET),\n        disabled$: (0, $11kpD.getCurrentRangeDisable$)(accessor, {\n            workbookTypes: [\n                (0, $ls2nu.WorkbookEditablePermission)\n            ],\n            worksheetTypes: [\n                (0, $ls2nu.WorksheetEditPermission),\n                (0, $ls2nu.WorksheetSetCellStylePermission)\n            ],\n            rangeTypes: [\n                (0, $ls2nu.RangeProtectionPermissionEditPoint)\n            ]\n        })\n    }), \"SubtractDecimalMenuItem\"), $462cf6d68dfaa0d6$var$PercentMenuItem = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((accessor)=>({\n        icon: \"PercentSingle\",\n        id: $462cf6d68dfaa0d6$export$a8a59e4fa0a85a1f.id,\n        title: \"sheet.numfmt.percent\",\n        tooltip: \"sheet.numfmt.percent\",\n        type: (0, $cahIb.MenuItemType).BUTTON,\n        hidden$: (0, $cahIb.getMenuHiddenObservable)(accessor, (0, $83KcA.UniverInstanceType).UNIVER_SHEET),\n        disabled$: (0, $11kpD.getCurrentRangeDisable$)(accessor, {\n            workbookTypes: [\n                (0, $ls2nu.WorkbookEditablePermission)\n            ],\n            worksheetTypes: [\n                (0, $ls2nu.WorksheetEditPermission),\n                (0, $ls2nu.WorksheetSetCellStylePermission)\n            ],\n            rangeTypes: [\n                (0, $ls2nu.RangeProtectionPermissionEditPoint)\n            ]\n        })\n    }), \"PercentMenuItem\"), $462cf6d68dfaa0d6$var$FactoryOtherMenuItem = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((accessor)=>{\n    const univerInstanceService = accessor.get((0, $83KcA.IUniverInstanceService)), commandService = accessor.get((0, $83KcA.ICommandService)), localeService = accessor.get((0, $83KcA.LocaleService)), selectionManagerService = accessor.get((0, $ls2nu.SheetsSelectionsService)), value$ = (0, $11kpD.deriveStateFromActiveSheet$)(univerInstanceService, \"\", ({ workbook: workbook, worksheet: worksheet })=>new (0, $3KKCW.Observable)((subscribe)=>(0, $d0sRG.merge)(selectionManagerService.selectionMoveEnd$, new (0, $3KKCW.Observable)((commandSubscribe)=>{\n                const commandList = [\n                    (0, $ls2nu.RemoveNumfmtMutation).id,\n                    (0, $ls2nu.SetNumfmtMutation).id\n                ], disposable = commandService.onCommandExecuted((commandInfo)=>{\n                    commandList.includes(commandInfo.id) && commandSubscribe.next(null);\n                });\n                return ()=>disposable.dispose();\n            })).subscribe(()=>{\n                var _a9, _b;\n                const selections = selectionManagerService.getCurrentSelections();\n                if (selections && selections[0]) {\n                    const range = selections[0].range, row = range.startRow, col = range.startColumn, numfmtValue = (_b = workbook.getStyles().get((_a9 = worksheet.getCell(row, col)) == null ? void 0 : _a9.s)) == null ? void 0 : _b.n, pattern = numfmtValue == null ? void 0 : numfmtValue.pattern;\n                    let value = localeService.t(\"sheet.numfmt.general\");\n                    if (pattern) {\n                        const item = $462cf6d68dfaa0d6$var$MENU_OPTIONS.filter((item2)=>typeof item2 == \"object\" && item2.pattern).find((item2)=>$462cf6d68dfaa0d6$var$isPatternEqualWithoutDecimal(pattern, item2.pattern));\n                        item && typeof item == \"object\" && item.pattern ? value = localeService.t(item.label) : value = localeService.t(\"sheet.numfmt.moreFmt\");\n                    }\n                    subscribe.next(value);\n                }\n            })));\n    return {\n        label: $462cf6d68dfaa0d6$var$MORE_NUMFMT_TYPE_KEY,\n        id: $462cf6d68dfaa0d6$export$4fe239f10749cd24.id,\n        tooltip: \"sheet.numfmt.title\",\n        type: (0, $cahIb.MenuItemType).SELECTOR,\n        selections: [\n            {\n                label: {\n                    name: $462cf6d68dfaa0d6$var$OPTIONS_KEY,\n                    hoverable: !1\n                }\n            }\n        ],\n        value$: value$,\n        hidden$: (0, $cahIb.getMenuHiddenObservable)(accessor, (0, $83KcA.UniverInstanceType).UNIVER_SHEET),\n        disabled$: (0, $11kpD.getCurrentRangeDisable$)(accessor, {\n            workbookTypes: [\n                (0, $ls2nu.WorkbookEditablePermission)\n            ],\n            worksheetTypes: [\n                (0, $ls2nu.WorksheetSetCellStylePermission),\n                (0, $ls2nu.WorksheetEditPermission)\n            ],\n            rangeTypes: [\n                (0, $ls2nu.RangeProtectionPermissionEditPoint)\n            ]\n        })\n    };\n}, \"FactoryOtherMenuItem\"), $462cf6d68dfaa0d6$var$menuSchema = {\n    [(0, $cahIb.RibbonStartGroup).FORMULAS_INSERT]: {\n        [$462cf6d68dfaa0d6$export$37876a5013216cfd.id]: {\n            order: 4,\n            menuItemFactory: $462cf6d68dfaa0d6$var$CurrencyMenuItem\n        },\n        [$462cf6d68dfaa0d6$export$1d5d20f76e156639.id]: {\n            order: 5,\n            menuItemFactory: $462cf6d68dfaa0d6$var$AddDecimalMenuItem\n        },\n        [$462cf6d68dfaa0d6$export$6b6b961cad4a506a.id]: {\n            order: 6,\n            menuItemFactory: $462cf6d68dfaa0d6$var$SubtractDecimalMenuItem\n        },\n        [$462cf6d68dfaa0d6$export$a8a59e4fa0a85a1f.id]: {\n            order: 7,\n            menuItemFactory: $462cf6d68dfaa0d6$var$PercentMenuItem\n        },\n        [$462cf6d68dfaa0d6$export$4fe239f10749cd24.id]: {\n            order: 8,\n            menuItemFactory: $462cf6d68dfaa0d6$var$FactoryOtherMenuItem\n        }\n    }\n};\nvar $462cf6d68dfaa0d6$var$__defProp$2 = Object.defineProperty, $462cf6d68dfaa0d6$var$__getOwnPropDesc$2 = Object.getOwnPropertyDescriptor, $462cf6d68dfaa0d6$var$__decorateClass$2 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((decorators, target, key2, kind)=>{\n    for(var result = kind > 1 ? void 0 : kind ? $462cf6d68dfaa0d6$var$__getOwnPropDesc$2(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)(decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n    return kind && result && $462cf6d68dfaa0d6$var$__defProp$2(target, key2, result), result;\n}, \"__decorateClass$2\"), $462cf6d68dfaa0d6$var$__decorateParam$2 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((index, decorator)=>(target, key2)=>decorator(target, key2, index), \"__decorateParam$2\"), $462cf6d68dfaa0d6$var$_a6;\nlet $462cf6d68dfaa0d6$var$NumfmtMenuController = ($462cf6d68dfaa0d6$var$_a6 = class extends (0, $83KcA.Disposable) {\n    constructor(_injector, _componentManager, _menuManagerService){\n        super(), this._injector = _injector, this._componentManager = _componentManager, this._menuManagerService = _menuManagerService, this._initMenu();\n    }\n    _initMenu() {\n        this._menuManagerService.mergeMenu($462cf6d68dfaa0d6$var$menuSchema), this.disposeWithMe(this._componentManager.register($462cf6d68dfaa0d6$var$MORE_NUMFMT_TYPE_KEY, $462cf6d68dfaa0d6$var$MoreNumfmtType)), this.disposeWithMe(this._componentManager.register($462cf6d68dfaa0d6$var$OPTIONS_KEY, $462cf6d68dfaa0d6$var$Options));\n    }\n}, $462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$_a6, \"NumfmtMenuController\"), $462cf6d68dfaa0d6$var$_a6);\n$462cf6d68dfaa0d6$var$NumfmtMenuController = $462cf6d68dfaa0d6$var$__decorateClass$2([\n    (0, $83KcA.OnLifecycle)((0, $83KcA.LifecycleStages).Rendered, $462cf6d68dfaa0d6$var$NumfmtMenuController),\n    $462cf6d68dfaa0d6$var$__decorateParam$2(0, (0, $83KcA.Inject)((0, $83KcA.Injector))),\n    $462cf6d68dfaa0d6$var$__decorateParam$2(1, (0, $83KcA.Inject)((0, $cahIb.ComponentManager))),\n    $462cf6d68dfaa0d6$var$__decorateParam$2(2, (0, $cahIb.IMenuManagerService))\n], $462cf6d68dfaa0d6$var$NumfmtMenuController);\nvar $462cf6d68dfaa0d6$var$__defProp$1 = Object.defineProperty, $462cf6d68dfaa0d6$var$__getOwnPropDesc$1 = Object.getOwnPropertyDescriptor, $462cf6d68dfaa0d6$var$__decorateClass$1 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((decorators, target, key2, kind)=>{\n    for(var result = kind > 1 ? void 0 : kind ? $462cf6d68dfaa0d6$var$__getOwnPropDesc$1(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)(decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n    return kind && result && $462cf6d68dfaa0d6$var$__defProp$1(target, key2, result), result;\n}, \"__decorateClass$1\"), $462cf6d68dfaa0d6$var$__decorateParam$1 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((index, decorator)=>(target, key2)=>decorator(target, key2, index), \"__decorateParam$1\"), $462cf6d68dfaa0d6$var$_a7;\nlet $462cf6d68dfaa0d6$var$NumfmtCurrencyController = ($462cf6d68dfaa0d6$var$_a7 = class extends (0, $83KcA.Disposable) {\n    constructor(_injector){\n        super();\n        $462cf6d68dfaa0d6$var$__publicField(this, \"_currencySymbol$\", new (0, $jv4BO.BehaviorSubject)(\"US\"));\n        $462cf6d68dfaa0d6$var$__publicField(this, \"currencySymbol$\", this._currencySymbol$.asObservable());\n        this._injector = _injector;\n    }\n    /**\n   * Set the currency symbol by setting the country code.\n   */ setCurrencySymbolByCountryCode(symbol) {\n        this._currencySymbol$.next(symbol);\n    }\n    getCurrencySymbol() {\n        return this._currencySymbol$.getValue();\n    }\n}, $462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$_a7, \"NumfmtCurrencyController\"), $462cf6d68dfaa0d6$var$_a7);\n$462cf6d68dfaa0d6$var$NumfmtCurrencyController = $462cf6d68dfaa0d6$var$__decorateClass$1([\n    (0, $83KcA.OnLifecycle)((0, $83KcA.LifecycleStages).Rendered, $462cf6d68dfaa0d6$var$NumfmtCurrencyController),\n    $462cf6d68dfaa0d6$var$__decorateParam$1(0, (0, $83KcA.Inject)((0, $83KcA.Injector)))\n], $462cf6d68dfaa0d6$var$NumfmtCurrencyController);\nconst $462cf6d68dfaa0d6$var$PLUGIN_CONFIG_KEY = \"sheets-numfmt.config\", $462cf6d68dfaa0d6$var$defaultPluginConfig = {};\nvar $462cf6d68dfaa0d6$var$__defProp2 = Object.defineProperty, $462cf6d68dfaa0d6$var$__getOwnPropDesc = Object.getOwnPropertyDescriptor, $462cf6d68dfaa0d6$var$__defNormalProp2 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((obj, key2, value)=>key2 in obj ? $462cf6d68dfaa0d6$var$__defProp2(obj, key2, {\n        enumerable: !0,\n        configurable: !0,\n        writable: !0,\n        value: value\n    }) : obj[key2] = value, \"__defNormalProp\"), $462cf6d68dfaa0d6$var$__decorateClass = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((decorators, target, key2, kind)=>{\n    for(var result = kind > 1 ? void 0 : kind ? $462cf6d68dfaa0d6$var$__getOwnPropDesc(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)(decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n    return kind && result && $462cf6d68dfaa0d6$var$__defProp2(target, key2, result), result;\n}, \"__decorateClass\"), $462cf6d68dfaa0d6$var$__decorateParam = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((index, decorator)=>(target, key2)=>decorator(target, key2, index), \"__decorateParam\"), $462cf6d68dfaa0d6$var$__publicField2 = /* @__PURE__ */ $462cf6d68dfaa0d6$var$__name((obj, key2, value)=>$462cf6d68dfaa0d6$var$__defNormalProp2(obj, typeof key2 != \"symbol\" ? key2 + \"\" : key2, value), \"__publicField\"), $462cf6d68dfaa0d6$var$_a8;\nlet $462cf6d68dfaa0d6$export$95359223c4ac5277 = ($462cf6d68dfaa0d6$var$_a8 = class extends (0, $83KcA.Plugin) {\n    constructor(_config = $462cf6d68dfaa0d6$var$defaultPluginConfig, _injector, _configService){\n        super(), this._config = _config, this._injector = _injector, this._configService = _configService;\n        const { menu: menu, ...rest } = this._config;\n        menu && this._configService.setConfig(\"menu\", menu, {\n            merge: !0\n        }), this._configService.setConfig($462cf6d68dfaa0d6$var$PLUGIN_CONFIG_KEY, rest);\n    }\n    onStarting() {\n        this._injector.add([\n            $462cf6d68dfaa0d6$var$INumfmtController,\n            {\n                useClass: $462cf6d68dfaa0d6$var$NumfmtController,\n                lazy: !1\n            }\n        ]), this._injector.add([\n            $462cf6d68dfaa0d6$var$NumfmtEditorController\n        ]), this._injector.add([\n            $462cf6d68dfaa0d6$var$UserHabitController\n        ]), this._injector.add([\n            $462cf6d68dfaa0d6$var$SheetsNumfmtCellContentController\n        ]), this._injector.add([\n            $462cf6d68dfaa0d6$var$NumfmtI18nController\n        ]), this._injector.add([\n            $462cf6d68dfaa0d6$export$d9c5d227e372c7ef\n        ]), this._injector.add([\n            $462cf6d68dfaa0d6$var$NumfmtCurrencyController\n        ]), this._injector.add([\n            $462cf6d68dfaa0d6$var$NumfmtMenuController\n        ]);\n    }\n}, $462cf6d68dfaa0d6$var$__name($462cf6d68dfaa0d6$var$_a8, \"UniverSheetsNumfmtPlugin\"), $462cf6d68dfaa0d6$var$_a8);\n$462cf6d68dfaa0d6$var$__publicField2($462cf6d68dfaa0d6$export$95359223c4ac5277, \"pluginName\", $462cf6d68dfaa0d6$var$SHEET_NUMFMT_PLUGIN);\n$462cf6d68dfaa0d6$var$__publicField2($462cf6d68dfaa0d6$export$95359223c4ac5277, \"type\", (0, $83KcA.UniverInstanceType).UNIVER_SHEET);\n$462cf6d68dfaa0d6$export$95359223c4ac5277 = $462cf6d68dfaa0d6$var$__decorateClass([\n    (0, $83KcA.DependentOn)((0, $ls2nu.UniverSheetsPlugin), (0, $11kpD.UniverSheetsUIPlugin)),\n    $462cf6d68dfaa0d6$var$__decorateParam(1, (0, $83KcA.Inject)((0, $83KcA.Injector))),\n    $462cf6d68dfaa0d6$var$__decorateParam(2, (0, $83KcA.IConfigService))\n], $462cf6d68dfaa0d6$export$95359223c4ac5277);\n\n});\nparcelRegister(\"6cCiq\", function(module, exports) {\n\n$parcel$export(module.exports, \"tap\", function () { return $484191e4ec6496d1$export$3f23594af5f37336; });\n\nvar $im29J = parcelRequire(\"im29J\");\n\nvar $jaOYC = parcelRequire(\"jaOYC\");\n\nvar $hMcgT = parcelRequire(\"hMcgT\");\n\nvar $agvo5 = parcelRequire(\"agvo5\");\nfunction $484191e4ec6496d1$export$3f23594af5f37336(observerOrNext, error, complete) {\n    var tapObserver = (0, $im29J.isFunction)(observerOrNext) || error || complete ? {\n        next: observerOrNext,\n        error: error,\n        complete: complete\n    } : observerOrNext;\n    return tapObserver ? (0, $jaOYC.operate)(function(source, subscriber) {\n        var _a;\n        (_a = tapObserver.subscribe) === null || _a === void 0 || _a.call(tapObserver);\n        var isUnsub = true;\n        source.subscribe((0, $hMcgT.createOperatorSubscriber)(subscriber, function(value) {\n            var _a;\n            (_a = tapObserver.next) === null || _a === void 0 || _a.call(tapObserver, value);\n            subscriber.next(value);\n        }, function() {\n            var _a;\n            isUnsub = false;\n            (_a = tapObserver.complete) === null || _a === void 0 || _a.call(tapObserver);\n            subscriber.complete();\n        }, function(err) {\n            var _a;\n            isUnsub = false;\n            (_a = tapObserver.error) === null || _a === void 0 || _a.call(tapObserver, err);\n            subscriber.error(err);\n        }, function() {\n            var _a, _b;\n            if (isUnsub) (_a = tapObserver.unsubscribe) === null || _a === void 0 || _a.call(tapObserver);\n            (_b = tapObserver.finalize) === null || _b === void 0 || _b.call(tapObserver);\n        }));\n    }) : (0, $agvo5.identity);\n}\n\n});\n\n\n})();\n//# sourceMappingURL=es.6f3dd60a.js.map\n","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key2, value) => key2 in obj ? __defProp(obj, key2, { enumerable: !0, configurable: !0, writable: !0, value }) : obj[key2] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: !0 });\nvar __publicField = (obj, key2, value) => __defNormalProp(obj, typeof key2 != \"symbol\" ? key2 + \"\" : key2, value);\nimport { numfmt, CommandType, ICommandService, IUniverInstanceService, IUndoRedoService, sequenceExecute, Range, CellValueType, createIdentifier, runOnLifecycle, LifecycleStages, LocaleType, Disposable, ObjectMatrix, UniverInstanceType, OnLifecycle, Inject, ThemeService, LocaleService, ILocalStorageService, useDependency, toDisposable, DisposableCollection, Injector, Optional, useInjector, Plugin, DependentOn, IConfigService } from \"@univerjs/core\";\nimport { getSheetCommandTarget, transformCellsToRange, rangeMerge, SetNumfmtMutation, factorySetNumfmtUndoMutation, RemoveNumfmtMutation, factoryRemoveNumfmtUndoMutation, SheetsSelectionsService, INumfmtService, INTERCEPTOR_POINT, InterceptCellContentPriority, SetRangeValuesMutation, SheetInterceptorService, SetRangeValuesCommand, WorkbookEditablePermission, WorksheetEditPermission, WorksheetSetCellStylePermission, RangeProtectionPermissionEditPoint, UniverSheetsPlugin } from \"@univerjs/sheets\";\nimport { BehaviorSubject, switchMap, of, skip, Observable, combineLatest, merge } from \"rxjs\";\nimport { SheetSkeletonManagerService, IEditorBridgeService, getCurrentRangeDisable$, deriveStateFromActiveSheet$, UniverSheetsUIPlugin } from \"@univerjs/sheets-ui\";\nimport { IRenderManagerService } from \"@univerjs/engine-render\";\nimport { ComponentManager, ISidebarService, ILayoutService, MenuItemType, getMenuHiddenObservable, RibbonStartGroup, IMenuManagerService } from \"@univerjs/ui\";\nimport { map, switchMap as switchMap$1, tap, debounceTime } from \"rxjs/operators\";\nimport require$$0, { createContext, useState, useEffect, useRef, useContext, useMemo, forwardRef, createElement } from \"react\";\nimport { InputNumber, Select, SelectList, Input, Button } from \"@univerjs/design\";\nimport { DEFAULT_TEXT_FORMAT } from \"@univerjs/engine-numfmt\";\nconst currencySymbols = [\n  \"$\",\n  \"£\",\n  \"¥\",\n  \"¤\",\n  \"֏\",\n  \"؋\",\n  \"৳\",\n  \"฿\",\n  // '៛',\n  \"₡\",\n  \"₦\",\n  \"₩\",\n  \"₪\",\n  \"₫\",\n  \"€\",\n  \"₭\",\n  \"₮\",\n  \"₱\",\n  \"₲\",\n  \"₴\",\n  \"₸\",\n  \"₹\",\n  \"₺\",\n  \"₼\",\n  \"₽\",\n  \"₾\",\n  \"₿\"\n], countryCurrencyMap = {\n  US: \"$\",\n  // United States Dollar\n  CA: \"C$\",\n  // Canadian Dollar\n  GB: \"£\",\n  // British Pound Sterling\n  JP: \"¥\",\n  // Japanese Yen\n  IN: \"₹\",\n  // Indian Rupee\n  AU: \"A$\",\n  // Australian Dollar\n  CN: \"¥\",\n  // Chinese Yuan\n  KR: \"₩\",\n  // South Korean Won\n  RU: \"₽\",\n  // Russian Ruble\n  // Euro countries\n  AT: \"€\",\n  BE: \"€\",\n  CY: \"€\",\n  EE: \"€\",\n  FI: \"€\",\n  FR: \"€\",\n  DE: \"€\",\n  GR: \"€\",\n  IE: \"€\",\n  IT: \"€\",\n  LV: \"€\",\n  LT: \"€\",\n  LU: \"€\",\n  MT: \"€\",\n  NL: \"€\",\n  PT: \"€\",\n  SK: \"€\",\n  SI: \"€\",\n  ES: \"€\"\n  // Add more mappings as needed\n}, getDecimalFromPattern = /* @__PURE__ */ __name((pattern, defaultValue = 0) => {\n  var _a9;\n  return pattern && (_a9 = numfmt.getInfo(pattern).maxDecimals) != null ? _a9 : defaultValue;\n}, \"getDecimalFromPattern\"), isPatternEqualWithoutDecimal = /* @__PURE__ */ __name((patternA, patternB) => {\n  if (patternA && !patternB || !patternA && patternB)\n    return !1;\n  const getString = /* @__PURE__ */ __name((tokens) => tokens.reduce(\n    (pre, cur) => {\n      if (pre.isEnd)\n        return pre;\n      const str = cur.value || cur.num;\n      return cur.type === \"point\" ? (pre.isEnd = !0, pre) : { ...pre, result: pre.result + str };\n    },\n    { isEnd: !1, result: \"\" }\n  ).result, \"getString\"), partitionsA = numfmt.getInfo(patternA)._partitions, partitionsB = numfmt.getInfo(patternB)._partitions, A1 = getString(partitionsA[0].tokens), B1 = getString(partitionsB[0].tokens), A2 = getString(partitionsA[1].tokens), B2 = getString(partitionsB[1].tokens);\n  return A1 === B1 && A2 === B2 && partitionsA[1].color === partitionsB[1].color;\n}, \"isPatternEqualWithoutDecimal\"), getDecimalString = /* @__PURE__ */ __name((length) => new Array(Math.min(Math.max(0, Number(length)), 30)).fill(0).join(\"\"), \"getDecimalString\"), setPatternDecimal = /* @__PURE__ */ __name((patterns, decimalLength) => patterns.split(\";\").map((pattern) => /\\.0?/.test(pattern) ? pattern.replace(\n  /\\.0*/g,\n  `${decimalLength > 0 ? \".\" : \"\"}${getDecimalString(Number(decimalLength || 0))}`\n) : /0([^0]?)|0$/.test(pattern) ? pattern.replace(\n  /0([^0]+)|0$/,\n  `0${decimalLength > 0 ? \".\" : \"\"}${getDecimalString(Number(decimalLength || 0))}$1`\n) : pattern).join(\";\"), \"setPatternDecimal\"), isPatternHasDecimal = /* @__PURE__ */ __name((pattern) => /\\.0?/.test(pattern) || /0([^0]?)|0$/.test(pattern), \"isPatternHasDecimal\"), SetNumfmtCommand = {\n  id: \"sheet.command.numfmt.set.numfmt\",\n  type: CommandType.COMMAND,\n  handler: /* @__PURE__ */ __name((accessor, params) => {\n    if (!params)\n      return !1;\n    const commandService = accessor.get(ICommandService), univerInstanceService = accessor.get(IUniverInstanceService), undoRedoService = accessor.get(IUndoRedoService), target = getSheetCommandTarget(univerInstanceService, params);\n    if (!target) return !1;\n    const { unitId, subUnitId } = target, setCells = params.values.filter((value) => !!value.pattern), removeCells = params.values.filter((value) => !value.pattern), setRedos = transformCellsToRange(unitId, subUnitId, setCells), removeRedos = {\n      unitId,\n      subUnitId,\n      ranges: removeCells.map((cell) => ({\n        startColumn: cell.col,\n        startRow: cell.row,\n        endColumn: cell.col,\n        endRow: cell.row\n      }))\n    }, redos = [], undos = [];\n    if (setCells.length) {\n      Object.keys(setRedos.values).forEach((key2) => {\n        const v = setRedos.values[key2];\n        v.ranges = rangeMerge(v.ranges);\n      }), redos.push({\n        id: SetNumfmtMutation.id,\n        params: setRedos\n      });\n      const undo = factorySetNumfmtUndoMutation(accessor, setRedos);\n      undos.push(...undo);\n    }\n    if (removeCells.length) {\n      removeRedos.ranges = rangeMerge(removeRedos.ranges), redos.push({\n        id: RemoveNumfmtMutation.id,\n        params: removeRedos\n      });\n      const undo = factoryRemoveNumfmtUndoMutation(accessor, removeRedos);\n      undos.push(...undo);\n    }\n    const result = sequenceExecute(redos, commandService).result;\n    return result && undoRedoService.pushUndoRedo({\n      unitID: unitId,\n      undoMutations: undos,\n      redoMutations: redos\n    }), result;\n  }, \"handler\")\n}, AddDecimalCommand = {\n  id: \"sheet.command.numfmt.add.decimal.command\",\n  type: CommandType.COMMAND,\n  handler: /* @__PURE__ */ __name(async (accessor) => {\n    const commandService = accessor.get(ICommandService), selectionManagerService = accessor.get(SheetsSelectionsService), numfmtService = accessor.get(INumfmtService), univerInstanceService = accessor.get(IUniverInstanceService), selections = selectionManagerService.getCurrentSelections();\n    if (!selections || !selections.length)\n      return !1;\n    const target = getSheetCommandTarget(univerInstanceService);\n    if (!target) return !1;\n    const { unitId, subUnitId } = target;\n    let maxDecimals = 0;\n    selections.forEach((selection) => {\n      Range.foreach(selection.range, (row, col) => {\n        const numfmtValue = numfmtService.getValue(unitId, subUnitId, row, col);\n        if (!numfmtValue) {\n          const cell = target.worksheet.getCellRaw(row, col);\n          if (!maxDecimals && cell && cell.t === CellValueType.NUMBER && cell.v) {\n            const regResult = /\\.(\\d*)$/.exec(String(cell.v));\n            if (regResult) {\n              const length = regResult[1].length;\n              if (!length)\n                return;\n              maxDecimals = Math.max(maxDecimals, length);\n            }\n          }\n          return;\n        }\n        const decimals2 = getDecimalFromPattern(numfmtValue.pattern);\n        maxDecimals = decimals2 > maxDecimals ? decimals2 : maxDecimals;\n      });\n    });\n    const decimals = maxDecimals + 1, defaultPattern = setPatternDecimal(`0${decimals > 0 ? \".0\" : \"\"}`, decimals), values = [];\n    return selections.forEach((selection) => {\n      Range.foreach(selection.range, (row, col) => {\n        const numfmtValue = numfmtService.getValue(unitId, subUnitId, row, col);\n        if (!numfmtValue)\n          values.push({\n            row,\n            col,\n            pattern: defaultPattern\n          });\n        else {\n          const decimals2 = getDecimalFromPattern(numfmtValue.pattern), pattern = setPatternDecimal(numfmtValue.pattern, decimals2 + 1);\n          pattern !== numfmtValue.pattern && values.push({\n            row,\n            col,\n            pattern\n          });\n        }\n      });\n    }), values.length ? await commandService.executeCommand(SetNumfmtCommand.id, { values }) : !1;\n  }, \"handler\")\n}, DATEFMTLISG = [\n  {\n    label: \"1930-08-05\",\n    suffix: \"yyyy-MM-dd\"\n  },\n  {\n    label: \"1930/08/05\",\n    suffix: \"yyyy/MM/dd\"\n  },\n  {\n    label: \"1930年08月05日\",\n    suffix: 'yyyy\"年\"MM\"月\"dd\"日\"'\n  },\n  {\n    label: \"08-05\",\n    suffix: \"MM-dd\"\n  },\n  {\n    label: \"8月5日\",\n    suffix: 'M\"月\"d\"日\"'\n  },\n  {\n    label: \"13:30:30\",\n    suffix: \"h:mm:ss\"\n  },\n  {\n    label: \"13:30\",\n    suffix: \"h:mm\"\n  },\n  {\n    label: \"下午01:30\",\n    suffix: \"A/P hh:mm\"\n  },\n  {\n    label: \"下午1:30\",\n    suffix: \"A/P h:mm\"\n  },\n  {\n    label: \"下午1:30:30\",\n    suffix: \"A/P h:mm:ss\"\n  },\n  {\n    label: \"08-05 下午 01:30\",\n    suffix: \"MM-dd A/P hh:mm\"\n  }\n], NUMBERFORMAT = [\n  {\n    label: \"(1,235)\",\n    suffix: \"#,##0_);(#,##0)\"\n  },\n  {\n    label: \"(1,235) \",\n    suffix: \"#,##0_);[Red](#,##0)\",\n    color: \"red\"\n  },\n  {\n    label: \"1,234.56\",\n    suffix: \"#,##0.00_);#,##0.00\"\n  },\n  {\n    label: \"1,234.56\",\n    suffix: \"#,##0.00_);[Red]#,##0.00\",\n    color: \"red\"\n  },\n  {\n    label: \"-1,234.56\",\n    suffix: \"#,##0.00_);-#,##0.00\"\n  },\n  {\n    label: \"-1,234.56\",\n    suffix: \"#,##0.00_);[Red]-#,##0.00\",\n    color: \"red\"\n  }\n], CURRENCYFORMAT = [\n  {\n    label: /* @__PURE__ */ __name((suffix) => `${suffix}1,235`, \"label\"),\n    suffix: /* @__PURE__ */ __name((suffix) => `\"${suffix}\"#,##0.00_);\"${suffix}\"#,##0.00`, \"suffix\")\n  },\n  {\n    label: /* @__PURE__ */ __name((suffix) => `${suffix}1,235`, \"label\"),\n    suffix: /* @__PURE__ */ __name((suffix) => `\"${suffix}\"#,##0.00_);[Red]\"${suffix}\"#,##0.00`, \"suffix\"),\n    color: \"red\"\n  },\n  {\n    label: /* @__PURE__ */ __name((suffix) => `(${suffix}1,235)`, \"label\"),\n    suffix: /* @__PURE__ */ __name((suffix) => `\"${suffix}\"#,##0.00_);(\"${suffix}\"#,##0.00)`, \"suffix\")\n  },\n  {\n    label: /* @__PURE__ */ __name((suffix) => `(${suffix}1,235)`, \"label\"),\n    suffix: /* @__PURE__ */ __name((suffix) => `\"${suffix}\"#,##0.00_);[Red](\"${suffix}\"#,##0.00)`, \"suffix\"),\n    color: \"red\"\n  },\n  {\n    label: /* @__PURE__ */ __name((suffix) => `-${suffix}1,235`, \"label\"),\n    suffix: /* @__PURE__ */ __name((suffix) => `\"${suffix}\"#,##0.00_);-\"${suffix}\"#,##0.00`, \"suffix\")\n  },\n  {\n    label: /* @__PURE__ */ __name((suffix) => `-${suffix}1,235`, \"label\"),\n    suffix: /* @__PURE__ */ __name((suffix) => `\"${suffix}\"#,##0.00_);[Red]-\"${suffix}\"#,##0.00`, \"suffix\"),\n    color: \"red\"\n  }\n], _MenuCurrencyService = class _MenuCurrencyService {\n  constructor() {\n    __publicField(this, \"_currencySymbol$\", new BehaviorSubject(\"US\"));\n    __publicField(this, \"currencySymbol$\", this._currencySymbol$.asObservable());\n  }\n  /**\n   * Set the currency symbol by setting the country code.\n   */\n  setCurrencySymbolByCountryCode(symbol) {\n    this._currencySymbol$.next(symbol);\n  }\n  getCurrencySymbol() {\n    return this._currencySymbol$.getValue();\n  }\n};\n__name(_MenuCurrencyService, \"MenuCurrencyService\");\nlet MenuCurrencyService = _MenuCurrencyService;\nconst SetCurrencyCommand = {\n  id: \"sheet.command.numfmt.set.currency\",\n  type: CommandType.COMMAND,\n  handler: /* @__PURE__ */ __name(async (accessor) => {\n    const commandService = accessor.get(ICommandService), selectionManagerService = accessor.get(SheetsSelectionsService), menuCurrencyService = accessor.get(MenuCurrencyService), symbol = countryCurrencyMap[menuCurrencyService.getCurrencySymbol()] || \"$\", selections = selectionManagerService.getCurrentSelections();\n    if (!selections || !selections.length)\n      return !1;\n    const values = [], suffix = CURRENCYFORMAT[4].suffix(symbol);\n    return selections.forEach((selection) => {\n      Range.foreach(selection.range, (row, col) => {\n        values.push({ row, col, pattern: suffix, type: \"currency\" });\n      });\n    }), await commandService.executeCommand(SetNumfmtCommand.id, { values });\n  }, \"handler\")\n}, SetPercentCommand = {\n  id: \"sheet.command.numfmt.set.percent\",\n  type: CommandType.COMMAND,\n  handler: /* @__PURE__ */ __name(async (accessor) => {\n    const commandService = accessor.get(ICommandService), selections = accessor.get(SheetsSelectionsService).getCurrentSelections();\n    if (!selections || !selections.length)\n      return !1;\n    const values = [], suffix = \"0%\";\n    return selections.forEach((selection) => {\n      Range.foreach(selection.range, (row, col) => {\n        values.push({ row, col, pattern: suffix, type: \"percent\" });\n      });\n    }), await commandService.executeCommand(SetNumfmtCommand.id, { values });\n  }, \"handler\")\n}, SubtractDecimalCommand = {\n  id: \"sheet.command.numfmt.subtract.decimal.command\",\n  type: CommandType.COMMAND,\n  handler: /* @__PURE__ */ __name(async (accessor) => {\n    const commandService = accessor.get(ICommandService), selectionManagerService = accessor.get(SheetsSelectionsService), numfmtService = accessor.get(INumfmtService), univerInstanceService = accessor.get(IUniverInstanceService), selections = selectionManagerService.getCurrentSelections();\n    if (!selections || !selections.length)\n      return !1;\n    const target = getSheetCommandTarget(univerInstanceService);\n    if (!target) return !1;\n    const { unitId, subUnitId } = target;\n    let maxDecimals = 0;\n    selections.forEach((selection) => {\n      Range.foreach(selection.range, (row, col) => {\n        const numfmtValue = numfmtService.getValue(unitId, subUnitId, row, col);\n        if (!numfmtValue) {\n          const cell = target.worksheet.getCellRaw(row, col);\n          if (!maxDecimals && cell && cell.t === CellValueType.NUMBER && cell.v) {\n            const regResult = /\\.(\\d*)$/.exec(String(cell.v));\n            if (regResult) {\n              const length = regResult[1].length;\n              if (!length)\n                return;\n              maxDecimals = Math.max(maxDecimals, length);\n            }\n          }\n          return;\n        }\n        const decimals2 = getDecimalFromPattern(numfmtValue.pattern);\n        maxDecimals = decimals2 > maxDecimals ? decimals2 : maxDecimals;\n      });\n    });\n    const decimals = maxDecimals - 1, defaultPattern = setPatternDecimal(`0${decimals > 0 ? \".0\" : \".\"}`, decimals), values = [];\n    return selections.forEach((selection) => {\n      Range.foreach(selection.range, (row, col) => {\n        const numfmtValue = numfmtService.getValue(unitId, subUnitId, row, col);\n        if (!numfmtValue)\n          values.push({\n            row,\n            col,\n            pattern: defaultPattern\n          });\n        else {\n          const decimals2 = getDecimalFromPattern(numfmtValue.pattern);\n          values.push({\n            row,\n            col,\n            pattern: setPatternDecimal(numfmtValue.pattern, decimals2 - 1)\n          });\n        }\n      });\n    }), await commandService.executeCommand(SetNumfmtCommand.id, { values });\n  }, \"handler\")\n}, CloseNumfmtPanelOperator = {\n  id: \"sheet.operation.close.numfmt.panel\",\n  type: CommandType.OPERATION,\n  handler: /* @__PURE__ */ __name(() => (\n    // do nothing,just notify panel is closed\n    !0\n  ), \"handler\")\n}, INumfmtController = createIdentifier(\"INumfmtController\");\nrunOnLifecycle(LifecycleStages.Rendered, INumfmtController);\nconst OpenNumfmtPanelOperator = {\n  id: \"sheet.operation.open.numfmt.panel\",\n  type: CommandType.OPERATION,\n  handler: /* @__PURE__ */ __name((accessor) => (accessor.get(INumfmtController).openPanel(), !0), \"handler\")\n}, SHEET_NUMFMT_PLUGIN = \"SHEET_NUMFMT_PLUGIN\", getPatternType = /* @__PURE__ */ __name((pattern) => numfmt.getInfo(pattern).type || \"unknown\", \"getPatternType\"), getPatternPreview = /* @__PURE__ */ __name((pattern, value, _locale) => {\n  const info = numfmt.getInfo(pattern), locale = _locale === LocaleType.ZH_CN ? \"zh-CN\" : \"en\", negInfo = info._partitions[1], result = numfmt.format(pattern, value, { locale, throws: !1 });\n  return value < 0 ? {\n    result,\n    color: negInfo.color\n  } : {\n    result\n  };\n}, \"getPatternPreview\");\nvar __defProp$7 = Object.defineProperty, __getOwnPropDesc$7 = Object.getOwnPropertyDescriptor, __decorateClass$7 = /* @__PURE__ */ __name((decorators, target, key2, kind) => {\n  for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$7(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)\n    (decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n  return kind && result && __defProp$7(target, key2, result), result;\n}, \"__decorateClass$7\"), __decorateParam$7 = /* @__PURE__ */ __name((index, decorator) => (target, key2) => decorator(target, key2, index), \"__decorateParam$7\"), _a;\nlet SheetsNumfmtCellContentController = (_a = class extends Disposable {\n  constructor(_instanceService, _sheetInterceptorService, _themeService, _commandService, _numfmtService, _localeService) {\n    super(), this._instanceService = _instanceService, this._sheetInterceptorService = _sheetInterceptorService, this._themeService = _themeService, this._commandService = _commandService, this._numfmtService = _numfmtService, this._localeService = _localeService, this._initInterceptorCellContent();\n  }\n  // eslint-disable-next-line max-lines-per-function\n  _initInterceptorCellContent() {\n    const renderCache = new ObjectMatrix();\n    this.disposeWithMe(this._sheetInterceptorService.intercept(INTERCEPTOR_POINT.CELL_CONTENT, {\n      handler: /* @__PURE__ */ __name((cell, location, next) => {\n        const unitId = location.unitId, sheetId = location.subUnitId;\n        let numfmtValue;\n        if (cell != null && cell.s) {\n          const style = location.workbook.getStyles().get(cell.s);\n          style != null && style.n && (numfmtValue = style.n);\n        }\n        if (numfmtValue || (numfmtValue = this._numfmtService.getValue(unitId, sheetId, location.row, location.col)), !numfmtValue)\n          return next(cell);\n        const originCellValue = cell;\n        if (!originCellValue || originCellValue.t !== CellValueType.NUMBER || originCellValue.v == null || Number.isNaN(originCellValue.v))\n          return next(cell);\n        let numfmtRes = \"\";\n        const cache = renderCache.getValue(location.row, location.col);\n        if (cache && cache.parameters === `${originCellValue.v}_${numfmtValue.pattern}`)\n          return next({ ...cell, ...cache.result });\n        const info = getPatternPreview(numfmtValue.pattern, Number(originCellValue.v), this._localeService.getCurrentLocale());\n        if (numfmtRes = info.result, !numfmtRes)\n          return next(cell);\n        const res = { v: numfmtRes };\n        if (info.color) {\n          const color = this._themeService.getCurrentTheme()[`${info.color}500`];\n          color && (res.interceptorStyle = { cl: { rgb: color } });\n        }\n        return renderCache.setValue(location.row, location.col, {\n          result: res,\n          parameters: `${originCellValue.v}_${numfmtValue.pattern}`\n        }), next({ ...cell, ...res });\n      }, \"handler\"),\n      priority: InterceptCellContentPriority.NUMFMT\n    })), this.disposeWithMe(this._commandService.onCommandExecuted((commandInfo) => {\n      if (commandInfo.id === SetNumfmtMutation.id) {\n        const params = commandInfo.params;\n        Object.keys(params.values).forEach((key2) => {\n          params.values[key2].ranges.forEach((range) => {\n            Range.foreach(range, (row, col) => {\n              renderCache.realDeleteValue(row, col);\n            });\n          });\n        });\n      } else if (commandInfo.id === SetRangeValuesMutation.id) {\n        const params = commandInfo.params;\n        new ObjectMatrix(params.cellValue).forValue((row, col) => {\n          renderCache.realDeleteValue(row, col);\n        });\n      }\n    })), this.disposeWithMe(\n      this._instanceService.getCurrentTypeOfUnit$(UniverInstanceType.UNIVER_SHEET).pipe(\n        switchMap((workbook) => {\n          var _a9;\n          return (_a9 = workbook == null ? void 0 : workbook.activeSheet$) != null ? _a9 : of(null);\n        }),\n        skip(1)\n      ).subscribe(() => renderCache.reset())\n    );\n  }\n}, __name(_a, \"SheetsNumfmtCellContentController\"), _a);\nSheetsNumfmtCellContentController = __decorateClass$7([\n  OnLifecycle(LifecycleStages.Rendered, SheetsNumfmtCellContentController),\n  __decorateParam$7(0, IUniverInstanceService),\n  __decorateParam$7(1, Inject(SheetInterceptorService)),\n  __decorateParam$7(2, Inject(ThemeService)),\n  __decorateParam$7(3, Inject(ICommandService)),\n  __decorateParam$7(4, Inject(INumfmtService)),\n  __decorateParam$7(5, Inject(LocaleService))\n], SheetsNumfmtCellContentController);\nvar jsxRuntime = { exports: {} }, reactJsxRuntime_production_min = {};\n/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar f = require$$0, k = Symbol.for(\"react.element\"), l = Symbol.for(\"react.fragment\"), m = Object.prototype.hasOwnProperty, n = f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, p = { key: !0, ref: !0, __self: !0, __source: !0 };\nfunction q(c, a, g) {\n  var b, d = {}, e = null, h = null;\n  g !== void 0 && (e = \"\" + g), a.key !== void 0 && (e = \"\" + a.key), a.ref !== void 0 && (h = a.ref);\n  for (b in a) m.call(a, b) && !p.hasOwnProperty(b) && (d[b] = a[b]);\n  if (c && c.defaultProps) for (b in a = c.defaultProps, a) d[b] === void 0 && (d[b] = a[b]);\n  return { $$typeof: k, type: c, key: e, ref: h, props: d, _owner: n.current };\n}\n__name(q, \"q\");\nreactJsxRuntime_production_min.Fragment = l;\nreactJsxRuntime_production_min.jsx = q;\nreactJsxRuntime_production_min.jsxs = q;\njsxRuntime.exports = reactJsxRuntime_production_min;\nvar jsxRuntimeExports = jsxRuntime.exports;\nconst UserHabitCurrencyContext = createContext([]);\nvar __defProp$6 = Object.defineProperty, __getOwnPropDesc$6 = Object.getOwnPropertyDescriptor, __decorateClass$6 = /* @__PURE__ */ __name((decorators, target, key2, kind) => {\n  for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$6(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)\n    (decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n  return kind && result && __defProp$6(target, key2, result), result;\n}, \"__decorateClass$6\"), __decorateParam$6 = /* @__PURE__ */ __name((index, decorator) => (target, key2) => decorator(target, key2, index), \"__decorateParam$6\"), _a2;\nlet UserHabitController = (_a2 = class {\n  constructor(_localStorageService) {\n    this._localStorageService = _localStorageService;\n  }\n  _getKey(habit) {\n    return `userHabitController_${habit}`;\n  }\n  async addHabit(habit, initValue) {\n    const key2 = this._getKey(habit);\n    return this._localStorageService.getItem(key2).then((item) => {\n      item || this._localStorageService.setItem(key2, initValue);\n    });\n  }\n  markHabit(habit, value) {\n    const key2 = this._getKey(habit);\n    this._localStorageService.getItem(key2).then((list) => {\n      if (list) {\n        const index = list.findIndex((item) => item === value);\n        index > -1 && list.splice(index, 1), list.unshift(value), this._localStorageService.setItem(key2, list);\n      }\n    });\n  }\n  async getHabit(habit, sortList) {\n    const key2 = this._getKey(habit), result = await this._localStorageService.getItem(key2);\n    if (sortList && result) {\n      const priority = result.map((item, index, arr) => {\n        const length = arr.length;\n        return {\n          value: item,\n          priority: length - index\n        };\n      });\n      return sortList.sort((a, b) => {\n        var _a9, _b;\n        const ap = ((_a9 = priority.find((item) => item.value === a)) == null ? void 0 : _a9.priority) || -1;\n        return (((_b = priority.find((item) => item.value === b)) == null ? void 0 : _b.priority) || -1) - ap;\n      });\n    }\n    return result || [];\n  }\n  deleteHabit(habit) {\n    this._localStorageService.removeItem(habit);\n  }\n}, __name(_a2, \"UserHabitController\"), _a2);\nUserHabitController = __decorateClass$6([\n  __decorateParam$6(0, Inject(ILocalStorageService))\n], UserHabitController);\nconst key$1 = \"numfmtCurrency\", useCurrencyOptions = /* @__PURE__ */ __name((onOptionChange) => {\n  const userHabitController = useDependency(UserHabitController), [options, optionsSet] = useState(currencySymbols);\n  return useEffect(() => {\n    userHabitController.addHabit(\"numfmtCurrency\", []).then(() => {\n      userHabitController.getHabit(key$1, [...currencySymbols]).then((list) => {\n        optionsSet(list), onOptionChange && onOptionChange(list);\n      });\n    });\n  }, []), { userHabitCurrency: options, mark: /* @__PURE__ */ __name((v) => {\n    userHabitController.markHabit(key$1, v);\n  }, \"mark\") };\n}, \"useCurrencyOptions\"), useNextTick = /* @__PURE__ */ __name(() => {\n  const effectList = useRef([]), [value, dispatch] = useState({});\n  return useEffect(() => {\n    effectList.current.forEach((fn) => {\n      fn();\n    }), effectList.current = [];\n  }, [value]), /* @__PURE__ */ __name((fn) => {\n    effectList.current.push(fn), dispatch({});\n  }, \"nextTick\");\n}, \"useNextTick\"), getCurrencyType = /* @__PURE__ */ __name((pattern) => currencySymbols.find((code) => pattern.includes(code)), \"getCurrencyType\"), isAccountingPanel = /* @__PURE__ */ __name((pattern) => !!getCurrencyType(pattern) && pattern.startsWith(\"_(\"), \"isAccountingPanel\"), AccountingPanel = /* @__PURE__ */ __name((props) => {\n  const [decimal, decimalSet] = useState(() => getDecimalFromPattern(props.defaultPattern || \"\", 2)), userHabitCurrency = useContext(UserHabitCurrencyContext), [suffix, suffixSet] = useState(() => getCurrencyType(props.defaultPattern) || userHabitCurrency[0]), options = useMemo(() => userHabitCurrency.map((key2) => ({ label: key2, value: key2 })), []), t = useDependency(LocaleService).t;\n  props.action.current = () => setPatternDecimal(`_(\"${suffix}\"* #,##0${decimal > 0 ? \".0\" : \"\"}_)`, decimal);\n  const onSelect = /* @__PURE__ */ __name((v) => {\n    suffixSet(v), props.onChange(setPatternDecimal(`_(\"${v}\"* #,##0${decimal > 0 ? \".0\" : \"\"}_)`, decimal));\n  }, \"onSelect\"), onDecimalChange = /* @__PURE__ */ __name((v) => {\n    const decimal2 = v || 0;\n    decimalSet(decimal2), props.onChange(setPatternDecimal(`_(\"${suffix}\"* #,##0${decimal2 > 0 ? \".0\" : \"\"}_)`, decimal2));\n  }, \"onDecimalChange\");\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { children: [\n    /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: \"m-t-16 options \", children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: \"option\", children: [\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"label\", children: t(\"sheet.numfmt.decimalLength\") }),\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-8 w-120\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(InputNumber, { value: decimal, max: 20, min: 0, onChange: onDecimalChange }) })\n      ] }),\n      /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: \"option\", children: [\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"label\", children: t(\"sheet.numfmt.currencyType\") }),\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-8 w-140\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Select, { onChange: onSelect, options, value: suffix }) })\n      ] })\n    ] }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"describe m-t-14\", children: t(\"sheet.numfmt.accountingDes\") })\n  ] });\n}, \"AccountingPanel\"), getCurrencyFormatOptions = /* @__PURE__ */ __name((suffix) => CURRENCYFORMAT.map((item) => ({\n  label: item.label(suffix),\n  value: item.suffix(suffix),\n  color: item.color\n})), \"getCurrencyFormatOptions\"), getDateFormatOptions = /* @__PURE__ */ __name(() => DATEFMTLISG.map((item) => ({ label: item.label, value: item.suffix })), \"getDateFormatOptions\"), getNumberFormatOptions = /* @__PURE__ */ __name(() => NUMBERFORMAT.map((item) => ({ label: item.label, value: item.suffix, color: item.color })), \"getNumberFormatOptions\"), isCurrencyPanel = /* @__PURE__ */ __name((pattern) => !!getCurrencyType(pattern) && !pattern.startsWith(\"_(\"), \"isCurrencyPanel\"), CurrencyPanel = /* @__PURE__ */ __name((props) => {\n  const t = useDependency(LocaleService).t, userHabitCurrency = useContext(UserHabitCurrencyContext), [suffix, suffixSet] = useState(() => getCurrencyType(props.defaultPattern) || userHabitCurrency[0]), [decimal, decimalSet] = useState(() => getDecimalFromPattern(props.defaultPattern || \"\", 2)), [pattern, patternSet] = useState(() => {\n    var _a9;\n    const negativeOptions2 = getCurrencyFormatOptions(suffix);\n    return ((_a9 = negativeOptions2.find((item) => isPatternEqualWithoutDecimal(item.value, props.defaultPattern))) == null ? void 0 : _a9.value) || negativeOptions2[0].value;\n  }), negativeOptions = useMemo(() => getCurrencyFormatOptions(suffix), [suffix]), options = useMemo(() => userHabitCurrency.map((key2) => ({ label: key2, value: key2 })), [userHabitCurrency]);\n  props.action.current = () => setPatternDecimal(pattern, decimal);\n  const onSelect = /* @__PURE__ */ __name((value) => {\n    if (value === void 0)\n      return;\n    suffixSet(value);\n    const pattern2 = getCurrencyFormatOptions(value)[0].value;\n    patternSet(pattern2), props.onChange(setPatternDecimal(pattern2, decimal));\n  }, \"onSelect\"), onChange = /* @__PURE__ */ __name((value) => {\n    value !== void 0 && (patternSet(value), props.onChange(setPatternDecimal(value, decimal)));\n  }, \"onChange\"), onDecimalChange = /* @__PURE__ */ __name((v) => {\n    decimalSet(v || 0), props.onChange(setPatternDecimal(pattern, v || 0));\n  }, \"onDecimalChange\");\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { children: [\n    /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: \"m-t-16 options \", children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: \"option\", children: [\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"label\", children: t(\"sheet.numfmt.decimalLength\") }),\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-8 w-120\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(InputNumber, { value: decimal, max: 20, min: 0, onChange: onDecimalChange }) })\n      ] }),\n      /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: \"option\", children: [\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"label\", children: t(\"sheet.numfmt.currencyType\") }),\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-8 w-140\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Select, { onChange: onSelect, options, value: suffix }) })\n      ] })\n    ] }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-16 label\", children: t(\"sheet.numfmt.negType\") }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-8\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectList, { onChange, options: negativeOptions, value: pattern }) }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"describe m-t-14\", children: t(\"sheet.numfmt.currencyDes\") })\n  ] });\n}, \"CurrencyPanel\"), isDatePanel = /* @__PURE__ */ __name((pattern) => {\n  const info = numfmt.getInfo(pattern);\n  return getDateFormatOptions().map((item) => item.value).includes(pattern) || [\"date\", \"datetime\", \"time\"].includes(info.type);\n}, \"isDatePanel\"), DatePanel = /* @__PURE__ */ __name((props) => {\n  const options = useMemo(getDateFormatOptions, []), t = useDependency(LocaleService).t, [suffix, suffixSet] = useState(() => {\n    if (props.defaultPattern) {\n      const item = options.find((item2) => item2.value === props.defaultPattern);\n      if (item)\n        return item.value;\n    }\n    return options[0].value;\n  });\n  props.action.current = () => suffix;\n  const onChange = /* @__PURE__ */ __name((v) => {\n    v !== void 0 && (suffixSet(v), props.onChange(v));\n  }, \"onChange\");\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { children: [\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-16 label\", children: t(\"sheet.numfmt.dateType\") }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-8\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectList, { value: suffix, options, onChange }) }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"describe m-t-14\", children: t(\"sheet.numfmt.dateDes\") })\n  ] });\n}, \"DatePanel\"), isGeneralPanel = /* @__PURE__ */ __name((pattern) => !pattern, \"isGeneralPanel\"), GeneralPanel = /* @__PURE__ */ __name((props) => {\n  const t = useDependency(LocaleService).t;\n  return props.action.current = () => \"\", /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"describe m-t-14\", children: t(\"sheet.numfmt.generalDes\") }) });\n}, \"GeneralPanel\"), isThousandthPercentilePanel = /* @__PURE__ */ __name((pattern) => getNumberFormatOptions().some((item) => isPatternEqualWithoutDecimal(item.value, pattern)), \"isThousandthPercentilePanel\"), ThousandthPercentilePanel = /* @__PURE__ */ __name((props) => {\n  const localeService = useDependency(LocaleService), options = useMemo(getNumberFormatOptions, []), [decimal, decimalSet] = useState(() => getDecimalFromPattern(props.defaultPattern || \"\", 0)), [suffix, suffixSet] = useState(() => {\n    const item = options.find((item2) => isPatternEqualWithoutDecimal(item2.value, props.defaultPattern || \"\"));\n    return (item == null ? void 0 : item.value) || options[0].value;\n  }), pattern = useMemo(() => setPatternDecimal(suffix, Number(decimal || 0)), [suffix, decimal]), isInputDisable = useMemo(() => !isPatternHasDecimal(suffix), [suffix]), handleDecimalChange = /* @__PURE__ */ __name((decimal2) => {\n    decimalSet(decimal2 || 0), props.onChange(setPatternDecimal(suffix, Number(decimal2 || 0)));\n  }, \"handleDecimalChange\"), handleClick = /* @__PURE__ */ __name((v) => {\n    v !== void 0 && (decimalSet(getDecimalFromPattern(v, 0)), suffixSet(v), props.onChange(v));\n  }, \"handleClick\");\n  return props.action.current = () => pattern, /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { children: [\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-16 label\", children: localeService.t(\"sheet.numfmt.decimalLength\") }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-8\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n      InputNumber,\n      {\n        disabled: isInputDisable,\n        value: decimal,\n        max: 20,\n        min: 0,\n        onChange: handleDecimalChange\n      }\n    ) }),\n    /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: \"m-t-16 label\", children: [\n      \" \",\n      localeService.t(\"sheet.numfmt.negType\")\n    ] }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-8\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(SelectList, { onChange: handleClick, options, value: suffix }) }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"describe m-t-14\", children: localeService.t(\"sheet.numfmt.thousandthPercentileDes\") })\n  ] });\n}, \"ThousandthPercentilePanel\");\nvar __assign = function() {\n  return __assign = Object.assign || function(t) {\n    for (var s, i = 1, n2 = arguments.length; i < n2; i++) {\n      s = arguments[i];\n      for (var p2 in s) Object.prototype.hasOwnProperty.call(s, p2) && (t[p2] = s[p2]);\n    }\n    return t;\n  }, __assign.apply(this, arguments);\n}, __rest = function(s, e) {\n  var t = {};\n  for (var p2 in s) Object.prototype.hasOwnProperty.call(s, p2) && e.indexOf(p2) < 0 && (t[p2] = s[p2]);\n  if (s != null && typeof Object.getOwnPropertySymbols == \"function\")\n    for (var i = 0, p2 = Object.getOwnPropertySymbols(s); i < p2.length; i++)\n      e.indexOf(p2[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p2[i]) && (t[p2[i]] = s[p2[i]]);\n  return t;\n}, IconBase = forwardRef(function(props, ref) {\n  var icon = props.icon, id = props.id, className = props.className, extend = props.extend, restProps = __rest(props, [\"icon\", \"id\", \"className\", \"extend\"]), cls = \"univerjs-icon univerjs-icon-\".concat(id, \" \").concat(className || \"\").trim(), idSuffix = useRef(\"_\".concat(generateShortUuid()));\n  return render(icon, \"\".concat(id), { defIds: icon.defIds, idSuffix: idSuffix.current }, __assign({ ref, className: cls }, restProps), extend);\n});\nfunction render(node, id, runtimeProps, rootProps, extend) {\n  return createElement(node.tag, __assign(__assign({ key: id }, replaceRuntimeIdsAndExtInAttrs(node, runtimeProps, extend)), rootProps), (replaceRuntimeIdsInDefs(node, runtimeProps).children || []).map(function(child, index) {\n    return render(child, \"\".concat(id, \"-\").concat(node.tag, \"-\").concat(index), runtimeProps, void 0, extend);\n  }));\n}\n__name(render, \"render\");\nfunction replaceRuntimeIdsAndExtInAttrs(node, runtimeProps, extend) {\n  var attrs = __assign({}, node.attrs);\n  extend != null && extend.colorChannel1 && attrs.fill === \"colorChannel1\" && (attrs.fill = extend.colorChannel1);\n  var defIds = runtimeProps.defIds;\n  return !defIds || defIds.length === 0 || (node.tag === \"use\" && attrs[\"xlink:href\"] && (attrs[\"xlink:href\"] = attrs[\"xlink:href\"] + runtimeProps.idSuffix), Object.entries(attrs).forEach(function(_a9) {\n    var key2 = _a9[0], value = _a9[1];\n    typeof value == \"string\" && (attrs[key2] = value.replace(/url\\(#(.*)\\)/, \"url(#$1\".concat(runtimeProps.idSuffix, \")\")));\n  })), attrs;\n}\n__name(replaceRuntimeIdsAndExtInAttrs, \"replaceRuntimeIdsAndExtInAttrs\");\nfunction replaceRuntimeIdsInDefs(node, runtimeProps) {\n  var _a9, defIds = runtimeProps.defIds;\n  return !defIds || defIds.length === 0 ? node : node.tag === \"defs\" && (!((_a9 = node.children) === null || _a9 === void 0) && _a9.length) ? __assign(__assign({}, node), { children: node.children.map(function(child) {\n    return typeof child.attrs.id == \"string\" && defIds && defIds.indexOf(child.attrs.id) > -1 ? __assign(__assign({}, child), { attrs: __assign(__assign({}, child.attrs), { id: child.attrs.id + runtimeProps.idSuffix }) }) : child;\n  }) }) : node;\n}\n__name(replaceRuntimeIdsInDefs, \"replaceRuntimeIdsInDefs\");\nfunction generateShortUuid() {\n  return Math.random().toString(36).substring(2, 8);\n}\n__name(generateShortUuid, \"generateShortUuid\");\nIconBase.displayName = \"UniverIcon\";\nvar element = { tag: \"svg\", attrs: { fill: \"none\", viewBox: \"0 0 16 16\", width: \"1em\", height: \"1em\" }, children: [{ tag: \"path\", attrs: { fill: \"currentColor\", d: \"M14.1544 3.75557C14.3887 3.98988 14.3887 4.36978 14.1544 4.6041L6.51409 12.2444C6.40157 12.3569 6.24896 12.4201 6.08983 12.4201C5.9307 12.4201 5.77808 12.3569 5.66556 12.2444L1.84541 8.42425C1.6111 8.18993 1.6111 7.81003 1.84541 7.57572C2.07973 7.34141 2.45963 7.34141 2.69394 7.57572L6.08983 10.9716L13.3059 3.75557C13.5402 3.52126 13.9201 3.52126 14.1544 3.75557Z\", fillRule: \"evenodd\", clipRule: \"evenodd\" } }] }, CheckMarkSingle = forwardRef(function(props, ref) {\n  return createElement(IconBase, Object.assign({}, props, {\n    id: \"check-mark-single\",\n    ref,\n    icon: element\n  }));\n});\nCheckMarkSingle.displayName = \"CheckMarkSingle\";\nconst customFormatTitle = \"univer-custom-format-title\", customFormatInput = \"univer-custom-format-input\", customFormatHistoryList = \"univer-custom-format-history-list\", customFormatHistoryListItem = \"univer-custom-format-history-list-item\", customFormatHistoryListItemIconWrap = \"univer-custom-format-history-list-item-icon-wrap\", customFormatDes = \"univer-custom-format-des\", styles = {\n  customFormatTitle,\n  customFormatInput,\n  customFormatHistoryList,\n  customFormatHistoryListItem,\n  customFormatHistoryListItemIconWrap,\n  customFormatDes\n}, key = \"customFormat\", historyPatternKey = \"numfmt_custom_pattern\";\nfunction CustomFormat(props) {\n  const { defaultPattern, action, onChange } = props, userHabitController = useDependency(UserHabitController), localStorageService = useDependency(ILocalStorageService), localeService = useDependency(LocaleService), [pattern, patternSet] = useState(defaultPattern);\n  action.current = () => (userHabitController.markHabit(key, pattern), localStorageService.getItem(historyPatternKey).then((list = []) => {\n    const _list = [.../* @__PURE__ */ new Set([pattern, ...list || []])].splice(0, 10).filter((e) => !!e);\n    localStorageService.setItem(historyPatternKey, _list);\n  }), pattern);\n  const [options, optionsSet] = useState([]);\n  useEffect(() => {\n    localStorageService.getItem(historyPatternKey).then((historyList) => {\n      const list = [\n        ...CURRENCYFORMAT.map((item) => item.suffix(\"$\")),\n        ...DATEFMTLISG.map((item) => item.suffix),\n        ...NUMBERFORMAT.map((item) => item.suffix)\n      ];\n      list.push(...historyList || []), userHabitController.addHabit(key, []).finally(() => {\n        userHabitController.getHabit(key, list).then((list2) => {\n          optionsSet([...new Set(list2)]);\n        });\n      });\n    });\n  }, []);\n  const handleClick = /* @__PURE__ */ __name((p2) => {\n    patternSet(p2), onChange(p2);\n  }, \"handleClick\"), handleBlur = /* @__PURE__ */ __name(() => {\n    onChange(pattern);\n  }, \"handleBlur\");\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles.customFormat, children: [\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles.customFormatTitle, children: localeService.t(\"sheet.numfmt.customFormat\") }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(Input, { placeholder: localeService.t(\"sheet.numfmt.customFormat\"), onBlur: handleBlur, value: pattern, onChange: patternSet, className: styles.customFormatInput }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles.customFormatHistoryList, children: options.map((p2) => /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { onClick: /* @__PURE__ */ __name(() => handleClick(p2), \"onClick\"), className: styles.customFormatHistoryListItem, children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles.customFormatHistoryListItemIconWrap, children: pattern === p2 && /* @__PURE__ */ jsxRuntimeExports.jsx(CheckMarkSingle, {}) }),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { children: p2 })\n    ] }, p2)) }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles.customFormatDes, children: localeService.t(\"sheet.numfmt.customFormatDes\") })\n  ] });\n}\n__name(CustomFormat, \"CustomFormat\");\nconst SheetNumfmtPanel = /* @__PURE__ */ __name((props) => {\n  const { defaultValue, defaultPattern, row, col } = props.value, localeService = useDependency(LocaleService), getCurrentPattern = useRef(() => \"\"), t = localeService.t, nextTick = useNextTick(), typeOptions = useMemo(\n    () => [\n      { label: \"sheet.numfmt.general\", component: GeneralPanel },\n      { label: \"sheet.numfmt.accounting\", component: AccountingPanel },\n      { label: \"sheet.numfmt.currency\", component: CurrencyPanel },\n      { label: \"sheet.numfmt.date\", component: DatePanel },\n      { label: \"sheet.numfmt.thousandthPercentile\", component: ThousandthPercentilePanel },\n      { label: \"sheet.numfmt.customFormat\", component: CustomFormat }\n    ].map((item) => ({ ...item, label: t(item.label) })),\n    []\n  ), [type, typeSet] = useState(findDefaultType), [key2, keySet] = useState(() => `${row}_${col}`), { mark, userHabitCurrency } = useCurrencyOptions(() => keySet(`${row}_${col}_userCurrency'`)), BusinessComponent = useMemo(() => {\n    var _a9;\n    return (_a9 = typeOptions.find((item) => item.label === type)) == null ? void 0 : _a9.component;\n  }, [type]);\n  function findDefaultType() {\n    return [isGeneralPanel, isAccountingPanel, isCurrencyPanel, isDatePanel, isThousandthPercentilePanel].reduce((pre, curFn, index) => pre || (curFn(defaultPattern) ? typeOptions[index].label : \"\"), \"\") || typeOptions[0].label;\n  }\n  __name(findDefaultType, \"findDefaultType\");\n  const selectOptions = typeOptions.map((option) => ({\n    label: option.label,\n    value: option.label\n  })), handleSelect = /* @__PURE__ */ __name((value) => {\n    typeSet(value), nextTick(() => props.onChange({ type: \"change\", value: getCurrentPattern.current() || \"\" }));\n  }, \"handleSelect\"), handleChange = /* @__PURE__ */ __name((v) => {\n    props.onChange({ type: \"change\", value: v });\n  }, \"handleChange\"), handleConfirm = /* @__PURE__ */ __name(() => {\n    const pattern = getCurrentPattern.current() || \"\", currency = getCurrencyType(pattern);\n    currency && mark(currency), props.onChange({ type: \"confirm\", value: pattern });\n  }, \"handleConfirm\"), handleCancel = /* @__PURE__ */ __name(() => {\n    props.onChange({ type: \"cancel\", value: \"\" });\n  }, \"handleCancel\"), subProps = {\n    onChange: handleChange,\n    defaultValue,\n    defaultPattern,\n    action: getCurrentPattern\n  };\n  return useEffect(() => {\n    typeSet(findDefaultType()), keySet(`${row}_${col}`);\n  }, [row, col]), /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: \"numfmt-panel p-b-20\", children: [\n    /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"label m-t-14\", children: t(\"sheet.numfmt.numfmtType\") }),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-t-8\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Select, { onChange: handleSelect, options: selectOptions, value: type, style: { width: \"100%\" } }) }),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { children: BusinessComponent && /* @__PURE__ */ jsxRuntimeExports.jsx(UserHabitCurrencyContext.Provider, { value: userHabitCurrency, children: /* @__PURE__ */ createElement(BusinessComponent, { ...subProps, key: key2 }) }) })\n    ] }),\n    /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: \"btn-list m-t-14 m-b-20\", children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { size: \"small\", onClick: handleCancel, className: \"m-r-12\", children: t(\"sheet.numfmt.cancel\") }),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { type: \"primary\", size: \"small\", onClick: handleConfirm, children: t(\"sheet.numfmt.confirm\") })\n    ] })\n  ] });\n}, \"SheetNumfmtPanel\");\nvar __defProp$5 = Object.defineProperty, __getOwnPropDesc$5 = Object.getOwnPropertyDescriptor, __decorateClass$5 = /* @__PURE__ */ __name((decorators, target, key2, kind) => {\n  for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$5(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)\n    (decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n  return kind && result && __defProp$5(target, key2, result), result;\n}, \"__decorateClass$5\"), __decorateParam$5 = /* @__PURE__ */ __name((index, decorator) => (target, key2) => decorator(target, key2, index), \"__decorateParam$5\"), _a3;\nlet NumfmtController = (_a3 = class extends Disposable {\n  constructor(_sheetInterceptorService, _themeService, _univerInstanceService, _commandService, _selectionManagerService, _renderManagerService, _numfmtService, _componentManager, _sidebarService, _localeService) {\n    super();\n    /**\n     * If _previewPattern is null ,the realTimeRenderingInterceptor will skip and if it is '',realTimeRenderingInterceptor will clear numfmt.\n     * @private\n     * @type {(string | null)}\n     * @memberof NumfmtController\n     */\n    __publicField(this, \"_previewPattern\", \"\");\n    __publicField(this, \"_sidebarDisposable\", null);\n    this._sheetInterceptorService = _sheetInterceptorService, this._themeService = _themeService, this._univerInstanceService = _univerInstanceService, this._commandService = _commandService, this._selectionManagerService = _selectionManagerService, this._renderManagerService = _renderManagerService, this._numfmtService = _numfmtService, this._componentManager = _componentManager, this._sidebarService = _sidebarService, this._localeService = _localeService, this._initRealTimeRenderingInterceptor(), this._initPanel(), this._initCommands(), this._initCloseListener(), this._commandExecutedListener();\n  }\n  openPanel() {\n    var _a9;\n    const sidebarService = this._sidebarService, selectionManagerService = this._selectionManagerService, commandService = this._commandService, univerInstanceService = this._univerInstanceService, numfmtService = this._numfmtService, localeService = this._localeService, range = (((_a9 = selectionManagerService.getCurrentSelections()) == null ? void 0 : _a9.map((s) => s.range)) || [])[0];\n    if (!range)\n      return !1;\n    const workbook = univerInstanceService.getCurrentUnitForType(UniverInstanceType.UNIVER_SHEET), sheet = workbook.getActiveSheet();\n    if (!sheet)\n      return !1;\n    const cellValue = sheet.getCellRaw(range.startRow, range.startColumn), numfmtValue = numfmtService.getValue(\n      workbook.getUnitId(),\n      sheet.getSheetId(),\n      range.startRow,\n      range.startColumn\n    );\n    let pattern = \"\";\n    numfmtValue && (pattern = numfmtValue.pattern);\n    const defaultValue = (cellValue == null ? void 0 : cellValue.t) === CellValueType.NUMBER ? cellValue.v : 12345678, props = {\n      onChange: /* @__PURE__ */ __name((config) => {\n        var _a10;\n        if (config.type === \"change\")\n          this._previewPattern = config.value, this._forceUpdate();\n        else if (config.type === \"confirm\") {\n          const selections2 = ((_a10 = selectionManagerService.getCurrentSelections()) == null ? void 0 : _a10.map((s) => s.range)) || [], params = { values: [] }, patternType = getPatternType(config.value);\n          selections2.forEach((rangeInfo) => {\n            Range.foreach(rangeInfo, (row, col) => {\n              params.values.push({\n                row,\n                col,\n                pattern: config.value,\n                type: patternType\n              });\n            });\n          }), commandService.executeCommand(SetNumfmtCommand.id, params), sidebarService.close();\n        } else config.type === \"cancel\" && sidebarService.close();\n      }, \"onChange\"),\n      value: { defaultPattern: pattern, defaultValue, row: range.startRow, col: range.startColumn }\n    };\n    return this._sidebarDisposable = sidebarService.open({\n      header: { title: localeService.t(\"sheet.numfmt.title\") },\n      children: {\n        label: SHEET_NUMFMT_PLUGIN,\n        ...props\n        // need passthrough to react props.\n      },\n      onClose: /* @__PURE__ */ __name(() => {\n        this._forceUpdate(), commandService.executeCommand(CloseNumfmtPanelOperator.id);\n      }, \"onClose\")\n    }), !0;\n  }\n  _forceUpdate(unitId) {\n    var _a9;\n    const renderUnit = this._renderManagerService.getRenderById(\n      unitId != null ? unitId : this._univerInstanceService.getCurrentUnitForType(UniverInstanceType.UNIVER_SHEET).getUnitId()\n    );\n    renderUnit == null || renderUnit.with(SheetSkeletonManagerService).reCalculate(), (_a9 = renderUnit == null ? void 0 : renderUnit.mainComponent) == null || _a9.makeDirty();\n  }\n  _initCommands() {\n    [\n      AddDecimalCommand,\n      SubtractDecimalCommand,\n      SetCurrencyCommand,\n      SetPercentCommand,\n      OpenNumfmtPanelOperator,\n      CloseNumfmtPanelOperator,\n      SetNumfmtCommand\n    ].forEach((config) => {\n      this.disposeWithMe(this._commandService.registerCommand(config));\n    });\n  }\n  _initPanel() {\n    this._componentManager.register(SHEET_NUMFMT_PLUGIN, SheetNumfmtPanel);\n  }\n  _initRealTimeRenderingInterceptor() {\n    const isPanelOpenObserver = new Observable((subscriber) => {\n      this._commandService.onCommandExecuted((commandInfo) => {\n        commandInfo.id === OpenNumfmtPanelOperator.id && subscriber.next(!0), commandInfo.id === CloseNumfmtPanelOperator.id && subscriber.next(!1);\n      });\n    }), combineOpenAndSelection$ = combineLatest([\n      isPanelOpenObserver,\n      this._selectionManagerService.selectionMoveEnd$.pipe(\n        map((selectionInfos) => selectionInfos ? selectionInfos.map((selectionInfo) => selectionInfo.range) : [])\n      )\n    ]);\n    this.disposeWithMe(\n      toDisposable(\n        combineOpenAndSelection$.pipe(\n          switchMap$1(\n            ([isOpen, selectionRanges]) => new Observable((subscribe) => {\n              const disposableCollection = new DisposableCollection();\n              return isOpen && selectionRanges.length && subscribe.next({ selectionRanges, disposableCollection }), () => {\n                disposableCollection.dispose();\n              };\n            })\n          ),\n          tap(() => {\n            this._previewPattern = null;\n          })\n        ).subscribe(({ disposableCollection, selectionRanges }) => {\n          var _a9, _b;\n          const workbook = this._univerInstanceService.getCurrentUnitForType(UniverInstanceType.UNIVER_SHEET);\n          this.openPanel(), disposableCollection.add(\n            this._sheetInterceptorService.intercept(INTERCEPTOR_POINT.CELL_CONTENT, {\n              priority: 99,\n              handler: /* @__PURE__ */ __name((cell, location, next) => {\n                const { row, col } = location, defaultValue = next(cell) || {};\n                if (selectionRanges.find(\n                  (range) => range.startColumn <= col && range.endColumn >= col && range.startRow <= row && range.endRow >= row\n                )) {\n                  const rawValue = location.worksheet.getCellRaw(row, col), value = rawValue == null ? void 0 : rawValue.v, type = rawValue == null ? void 0 : rawValue.t;\n                  if (value == null || type !== CellValueType.NUMBER || this._previewPattern === null)\n                    return defaultValue;\n                  const info = getPatternPreview(this._previewPattern, value, this._localeService.getCurrentLocale());\n                  if (info.color) {\n                    const color = this._themeService.getCurrentTheme()[`${info.color}500`];\n                    return {\n                      ...defaultValue,\n                      v: info.result,\n                      t: CellValueType.STRING,\n                      s: { cl: { rgb: color } }\n                    };\n                  }\n                  return {\n                    ...defaultValue,\n                    v: info.result,\n                    t: CellValueType.STRING\n                  };\n                }\n                return defaultValue;\n              }, \"handler\")\n            })\n          ), (_b = (_a9 = this._renderManagerService.getRenderById(workbook.getUnitId())) == null ? void 0 : _a9.mainComponent) == null || _b.makeDirty();\n        })\n      )\n    );\n  }\n  _commandExecutedListener() {\n    const commandList = [RemoveNumfmtMutation.id, SetNumfmtMutation.id];\n    this.disposeWithMe(\n      new Observable((subscribe) => {\n        const disposable = this._commandService.onCommandExecuted((command) => {\n          if (commandList.includes(command.id)) {\n            const params = command.params;\n            subscribe.next(params.unitId);\n          }\n        });\n        return () => disposable.dispose();\n      }).pipe(debounceTime(16)).subscribe((unitId) => this._forceUpdate(unitId))\n    );\n  }\n  _initCloseListener() {\n    this._univerInstanceService.getCurrentTypeOfUnit$(UniverInstanceType.UNIVER_SHEET).subscribe((unit) => {\n      var _a9;\n      unit || ((_a9 = this._sidebarDisposable) == null || _a9.dispose(), this._sidebarDisposable = null);\n    });\n  }\n}, __name(_a3, \"NumfmtController\"), _a3);\nNumfmtController = __decorateClass$5([\n  OnLifecycle(LifecycleStages.Rendered, NumfmtController),\n  __decorateParam$5(0, Inject(SheetInterceptorService)),\n  __decorateParam$5(1, Inject(ThemeService)),\n  __decorateParam$5(2, IUniverInstanceService),\n  __decorateParam$5(3, ICommandService),\n  __decorateParam$5(4, Inject(SheetsSelectionsService)),\n  __decorateParam$5(5, IRenderManagerService),\n  __decorateParam$5(6, INumfmtService),\n  __decorateParam$5(7, Inject(ComponentManager)),\n  __decorateParam$5(8, ISidebarService),\n  __decorateParam$5(9, Inject(LocaleService))\n], NumfmtController);\nvar __defProp$4 = Object.defineProperty, __getOwnPropDesc$4 = Object.getOwnPropertyDescriptor, __decorateClass$4 = /* @__PURE__ */ __name((decorators, target, key2, kind) => {\n  for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$4(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)\n    (decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n  return kind && result && __defProp$4(target, key2, result), result;\n}, \"__decorateClass$4\"), __decorateParam$4 = /* @__PURE__ */ __name((index, decorator) => (target, key2) => decorator(target, key2, index), \"__decorateParam$4\");\nconst createCollectEffectMutation = /* @__PURE__ */ __name(() => {\n  let list = [];\n  return {\n    add: /* @__PURE__ */ __name((unitId, subUnitId, row, col, value) => list.push({ unitId, subUnitId, row, col, value }), \"add\"),\n    getEffects: /* @__PURE__ */ __name(() => list, \"getEffects\"),\n    clean: /* @__PURE__ */ __name(() => {\n      list = [];\n    }, \"clean\")\n  };\n}, \"createCollectEffectMutation\");\nvar _a4;\nlet NumfmtEditorController = (_a4 = class extends Disposable {\n  constructor(_sheetInterceptorService, _numfmtService, _univerInstanceService, _injector, _editorBridgeService) {\n    super();\n    // collect effect mutations when edit end and push this to  commands stack in next commands progress\n    __publicField(this, \"_collectEffectMutation\", createCollectEffectMutation());\n    this._sheetInterceptorService = _sheetInterceptorService, this._numfmtService = _numfmtService, this._univerInstanceService = _univerInstanceService, this._injector = _injector, this._editorBridgeService = _editorBridgeService, this._initInterceptorEditorStart(), this._initInterceptorEditorEnd(), this._initInterceptorCommands();\n  }\n  _initInterceptorEditorStart() {\n    this._editorBridgeService && this.disposeWithMe(\n      toDisposable(\n        this._editorBridgeService.interceptor.intercept(\n          this._editorBridgeService.interceptor.getInterceptPoints().BEFORE_CELL_EDIT,\n          {\n            handler: /* @__PURE__ */ __name((value, context, next) => {\n              const row = context.row, col = context.col, numfmtCell = this._numfmtService.getValue(\n                context.unitId,\n                context.subUnitId,\n                row,\n                col\n              );\n              if (numfmtCell)\n                switch (getPatternType(numfmtCell.pattern)) {\n                  case \"scientific\":\n                  case \"currency\":\n                  case \"grouped\":\n                  case \"number\":\n                    return context.worksheet.getCellRaw(row, col);\n                  case \"percent\":\n                  case \"date\":\n                  case \"time\":\n                  case \"datetime\":\n                  default:\n                    return next && next(value);\n                }\n              return next(value);\n            }, \"handler\")\n          }\n        )\n      )\n    );\n  }\n  /**\n   * Process the  values after  edit\n   * @private\n   * @memberof NumfmtService\n   */\n  _initInterceptorEditorEnd() {\n    this._editorBridgeService && this.disposeWithMe(\n      toDisposable(\n        this._editorBridgeService.interceptor.intercept(\n          this._editorBridgeService.interceptor.getInterceptPoints().AFTER_CELL_EDIT,\n          {\n            handler: /* @__PURE__ */ __name((value, context, next) => {\n              var _a9;\n              this._collectEffectMutation.clean();\n              const currentNumfmtValue = this._numfmtService.getValue(\n                context.unitId,\n                context.subUnitId,\n                context.row,\n                context.col\n              ), currentNumfmtType = (_a9 = currentNumfmtValue && getPatternType(currentNumfmtValue.pattern)) != null ? _a9 : \"\", clean = /* @__PURE__ */ __name(() => {\n                currentNumfmtValue && this._collectEffectMutation.add(\n                  context.unitId,\n                  context.subUnitId,\n                  context.row,\n                  context.col,\n                  null\n                );\n              }, \"clean\");\n              if (!(value != null && value.v))\n                return next(value);\n              const content = String(value.v), numfmtInfo = numfmt.parseDate(content) || numfmt.parseTime(content) || numfmt.parseNumber(content);\n              if (numfmtInfo) {\n                if (numfmtInfo.z) {\n                  const v = Number(numfmtInfo.v);\n                  return this._collectEffectMutation.add(\n                    context.unitId,\n                    context.subUnitId,\n                    context.row,\n                    context.col,\n                    {\n                      pattern: numfmtInfo.z\n                    }\n                  ), { ...value, v, t: CellValueType.NUMBER };\n                }\n              } else ([\"date\", \"time\", \"datetime\", \"percent\"].includes(currentNumfmtType) || !isNumeric(content)) && clean();\n              return next(value);\n            }, \"handler\")\n          }\n        )\n      )\n    );\n  }\n  _initInterceptorCommands() {\n    const self = this;\n    this.disposeWithMe(\n      this._sheetInterceptorService.interceptCommand({\n        getMutations(command) {\n          var _a9;\n          switch (command.id) {\n            case SetRangeValuesCommand.id: {\n              const workbook = self._univerInstanceService.getCurrentUnitForType(UniverInstanceType.UNIVER_SHEET), unitId = workbook.getUnitId(), subUnitId = (_a9 = workbook.getActiveSheet()) == null ? void 0 : _a9.getSheetId();\n              if (!subUnitId)\n                return {\n                  redos: [],\n                  undos: []\n                };\n              const list = self._collectEffectMutation.getEffects();\n              if (self._collectEffectMutation.clean(), !list.length)\n                return {\n                  redos: [],\n                  undos: []\n                };\n              const cells = list.filter((item) => {\n                var _a10;\n                return !!((_a10 = item.value) != null && _a10.pattern);\n              }).map((item) => ({\n                row: item.row,\n                col: item.col,\n                pattern: item.value.pattern\n              })), removeCells = list.filter((item) => {\n                var _a10;\n                return !((_a10 = item.value) != null && _a10.pattern);\n              }).map((item) => ({\n                startRow: item.row,\n                endColumn: item.col,\n                startColumn: item.col,\n                endRow: item.row\n              })), redos = [], undos = [];\n              if (cells.length) {\n                const redo = {\n                  id: SetNumfmtMutation.id,\n                  params: transformCellsToRange(unitId, subUnitId, cells)\n                };\n                redos.push(redo), undos.push(...factorySetNumfmtUndoMutation(self._injector, redo.params));\n              }\n              if (removeCells.length) {\n                const redo = {\n                  id: RemoveNumfmtMutation.id,\n                  params: {\n                    unitId,\n                    subUnitId,\n                    ranges: removeCells\n                  }\n                };\n                redos.push(redo), undos.push(...factoryRemoveNumfmtUndoMutation(self._injector, redo.params));\n              }\n              return {\n                redos,\n                undos: undos.reverse()\n              };\n            }\n          }\n          return {\n            redos: [],\n            undos: []\n          };\n        }\n      })\n    );\n  }\n}, __name(_a4, \"NumfmtEditorController\"), _a4);\nNumfmtEditorController = __decorateClass$4([\n  OnLifecycle(LifecycleStages.Rendered, NumfmtEditorController),\n  __decorateParam$4(0, Inject(SheetInterceptorService)),\n  __decorateParam$4(1, Inject(INumfmtService)),\n  __decorateParam$4(2, Inject(IUniverInstanceService)),\n  __decorateParam$4(3, Inject(Injector)),\n  __decorateParam$4(4, Optional(IEditorBridgeService))\n], NumfmtEditorController);\nfunction isNumeric(str) {\n  return /^-?\\d+(\\.\\d+)?$/.test(str);\n}\n__name(isNumeric, \"isNumeric\");\nvar __defProp$3 = Object.defineProperty, __getOwnPropDesc$3 = Object.getOwnPropertyDescriptor, __decorateClass$3 = /* @__PURE__ */ __name((decorators, target, key2, kind) => {\n  for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$3(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)\n    (decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n  return kind && result && __defProp$3(target, key2, result), result;\n}, \"__decorateClass$3\"), __decorateParam$3 = /* @__PURE__ */ __name((index, decorator) => (target, key2) => decorator(target, key2, index), \"__decorateParam$3\"), _a5;\nlet NumfmtI18nController = (_a5 = class extends Disposable {\n  constructor(_localeService) {\n    super(), this._localeService = _localeService;\n  }\n}, __name(_a5, \"NumfmtI18nController\"), _a5);\nNumfmtI18nController = __decorateClass$3([\n  OnLifecycle(LifecycleStages.Rendered, NumfmtI18nController),\n  __decorateParam$3(0, Inject(LocaleService))\n], NumfmtI18nController);\nconst MENU_OPTIONS = [\n  {\n    label: \"sheet.numfmt.general\",\n    pattern: null\n  },\n  {\n    label: \"sheet.numfmt.text\",\n    pattern: DEFAULT_TEXT_FORMAT\n  },\n  \"|\",\n  {\n    label: \"sheet.numfmt.number\",\n    pattern: \"0\"\n  },\n  \"|\",\n  {\n    label: \"sheet.numfmt.accounting\",\n    pattern: '\"¥\" #,##0.00_);[Red](\"¥\"#,##0.00)'\n  },\n  {\n    label: \"sheet.numfmt.financialValue\",\n    pattern: \"#,##0.00;[Red]#,##0.00\"\n  },\n  {\n    label: \"sheet.numfmt.currency\",\n    pattern: '\"¥\"#,##0.00_);[Red](\"¥\"#,##0.00)'\n  },\n  {\n    label: \"sheet.numfmt.roundingCurrency\",\n    pattern: '\"¥\"#,##0;[Red]\"¥\"#,##0'\n  },\n  \"|\",\n  {\n    label: \"sheet.numfmt.date\",\n    pattern: \"yyyy-mm-dd;@\"\n  },\n  {\n    label: \"sheet.numfmt.time\",\n    pattern: 'am/pm h\":\"mm\":\"ss'\n  },\n  {\n    label: \"sheet.numfmt.dateTime\",\n    pattern: \"yyyy-m-d am/pm h:mm\"\n  },\n  {\n    label: \"sheet.numfmt.timeDuration\",\n    pattern: \"h:mm:ss\"\n  },\n  \"|\",\n  {\n    label: \"sheet.numfmt.moreFmt\",\n    pattern: \"\"\n  }\n], MORE_NUMFMT_TYPE_KEY = \"sheet.numfmt.moreNumfmtType\", OPTIONS_KEY = \"sheet.numfmt.moreNumfmtType.options\", MoreNumfmtType = /* @__PURE__ */ __name((props) => {\n  var _a9;\n  const localeService = useDependency(LocaleService), value = (_a9 = props.value) != null ? _a9 : localeService.t(\"sheet.numfmt.general\");\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(\"span\", { className: \"more-numfmt-type\", children: value });\n}, \"MoreNumfmtType\"), Options = /* @__PURE__ */ __name(() => {\n  const commandService = useDependency(ICommandService), localeService = useDependency(LocaleService), layoutService = useDependency(ILayoutService);\n  useInjector();\n  const selectionManagerService = useDependency(SheetsSelectionsService), setNumfmt = /* @__PURE__ */ __name((pattern) => {\n    const selection = selectionManagerService.getCurrentLastSelection();\n    if (!selection)\n      return;\n    const range = selection.range, values = [];\n    Range.foreach(range, (row, col) => {\n      pattern ? values.push({ row, col, pattern, type: getPatternType(pattern) }) : values.push({ row, col });\n    }), commandService.executeCommand(SetNumfmtCommand.id, { values }), layoutService.focus();\n  }, \"setNumfmt\"), handleOnclick = /* @__PURE__ */ __name((index) => {\n    if (index === 0)\n      setNumfmt(null);\n    else if (index === MENU_OPTIONS.length - 1)\n      commandService.executeCommand(OpenNumfmtPanelOperator.id);\n    else {\n      const item = MENU_OPTIONS[index];\n      item.pattern && setNumfmt(item.pattern);\n    }\n  }, \"handleOnclick\"), defaultValue = 1220;\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"more-numfmt-type-options\", children: MENU_OPTIONS.map((item, index) => item === \"|\" ? /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"line m-t-4\", onClick: /* @__PURE__ */ __name((e) => e.stopPropagation(), \"onClick\") }, index) : /* @__PURE__ */ jsxRuntimeExports.jsxs(\n    \"div\",\n    {\n      className: \"option-item m-t-4\",\n      onClick: /* @__PURE__ */ __name(() => {\n        handleOnclick(index);\n      }, \"onClick\"),\n      children: [\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { children: localeService.t(item.label) }),\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: \"m-l-26\", children: item.pattern ? getPatternPreview(item.pattern || \"\", defaultValue, localeService.getCurrentLocale()).result : \"\" })\n      ]\n    },\n    index\n  )) });\n}, \"Options\"), CurrencyMenuItem = /* @__PURE__ */ __name((accessor) => ({\n  icon: new Observable((subscribe) => {\n    const menuCurrencyService = accessor.get(MenuCurrencyService);\n    function getIconKey(symbol2) {\n      return {\n        [countryCurrencyMap.US]: \"DollarSingle\",\n        [countryCurrencyMap.RU]: \"RoubleSingle\",\n        [countryCurrencyMap.CN]: \"RmbSingle\",\n        [countryCurrencyMap.AT]: \"EuroSingle\"\n      }[symbol2] || \"DollarSingle\";\n    }\n    __name(getIconKey, \"getIconKey\");\n    const symbol = countryCurrencyMap[menuCurrencyService.getCurrencySymbol()] || \"$\";\n    return subscribe.next(getIconKey(symbol)), menuCurrencyService.currencySymbol$.subscribe((code) => {\n      const symbol2 = countryCurrencyMap[code] || \"$\";\n      subscribe.next(getIconKey(symbol2));\n    });\n  }),\n  id: SetCurrencyCommand.id,\n  title: \"sheet.numfmt.currency\",\n  tooltip: \"sheet.numfmt.currency\",\n  type: MenuItemType.BUTTON,\n  hidden$: getMenuHiddenObservable(accessor, UniverInstanceType.UNIVER_SHEET),\n  disabled$: getCurrentRangeDisable$(accessor, { workbookTypes: [WorkbookEditablePermission], worksheetTypes: [WorksheetEditPermission, WorksheetSetCellStylePermission], rangeTypes: [RangeProtectionPermissionEditPoint] })\n}), \"CurrencyMenuItem\"), AddDecimalMenuItem = /* @__PURE__ */ __name((accessor) => ({\n  icon: \"AddDigitsSingle\",\n  id: AddDecimalCommand.id,\n  title: \"sheet.numfmt.addDecimal\",\n  tooltip: \"sheet.numfmt.addDecimal\",\n  type: MenuItemType.BUTTON,\n  hidden$: getMenuHiddenObservable(accessor, UniverInstanceType.UNIVER_SHEET),\n  disabled$: getCurrentRangeDisable$(accessor, { workbookTypes: [WorkbookEditablePermission], worksheetTypes: [WorksheetEditPermission, WorksheetSetCellStylePermission], rangeTypes: [RangeProtectionPermissionEditPoint] })\n}), \"AddDecimalMenuItem\"), SubtractDecimalMenuItem = /* @__PURE__ */ __name((accessor) => ({\n  icon: \"ReduceDigitsSingle\",\n  id: SubtractDecimalCommand.id,\n  title: \"sheet.numfmt.subtractDecimal\",\n  tooltip: \"sheet.numfmt.subtractDecimal\",\n  type: MenuItemType.BUTTON,\n  hidden$: getMenuHiddenObservable(accessor, UniverInstanceType.UNIVER_SHEET),\n  disabled$: getCurrentRangeDisable$(accessor, { workbookTypes: [WorkbookEditablePermission], worksheetTypes: [WorksheetEditPermission, WorksheetSetCellStylePermission], rangeTypes: [RangeProtectionPermissionEditPoint] })\n}), \"SubtractDecimalMenuItem\"), PercentMenuItem = /* @__PURE__ */ __name((accessor) => ({\n  icon: \"PercentSingle\",\n  id: SetPercentCommand.id,\n  title: \"sheet.numfmt.percent\",\n  tooltip: \"sheet.numfmt.percent\",\n  type: MenuItemType.BUTTON,\n  hidden$: getMenuHiddenObservable(accessor, UniverInstanceType.UNIVER_SHEET),\n  disabled$: getCurrentRangeDisable$(accessor, { workbookTypes: [WorkbookEditablePermission], worksheetTypes: [WorksheetEditPermission, WorksheetSetCellStylePermission], rangeTypes: [RangeProtectionPermissionEditPoint] })\n}), \"PercentMenuItem\"), FactoryOtherMenuItem = /* @__PURE__ */ __name((accessor) => {\n  const univerInstanceService = accessor.get(IUniverInstanceService), commandService = accessor.get(ICommandService), localeService = accessor.get(LocaleService), selectionManagerService = accessor.get(SheetsSelectionsService), value$ = deriveStateFromActiveSheet$(univerInstanceService, \"\", ({ workbook, worksheet }) => new Observable(\n    (subscribe) => merge(\n      selectionManagerService.selectionMoveEnd$,\n      new Observable((commandSubscribe) => {\n        const commandList = [RemoveNumfmtMutation.id, SetNumfmtMutation.id], disposable = commandService.onCommandExecuted((commandInfo) => {\n          commandList.includes(commandInfo.id) && commandSubscribe.next(null);\n        });\n        return () => disposable.dispose();\n      })\n    ).subscribe(() => {\n      var _a9, _b;\n      const selections = selectionManagerService.getCurrentSelections();\n      if (selections && selections[0]) {\n        const range = selections[0].range, row = range.startRow, col = range.startColumn, numfmtValue = (_b = workbook.getStyles().get((_a9 = worksheet.getCell(row, col)) == null ? void 0 : _a9.s)) == null ? void 0 : _b.n, pattern = numfmtValue == null ? void 0 : numfmtValue.pattern;\n        let value = localeService.t(\"sheet.numfmt.general\");\n        if (pattern) {\n          const item = MENU_OPTIONS.filter((item2) => typeof item2 == \"object\" && item2.pattern).find(\n            (item2) => isPatternEqualWithoutDecimal(pattern, item2.pattern)\n          );\n          item && typeof item == \"object\" && item.pattern ? value = localeService.t(item.label) : value = localeService.t(\"sheet.numfmt.moreFmt\");\n        }\n        subscribe.next(value);\n      }\n    })\n  ));\n  return {\n    label: MORE_NUMFMT_TYPE_KEY,\n    id: OpenNumfmtPanelOperator.id,\n    tooltip: \"sheet.numfmt.title\",\n    type: MenuItemType.SELECTOR,\n    selections: [\n      {\n        label: {\n          name: OPTIONS_KEY,\n          hoverable: !1\n        }\n      }\n    ],\n    value$,\n    hidden$: getMenuHiddenObservable(accessor, UniverInstanceType.UNIVER_SHEET),\n    disabled$: getCurrentRangeDisable$(accessor, { workbookTypes: [WorkbookEditablePermission], worksheetTypes: [WorksheetSetCellStylePermission, WorksheetEditPermission], rangeTypes: [RangeProtectionPermissionEditPoint] })\n  };\n}, \"FactoryOtherMenuItem\"), menuSchema = {\n  [RibbonStartGroup.FORMULAS_INSERT]: {\n    [SetCurrencyCommand.id]: {\n      order: 4,\n      menuItemFactory: CurrencyMenuItem\n    },\n    [AddDecimalCommand.id]: {\n      order: 5,\n      menuItemFactory: AddDecimalMenuItem\n    },\n    [SubtractDecimalCommand.id]: {\n      order: 6,\n      menuItemFactory: SubtractDecimalMenuItem\n    },\n    [SetPercentCommand.id]: {\n      order: 7,\n      menuItemFactory: PercentMenuItem\n    },\n    [OpenNumfmtPanelOperator.id]: {\n      order: 8,\n      menuItemFactory: FactoryOtherMenuItem\n    }\n  }\n};\nvar __defProp$2 = Object.defineProperty, __getOwnPropDesc$2 = Object.getOwnPropertyDescriptor, __decorateClass$2 = /* @__PURE__ */ __name((decorators, target, key2, kind) => {\n  for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$2(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)\n    (decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n  return kind && result && __defProp$2(target, key2, result), result;\n}, \"__decorateClass$2\"), __decorateParam$2 = /* @__PURE__ */ __name((index, decorator) => (target, key2) => decorator(target, key2, index), \"__decorateParam$2\"), _a6;\nlet NumfmtMenuController = (_a6 = class extends Disposable {\n  constructor(_injector, _componentManager, _menuManagerService) {\n    super(), this._injector = _injector, this._componentManager = _componentManager, this._menuManagerService = _menuManagerService, this._initMenu();\n  }\n  _initMenu() {\n    this._menuManagerService.mergeMenu(menuSchema), this.disposeWithMe(this._componentManager.register(MORE_NUMFMT_TYPE_KEY, MoreNumfmtType)), this.disposeWithMe(this._componentManager.register(OPTIONS_KEY, Options));\n  }\n}, __name(_a6, \"NumfmtMenuController\"), _a6);\nNumfmtMenuController = __decorateClass$2([\n  OnLifecycle(LifecycleStages.Rendered, NumfmtMenuController),\n  __decorateParam$2(0, Inject(Injector)),\n  __decorateParam$2(1, Inject(ComponentManager)),\n  __decorateParam$2(2, IMenuManagerService)\n], NumfmtMenuController);\nvar __defProp$1 = Object.defineProperty, __getOwnPropDesc$1 = Object.getOwnPropertyDescriptor, __decorateClass$1 = /* @__PURE__ */ __name((decorators, target, key2, kind) => {\n  for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc$1(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)\n    (decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n  return kind && result && __defProp$1(target, key2, result), result;\n}, \"__decorateClass$1\"), __decorateParam$1 = /* @__PURE__ */ __name((index, decorator) => (target, key2) => decorator(target, key2, index), \"__decorateParam$1\"), _a7;\nlet NumfmtCurrencyController = (_a7 = class extends Disposable {\n  constructor(_injector) {\n    super();\n    __publicField(this, \"_currencySymbol$\", new BehaviorSubject(\"US\"));\n    __publicField(this, \"currencySymbol$\", this._currencySymbol$.asObservable());\n    this._injector = _injector;\n  }\n  /**\n   * Set the currency symbol by setting the country code.\n   */\n  setCurrencySymbolByCountryCode(symbol) {\n    this._currencySymbol$.next(symbol);\n  }\n  getCurrencySymbol() {\n    return this._currencySymbol$.getValue();\n  }\n}, __name(_a7, \"NumfmtCurrencyController\"), _a7);\nNumfmtCurrencyController = __decorateClass$1([\n  OnLifecycle(LifecycleStages.Rendered, NumfmtCurrencyController),\n  __decorateParam$1(0, Inject(Injector))\n], NumfmtCurrencyController);\nconst PLUGIN_CONFIG_KEY = \"sheets-numfmt.config\", defaultPluginConfig = {};\nvar __defProp2 = Object.defineProperty, __getOwnPropDesc = Object.getOwnPropertyDescriptor, __defNormalProp2 = /* @__PURE__ */ __name((obj, key2, value) => key2 in obj ? __defProp2(obj, key2, { enumerable: !0, configurable: !0, writable: !0, value }) : obj[key2] = value, \"__defNormalProp\"), __decorateClass = /* @__PURE__ */ __name((decorators, target, key2, kind) => {\n  for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key2) : target, i = decorators.length - 1, decorator; i >= 0; i--)\n    (decorator = decorators[i]) && (result = (kind ? decorator(target, key2, result) : decorator(result)) || result);\n  return kind && result && __defProp2(target, key2, result), result;\n}, \"__decorateClass\"), __decorateParam = /* @__PURE__ */ __name((index, decorator) => (target, key2) => decorator(target, key2, index), \"__decorateParam\"), __publicField2 = /* @__PURE__ */ __name((obj, key2, value) => __defNormalProp2(obj, typeof key2 != \"symbol\" ? key2 + \"\" : key2, value), \"__publicField\"), _a8;\nlet UniverSheetsNumfmtPlugin = (_a8 = class extends Plugin {\n  constructor(_config = defaultPluginConfig, _injector, _configService) {\n    super(), this._config = _config, this._injector = _injector, this._configService = _configService;\n    const { menu, ...rest } = this._config;\n    menu && this._configService.setConfig(\"menu\", menu, { merge: !0 }), this._configService.setConfig(PLUGIN_CONFIG_KEY, rest);\n  }\n  onStarting() {\n    this._injector.add([INumfmtController, { useClass: NumfmtController, lazy: !1 }]), this._injector.add([NumfmtEditorController]), this._injector.add([UserHabitController]), this._injector.add([SheetsNumfmtCellContentController]), this._injector.add([NumfmtI18nController]), this._injector.add([MenuCurrencyService]), this._injector.add([NumfmtCurrencyController]), this._injector.add([NumfmtMenuController]);\n  }\n}, __name(_a8, \"UniverSheetsNumfmtPlugin\"), _a8);\n__publicField2(UniverSheetsNumfmtPlugin, \"pluginName\", SHEET_NUMFMT_PLUGIN);\n__publicField2(UniverSheetsNumfmtPlugin, \"type\", UniverInstanceType.UNIVER_SHEET);\nUniverSheetsNumfmtPlugin = __decorateClass([\n  DependentOn(UniverSheetsPlugin, UniverSheetsUIPlugin),\n  __decorateParam(1, Inject(Injector)),\n  __decorateParam(2, IConfigService)\n], UniverSheetsNumfmtPlugin);\nexport {\n  AddDecimalCommand,\n  CloseNumfmtPanelOperator,\n  MenuCurrencyService,\n  OpenNumfmtPanelOperator,\n  SetCurrencyCommand,\n  SetNumfmtCommand,\n  SetPercentCommand,\n  SubtractDecimalCommand,\n  UniverSheetsNumfmtPlugin,\n  countryCurrencyMap,\n  getPatternPreview,\n  getPatternType\n};\n","import { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\nexport function tap(observerOrNext, error, complete) {\n    var tapObserver = isFunction(observerOrNext) || error || complete\n        ?\n            { next: observerOrNext, error: error, complete: complete }\n        : observerOrNext;\n    return tapObserver\n        ? operate(function (source, subscriber) {\n            var _a;\n            (_a = tapObserver.subscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n            var isUnsub = true;\n            source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                var _a;\n                (_a = tapObserver.next) === null || _a === void 0 ? void 0 : _a.call(tapObserver, value);\n                subscriber.next(value);\n            }, function () {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.complete) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                subscriber.complete();\n            }, function (err) {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.error) === null || _a === void 0 ? void 0 : _a.call(tapObserver, err);\n                subscriber.error(err);\n            }, function () {\n                var _a, _b;\n                if (isUnsub) {\n                    (_a = tapObserver.unsubscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                }\n                (_b = tapObserver.finalize) === null || _b === void 0 ? void 0 : _b.call(tapObserver);\n            }));\n        })\n        :\n            identity;\n}\n//# sourceMappingURL=tap.js.map","import { MonoTypeOperatorFunction, Observer } from '../types';\nimport { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\n\n/**\n * An extension to the {@link Observer} interface used only by the {@link tap} operator.\n *\n * It provides a useful set of callbacks a user can register to do side-effects in\n * cases other than what the usual {@link Observer} callbacks are\n * ({@link guide/glossary-and-semantics#next next},\n * {@link guide/glossary-and-semantics#error error} and/or\n * {@link guide/glossary-and-semantics#complete complete}).\n *\n * ## Example\n *\n * ```ts\n * import { fromEvent, switchMap, tap, interval, take } from 'rxjs';\n *\n * const source$ = fromEvent(document, 'click');\n * const result$ = source$.pipe(\n *   switchMap((_, i) => i % 2 === 0\n *     ? fromEvent(document, 'mousemove').pipe(\n *         tap({\n *           subscribe: () => console.log('Subscribed to the mouse move events after click #' + i),\n *           unsubscribe: () => console.log('Mouse move events #' + i + ' unsubscribed'),\n *           finalize: () => console.log('Mouse move events #' + i + ' finalized')\n *         })\n *       )\n *     : interval(1_000).pipe(\n *         take(5),\n *         tap({\n *           subscribe: () => console.log('Subscribed to the 1-second interval events after click #' + i),\n *           unsubscribe: () => console.log('1-second interval events #' + i + ' unsubscribed'),\n *           finalize: () => console.log('1-second interval events #' + i + ' finalized')\n *         })\n *       )\n *   )\n * );\n *\n * const subscription = result$.subscribe({\n *   next: console.log\n * });\n *\n * setTimeout(() => {\n *   console.log('Unsubscribe after 60 seconds');\n *   subscription.unsubscribe();\n * }, 60_000);\n * ```\n */\nexport interface TapObserver<T> extends Observer<T> {\n  /**\n   * The callback that `tap` operator invokes at the moment when the source Observable\n   * gets subscribed to.\n   */\n  subscribe: () => void;\n  /**\n   * The callback that `tap` operator invokes when an explicit\n   * {@link guide/glossary-and-semantics#unsubscription unsubscribe} happens. It won't get invoked on\n   * `error` or `complete` events.\n   */\n  unsubscribe: () => void;\n  /**\n   * The callback that `tap` operator invokes when any kind of\n   * {@link guide/glossary-and-semantics#finalization finalization} happens - either when\n   * the source Observable `error`s or `complete`s or when it gets explicitly unsubscribed\n   * by the user. There is no difference in using this callback or the {@link finalize}\n   * operator, but if you're already using `tap` operator, you can use this callback\n   * instead. You'd get the same result in either case.\n   */\n  finalize: () => void;\n}\nexport function tap<T>(observerOrNext?: Partial<TapObserver<T>> | ((value: T) => void)): MonoTypeOperatorFunction<T>;\n/** @deprecated Instead of passing separate callback arguments, use an observer argument. Signatures taking separate callback arguments will be removed in v8. Details: https://rxjs.dev/deprecations/subscribe-arguments */\nexport function tap<T>(\n  next?: ((value: T) => void) | null,\n  error?: ((error: any) => void) | null,\n  complete?: (() => void) | null\n): MonoTypeOperatorFunction<T>;\n\n/**\n * Used to perform side-effects for notifications from the source observable\n *\n * <span class=\"informal\">Used when you want to affect outside state with a notification without altering the notification</span>\n *\n * ![](tap.png)\n *\n * Tap is designed to allow the developer a designated place to perform side effects. While you _could_ perform side-effects\n * inside of a `map` or a `mergeMap`, that would make their mapping functions impure, which isn't always a big deal, but will\n * make it so you can't do things like memoize those functions. The `tap` operator is designed solely for such side-effects to\n * help you remove side-effects from other operations.\n *\n * For any notification, next, error, or complete, `tap` will call the appropriate callback you have provided to it, via a function\n * reference, or a partial observer, then pass that notification down the stream.\n *\n * The observable returned by `tap` is an exact mirror of the source, with one exception: Any error that occurs -- synchronously -- in a handler\n * provided to `tap` will be emitted as an error from the returned observable.\n *\n * > Be careful! You can mutate objects as they pass through the `tap` operator's handlers.\n *\n * The most common use of `tap` is actually for debugging. You can place a `tap(console.log)` anywhere\n * in your observable `pipe`, log out the notifications as they are emitted by the source returned by the previous\n * operation.\n *\n * ## Examples\n *\n * Check a random number before it is handled. Below is an observable that will use a random number between 0 and 1,\n * and emit `'big'` or `'small'` depending on the size of that number. But we wanted to log what the original number\n * was, so we have added a `tap(console.log)`.\n *\n * ```ts\n * import { of, tap, map } from 'rxjs';\n *\n * of(Math.random()).pipe(\n *   tap(console.log),\n *   map(n => n > 0.5 ? 'big' : 'small')\n * ).subscribe(console.log);\n * ```\n *\n * Using `tap` to analyze a value and force an error. Below is an observable where in our system we only\n * want to emit numbers 3 or less we get from another source. We can force our observable to error\n * using `tap`.\n *\n * ```ts\n * import { of, tap } from 'rxjs';\n *\n * const source = of(1, 2, 3, 4, 5);\n *\n * source.pipe(\n *   tap(n => {\n *     if (n > 3) {\n *       throw new TypeError(`Value ${ n } is greater than 3`);\n *     }\n *   })\n * )\n * .subscribe({ next: console.log, error: err => console.log(err.message) });\n * ```\n *\n * We want to know when an observable completes before moving on to the next observable. The system\n * below will emit a random series of `'X'` characters from 3 different observables in sequence. The\n * only way we know when one observable completes and moves to the next one, in this case, is because\n * we have added a `tap` with the side effect of logging to console.\n *\n * ```ts\n * import { of, concatMap, interval, take, map, tap } from 'rxjs';\n *\n * of(1, 2, 3).pipe(\n *   concatMap(n => interval(1000).pipe(\n *     take(Math.round(Math.random() * 10)),\n *     map(() => 'X'),\n *     tap({ complete: () => console.log(`Done with ${ n }`) })\n *   ))\n * )\n * .subscribe(console.log);\n * ```\n *\n * @see {@link finalize}\n * @see {@link TapObserver}\n *\n * @param observerOrNext A next handler or partial observer\n * @param error An error handler\n * @param complete A completion handler\n * @return A function that returns an Observable identical to the source, but\n * runs the specified Observer or callback(s) for each item.\n */\nexport function tap<T>(\n  observerOrNext?: Partial<TapObserver<T>> | ((value: T) => void) | null,\n  error?: ((e: any) => void) | null,\n  complete?: (() => void) | null\n): MonoTypeOperatorFunction<T> {\n  // We have to check to see not only if next is a function,\n  // but if error or complete were passed. This is because someone\n  // could technically call tap like `tap(null, fn)` or `tap(null, null, fn)`.\n  const tapObserver =\n    isFunction(observerOrNext) || error || complete\n      ? // tslint:disable-next-line: no-object-literal-type-assertion\n        ({ next: observerOrNext as Exclude<typeof observerOrNext, Partial<TapObserver<T>>>, error, complete } as Partial<TapObserver<T>>)\n      : observerOrNext;\n\n  return tapObserver\n    ? operate((source, subscriber) => {\n        tapObserver.subscribe?.();\n        let isUnsub = true;\n        source.subscribe(\n          createOperatorSubscriber(\n            subscriber,\n            (value) => {\n              tapObserver.next?.(value);\n              subscriber.next(value);\n            },\n            () => {\n              isUnsub = false;\n              tapObserver.complete?.();\n              subscriber.complete();\n            },\n            (err) => {\n              isUnsub = false;\n              tapObserver.error?.(err);\n              subscriber.error(err);\n            },\n            () => {\n              if (isUnsub) {\n                tapObserver.unsubscribe?.();\n              }\n              tapObserver.finalize?.();\n            }\n          )\n        );\n      })\n    : // Tap was called with no valid tap observer or handler\n      // (e.g. `tap(null, null, null)` or `tap(null)` or `tap()`)\n      // so we're going to just mirror the source.\n      identity;\n}\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","self","window","global","parcelRegister","register","module","exports","$462cf6d68dfaa0d6$export$9bb98f359d6381eb","$462cf6d68dfaa0d6$export$a7bdce4fa13fe691","$462cf6d68dfaa0d6$export$95359223c4ac5277","$83KcA","$ls2nu","$jv4BO","$5WWyv","$d0sRG","$3KKCW","$bA4Xh","$9kWt8","$bTGUS","$11kpD","$D79YY","$cahIb","$bVip2","$fElJC","$6cCiq","$gQuIR","$bLx5G","$5KEro","$462cf6d68dfaa0d6$var$__defProp","$462cf6d68dfaa0d6$var$__defNormalProp","obj","key2","value","writable","$462cf6d68dfaa0d6$var$__name","target","$462cf6d68dfaa0d6$var$__publicField","$462cf6d68dfaa0d6$var$currencySymbols","$462cf6d68dfaa0d6$export$4b021f12543b53a8","US","CA","GB","JP","IN","AU","CN","KR","RU","AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PT","SK","SI","ES","$462cf6d68dfaa0d6$var$getDecimalFromPattern","pattern","defaultValue","_a9","numfmt","getInfo","maxDecimals","$462cf6d68dfaa0d6$var$isPatternEqualWithoutDecimal","patternA","patternB","getString","tokens","reduce","pre","cur","isEnd","str","num","type","result","partitionsA","_partitions","partitionsB","A1","B1","A2","B2","color","$462cf6d68dfaa0d6$var$getDecimalString","length","Array","Math","min","max","Number","fill","join","$462cf6d68dfaa0d6$var$setPatternDecimal","patterns","decimalLength","split","map","test","replace","$462cf6d68dfaa0d6$var$isPatternHasDecimal","id","CommandType","COMMAND","handler","accessor","params","commandService","ICommandService","univerInstanceService","IUniverInstanceService","undoRedoService","IUndoRedoService","getSheetCommandTarget","unitId","subUnitId","setCells","values","filter","removeCells","setRedos","transformCellsToRange","removeRedos","ranges","cell","startColumn","col","startRow","row","endColumn","endRow","redos","undos","keys","forEach","rangeMerge","push","SetNumfmtMutation","undo","factorySetNumfmtUndoMutation","RemoveNumfmtMutation","factoryRemoveNumfmtUndoMutation","sequenceExecute","pushUndoRedo","unitID","undoMutations","redoMutations","$462cf6d68dfaa0d6$export$1d5d20f76e156639","selectionManagerService","SheetsSelectionsService","numfmtService","INumfmtService","selections","getCurrentSelections","selection","Range","foreach","range","numfmtValue","getValue","worksheet","getCellRaw","t","CellValueType","NUMBER","regResult","exec","String","decimals2","decimals","defaultPattern","executeCommand","$462cf6d68dfaa0d6$var$DATEFMTLISG","label","suffix","$462cf6d68dfaa0d6$var$NUMBERFORMAT","$462cf6d68dfaa0d6$var$CURRENCYFORMAT","$462cf6d68dfaa0d6$var$_MenuCurrencyService","constructor","BehaviorSubject","_currencySymbol$","asObservable","setCurrencySymbolByCountryCode","symbol","next","getCurrencySymbol","$462cf6d68dfaa0d6$export$37876a5013216cfd","menuCurrencyService","$462cf6d68dfaa0d6$export$a8a59e4fa0a85a1f","$462cf6d68dfaa0d6$export$6b6b961cad4a506a","$462cf6d68dfaa0d6$export$380e6cf263e379cf","OPERATION","$462cf6d68dfaa0d6$var$INumfmtController","createIdentifier","runOnLifecycle","LifecycleStages","Rendered","$462cf6d68dfaa0d6$export$4fe239f10749cd24","openPanel","$462cf6d68dfaa0d6$var$SHEET_NUMFMT_PLUGIN","$462cf6d68dfaa0d6$export$ef6794aa6fb876dd","_locale","info","locale","LocaleType","ZH_CN","negInfo","format","throws","$462cf6d68dfaa0d6$var$_a","$462cf6d68dfaa0d6$var$__defProp$7","$462cf6d68dfaa0d6$var$__getOwnPropDesc$7","getOwnPropertyDescriptor","$462cf6d68dfaa0d6$var$__decorateClass$7","decorators","kind","decorator","i","$462cf6d68dfaa0d6$var$__decorateParam$7","index","$462cf6d68dfaa0d6$var$SheetsNumfmtCellContentController","Disposable","_instanceService","_sheetInterceptorService","_themeService","_commandService","_numfmtService","_localeService","_initInterceptorCellContent","renderCache","ObjectMatrix","disposeWithMe","intercept","INTERCEPTOR_POINT","CELL_CONTENT","location","sheetId","style","workbook","getStyles","originCellValue","isNaN","numfmtRes","cache","parameters","getCurrentLocale","res","getCurrentTheme","interceptorStyle","cl","rgb","setValue","priority","InterceptCellContentPriority","NUMFMT","onCommandExecuted","commandInfo","realDeleteValue","SetRangeValuesMutation","cellValue","forValue","getCurrentTypeOfUnit$","UniverInstanceType","UNIVER_SHEET","pipe","switchMap","activeSheet$","of","skip","subscribe","reset","OnLifecycle","Inject","SheetInterceptorService","ThemeService","LocaleService","$462cf6d68dfaa0d6$var$jsxRuntime","$462cf6d68dfaa0d6$var$reactJsxRuntime_production_min","$462cf6d68dfaa0d6$var$f","a","__esModule","default","$462cf6d68dfaa0d6$var$k","Symbol","for","$462cf6d68dfaa0d6$var$l","$462cf6d68dfaa0d6$var$m","prototype","hasOwnProperty","$462cf6d68dfaa0d6$var$n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","$462cf6d68dfaa0d6$var$p","key","ref","__self","__source","$462cf6d68dfaa0d6$var$q","c","g","b","d","h","call","defaultProps","$$typeof","props","_owner","current","Fragment","jsx","jsxs","$462cf6d68dfaa0d6$var$jsxRuntimeExports","$462cf6d68dfaa0d6$var$UserHabitCurrencyContext","createContext","$462cf6d68dfaa0d6$var$_a2","$462cf6d68dfaa0d6$var$__defProp$6","$462cf6d68dfaa0d6$var$__getOwnPropDesc$6","$462cf6d68dfaa0d6$var$__decorateClass$6","$462cf6d68dfaa0d6$var$__decorateParam$6","$462cf6d68dfaa0d6$var$UserHabitController","_localStorageService","_getKey","habit","addHabit","initValue","getItem","then","item","setItem","markHabit","list","findIndex","splice","unshift","getHabit","sortList","arr","sort","_b","ap","find","deleteHabit","removeItem","ILocalStorageService","$462cf6d68dfaa0d6$var$key$1","$462cf6d68dfaa0d6$var$useCurrencyOptions","onOptionChange","userHabitController","useDependency","options","optionsSet","useState","useEffect","userHabitCurrency","mark","$462cf6d68dfaa0d6$var$useNextTick","effectList","useRef","dispatch","fn","$462cf6d68dfaa0d6$var$getCurrencyType","code","includes","$462cf6d68dfaa0d6$var$isAccountingPanel","startsWith","$462cf6d68dfaa0d6$var$AccountingPanel","decimal","decimalSet","useContext","suffixSet","useMemo","action","onSelect","onChange","onDecimalChange","decimal2","children","className","InputNumber","Select","$462cf6d68dfaa0d6$var$getCurrencyFormatOptions","$462cf6d68dfaa0d6$var$getDateFormatOptions","$462cf6d68dfaa0d6$var$getNumberFormatOptions","$462cf6d68dfaa0d6$var$isCurrencyPanel","$462cf6d68dfaa0d6$var$CurrencyPanel","patternSet","negativeOptions2","negativeOptions","pattern2","SelectList","$462cf6d68dfaa0d6$var$isDatePanel","$462cf6d68dfaa0d6$var$DatePanel","item2","$462cf6d68dfaa0d6$var$isGeneralPanel","$462cf6d68dfaa0d6$var$GeneralPanel","$462cf6d68dfaa0d6$var$isThousandthPercentilePanel","some","$462cf6d68dfaa0d6$var$ThousandthPercentilePanel","localeService","isInputDisable","handleDecimalChange","handleClick","disabled","$462cf6d68dfaa0d6$var$__assign","assign","n2","arguments","p2","apply","$462cf6d68dfaa0d6$var$__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","$462cf6d68dfaa0d6$var$IconBase","forwardRef","icon","extend","restProps","cls","concat","trim","idSuffix","$462cf6d68dfaa0d6$var$generateShortUuid","$462cf6d68dfaa0d6$var$render","defIds","node","runtimeProps","rootProps","createElement","tag","$462cf6d68dfaa0d6$var$replaceRuntimeIdsAndExtInAttrs","$462cf6d68dfaa0d6$var$replaceRuntimeIdsInDefs","child","attrs","colorChannel1","entries","random","toString","substring","displayName","$462cf6d68dfaa0d6$var$element","viewBox","width","height","fillRule","clipRule","$462cf6d68dfaa0d6$var$CheckMarkSingle","$462cf6d68dfaa0d6$var$styles","customFormatTitle","customFormatInput","customFormatHistoryList","customFormatHistoryListItem","customFormatHistoryListItemIconWrap","customFormatDes","$462cf6d68dfaa0d6$var$key","$462cf6d68dfaa0d6$var$historyPatternKey","$462cf6d68dfaa0d6$var$CustomFormat","localStorageService","_list","Set","historyList","finally","list2","handleBlur","customFormat","Input","placeholder","onBlur","onClick","$462cf6d68dfaa0d6$var$SheetNumfmtPanel","getCurrentPattern","nextTick","typeOptions","component","typeSet","findDefaultType","keySet","BusinessComponent","curFn","selectOptions","option","handleSelect","handleChange","handleConfirm","currency","handleCancel","Provider","Button","size","$462cf6d68dfaa0d6$var$_a3","$462cf6d68dfaa0d6$var$__defProp$5","$462cf6d68dfaa0d6$var$__getOwnPropDesc$5","$462cf6d68dfaa0d6$var$__decorateClass$5","$462cf6d68dfaa0d6$var$__decorateParam$5","$462cf6d68dfaa0d6$var$NumfmtController","_univerInstanceService","_selectionManagerService","_renderManagerService","_componentManager","_sidebarService","_initRealTimeRenderingInterceptor","_initPanel","_initCommands","_initCloseListener","_commandExecutedListener","sidebarService","getCurrentUnitForType","sheet","getActiveSheet","getUnitId","getSheetId","config","_a10","_previewPattern","_forceUpdate","selections2","patternType","rangeInfo","close","_sidebarDisposable","open","header","title","onClose","renderUnit","getRenderById","with","SheetSkeletonManagerService","reCalculate","mainComponent","makeDirty","registerCommand","isPanelOpenObserver","Observable","subscriber","combineOpenAndSelection$","combineLatest","selectionMoveEnd$","selectionInfos","selectionInfo","toDisposable","isOpen","selectionRanges","disposableCollection","DisposableCollection","dispose","tap","add","rawValue","STRING","commandList","disposable","command","debounceTime","unit","IRenderManagerService","ComponentManager","ISidebarService","$462cf6d68dfaa0d6$var$__defProp$4","$462cf6d68dfaa0d6$var$__getOwnPropDesc$4","$462cf6d68dfaa0d6$var$__decorateClass$4","$462cf6d68dfaa0d6$var$__decorateParam$4","$462cf6d68dfaa0d6$var$createCollectEffectMutation","getEffects","clean","$462cf6d68dfaa0d6$var$NumfmtEditorController","$462cf6d68dfaa0d6$var$_a4","_injector","_editorBridgeService","_initInterceptorEditorStart","_initInterceptorEditorEnd","_initInterceptorCommands","interceptor","getInterceptPoints","BEFORE_CELL_EDIT","context","numfmtCell","AFTER_CELL_EDIT","_collectEffectMutation","currentNumfmtValue","currentNumfmtType","content","numfmtInfo","parseDate","parseTime","parseNumber","z","$462cf6d68dfaa0d6$var$isNumeric","interceptCommand","getMutations","SetRangeValuesCommand","cells","redo","reverse","Injector","Optional","IEditorBridgeService","$462cf6d68dfaa0d6$var$_a5","$462cf6d68dfaa0d6$var$__defProp$3","$462cf6d68dfaa0d6$var$__getOwnPropDesc$3","$462cf6d68dfaa0d6$var$__decorateClass$3","$462cf6d68dfaa0d6$var$__decorateParam$3","$462cf6d68dfaa0d6$var$NumfmtI18nController","$462cf6d68dfaa0d6$var$MENU_OPTIONS","DEFAULT_TEXT_FORMAT","$462cf6d68dfaa0d6$var$MORE_NUMFMT_TYPE_KEY","$462cf6d68dfaa0d6$var$OPTIONS_KEY","$462cf6d68dfaa0d6$var$MoreNumfmtType","$462cf6d68dfaa0d6$var$Options","layoutService","ILayoutService","useInjector","setNumfmt","getCurrentLastSelection","focus","handleOnclick","stopPropagation","$462cf6d68dfaa0d6$var$CurrencyMenuItem","getIconKey","symbol2","currencySymbol$","tooltip","MenuItemType","BUTTON","hidden$","getMenuHiddenObservable","disabled$","getCurrentRangeDisable$","workbookTypes","WorkbookEditablePermission","worksheetTypes","WorksheetEditPermission","WorksheetSetCellStylePermission","rangeTypes","RangeProtectionPermissionEditPoint","$462cf6d68dfaa0d6$var$AddDecimalMenuItem","$462cf6d68dfaa0d6$var$SubtractDecimalMenuItem","$462cf6d68dfaa0d6$var$PercentMenuItem","$462cf6d68dfaa0d6$var$FactoryOtherMenuItem","value$","deriveStateFromActiveSheet$","merge","commandSubscribe","getCell","SELECTOR","name","hoverable","$462cf6d68dfaa0d6$var$menuSchema","RibbonStartGroup","FORMULAS_INSERT","order","menuItemFactory","$462cf6d68dfaa0d6$var$_a6","$462cf6d68dfaa0d6$var$__defProp$2","$462cf6d68dfaa0d6$var$__getOwnPropDesc$2","$462cf6d68dfaa0d6$var$__decorateClass$2","$462cf6d68dfaa0d6$var$__decorateParam$2","$462cf6d68dfaa0d6$var$NumfmtMenuController","_menuManagerService","_initMenu","mergeMenu","IMenuManagerService","$462cf6d68dfaa0d6$var$_a7","$462cf6d68dfaa0d6$var$__defProp$1","$462cf6d68dfaa0d6$var$__getOwnPropDesc$1","$462cf6d68dfaa0d6$var$__decorateClass$1","$462cf6d68dfaa0d6$var$__decorateParam$1","$462cf6d68dfaa0d6$var$NumfmtCurrencyController","$462cf6d68dfaa0d6$var$defaultPluginConfig","$462cf6d68dfaa0d6$var$_a8","$462cf6d68dfaa0d6$var$__defProp2","$462cf6d68dfaa0d6$var$__getOwnPropDesc","$462cf6d68dfaa0d6$var$__defNormalProp2","$462cf6d68dfaa0d6$var$__decorateClass","$462cf6d68dfaa0d6$var$__decorateParam","$462cf6d68dfaa0d6$var$__publicField2","Plugin","_config","_configService","menu","rest","setConfig","onStarting","useClass","lazy","DependentOn","UniverSheetsPlugin","UniverSheetsUIPlugin","IConfigService","$484191e4ec6496d1$export$3f23594af5f37336","$im29J","$jaOYC","$hMcgT","$agvo5","observerOrNext","error","complete","tapObserver","isFunction","operate","source","_a","isUnsub","createOperatorSubscriber","err","unsubscribe","finalize","identity"],"version":3,"file":"es.6f3dd60a.js.map"}